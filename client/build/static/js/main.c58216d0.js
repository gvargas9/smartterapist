/*! For license information please see main.c58216d0.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},117:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserModel:()=>s});var r=n(727);class s{static async getById(e){const{data:t,error:n}=await r.N.from("users").select("*").eq("id",e).single();return n?(console.error("Error fetching user:",n),null):t}static async getByEmail(e){const{data:t,error:n}=await r.N.from("users").select("*").eq("email",e).single();return n?(console.error("Error fetching user by email:",n),null):t}static async getByRole(e){const{data:t,error:n}=await r.N.from("users").select("*").eq("role",e);return n?(console.error("Error fetching users by role:",n),[]):t||[]}static async create(e){const{data:t,error:n}=await r.N.from("users").insert(e).select().single();return n?(console.error("Error creating user:",n),null):t}static async update(e,t){const{data:n,error:s}=await r.N.from("users").update(t).eq("id",e).select().single();return s?(console.error("Error updating user:",s),null):n}static async delete(e){const{error:t}=await r.N.from("users").delete().eq("id",e);return!t||(console.error("Error deleting user:",t),!1)}static async list(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*e,n=t+e-1,{data:s,error:i}=await r.N.from("users").select("*").range(t,n).order("created_at",{ascending:!1});return i?(console.error("Error listing users:",i),[]):s||[]}static async count(){const{count:e,error:t}=await r.N.from("users").select("*",{count:"exact",head:!0});return t?(console.error("Error counting users:",t),0):e||0}}},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(E,"$&/")+"/"),P(a,t,s,"",(function(e){return e}))):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+C(o=e[c],c);l+=P(o,t,s,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,s,d=i+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],s=0;return P(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},R={transition:null},L={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(829)),i=r(n(736)),a=n(745);class o{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new s.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:s=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL(`${this.url}/rpc/${e}`);let l;r||s?(t=r?"HEAD":"GET",Object.entries(n).filter((e=>{let[t,n]=e;return void 0!==n})).map((e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]})).forEach((e=>{let[t,n]=e;o.searchParams.append(t,n)}))):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new i.default({method:t,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<s&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,R(_);else{var t=r(d);null!==t&&L(w,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,v(N),N=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&L(w,u.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,j=null,N=-1,E=5,C=-1;function P(){return!(t.unstable_now()-C<E)}function O(){if(null!==j){var e=t.unstable_now();C=e;var n=!0;try{n=j(!0,e)}finally{n?k():(S=!1,j=null)}}else S=!1}if("function"===typeof b)k=function(){b(O)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,M=T.port2;T.port1.onmessage=O,k=function(){M.postMessage(null)}}else k=function(){y(O,0)};function R(e){j=e,S||(S=!0,k())}function L(e,n){N=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(m?(v(N),N=-1):m=!0,L(w,i-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,R(_))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TherapistModel:()=>s});var r=n(727);class s{static async getById(e){const{data:t,error:n}=await r.N.from("therapists").select("*").eq("id",e).single();return n?(console.error("Error fetching therapist:",n),null):t}static async getByUserId(e){const{data:t,error:n}=await r.N.from("therapists").select("*").eq("user_id",e).single();return n?(console.error("Error fetching therapist by user ID:",n),null):t}static async getWithUserData(e){let t=r.N.from("therapists").select("\n        *,\n        users:user_id (*)\n      ");e&&Object.entries(e).forEach((e=>{let[n,r]=e;t=t.eq(n,r)}));const{data:n,error:s}=await t;return s?(console.error("Error fetching therapists with user data:",s),[]):n||[]}static async getBySpecialty(e){const{data:t,error:n}=await r.N.from("therapists").select("*").contains("specialties",[e]);return n?(console.error("Error fetching therapists by specialty:",n),[]):t||[]}static async create(e){const{data:t,error:n}=await r.N.from("therapists").insert(e).select().single();return n?(console.error("Error creating therapist:",n),null):t}static async update(e,t){const{data:n,error:s}=await r.N.from("therapists").update(t).eq("id",e).select().single();return s?(console.error("Error updating therapist:",s),null):n}static async delete(e){const{error:t}=await r.N.from("therapists").delete().eq("id",e);return!t||(console.error("Error deleting therapist:",t),!1)}static async getClients(e){const{data:t,error:n}=await r.N.from("clients").select("\n        *,\n        users:user_id (*)\n      ").eq("therapist_id",e);return n?(console.error("Error fetching therapist clients:",n),[]):t||[]}static async updateAvailability(e,t){const{data:n,error:s}=await r.N.from("therapists").update({availability:t}).eq("id",e).select().single();return s?(console.error("Error updating therapist availability:",s),null):n}static async list(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*e,n=t+e-1,{data:s,error:i}=await r.N.from("therapists").select("*").range(t,n).order("created_at",{ascending:!1});return i?(console.error("Error listing therapists:",i),[]):s||[]}static async count(){const{count:e,error:t}=await r.N.from("therapists").select("*",{count:"exact",head:!0});return t?(console.error("Error counting therapists:",t),0):e||0}}},286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(630)),i=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let s=null,a=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&i&&i.length>1&&(o=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(a=[],s=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(r=null===s||void 0===s?void 0:s.details)||void 0===r?void 0:r.includes("0 rows"))&&(s=null,l=200,c="OK"),s&&this.shouldThrowOnError)throw new i.default(s)}return{error:s,data:a,count:o,status:l,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},337:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MessageModel:()=>s});var r=n(727);class s{static async getById(e){const{data:t,error:n}=await r.N.from("messages").select("*").eq("id",e).single();return n?(console.error("Error fetching message:",n),null):t}static async getSentByUser(e){const{data:t,error:n}=await r.N.from("messages").select("*").eq("sender_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching sent messages:",n),[]):t||[]}static async getReceivedByUser(e){const{data:t,error:n}=await r.N.from("messages").select("*").eq("recipient_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching received messages:",n),[]):t||[]}static async getConversation(e,t){const{data:n,error:s}=await r.N.from("messages").select("*").or(`and(sender_id.eq.${e},recipient_id.eq.${t}),and(sender_id.eq.${t},recipient_id.eq.${e})`).order("created_at",{ascending:!0});return s?(console.error("Error fetching conversation:",s),[]):n||[]}static async getWithUserData(e){let t=r.N.from("messages").select("\n        *,\n        sender:sender_id (id, first_name, last_name, email),\n        recipient:recipient_id (id, first_name, last_name, email)\n      ");e&&Object.entries(e).forEach((e=>{let[n,r]=e;t=t.eq(n,r)}));const{data:n,error:s}=await t;return s?(console.error("Error fetching messages with user data:",s),[]):n||[]}static async create(e){const{data:t,error:n}=await r.N.from("messages").insert(e).select().single();return n?(console.error("Error creating message:",n),null):t}static async update(e,t){const{data:n,error:s}=await r.N.from("messages").update(t).eq("id",e).select().single();return s?(console.error("Error updating message:",s),null):n}static async delete(e){const{error:t}=await r.N.from("messages").delete().eq("id",e);return!t||(console.error("Error deleting message:",t),!1)}static async markAsRead(e){const{data:t,error:n}=await r.N.from("messages").update({read:!0}).eq("id",e).select().single();return n?(console.error("Error marking message as read:",n),null):t}static async markAllAsRead(e){const{data:t,error:n}=await r.N.from("messages").update({read:!0}).eq("recipient_id",e).eq("read",!1).select();return n?(console.error("Error marking all messages as read:",n),0):(null===t||void 0===t?void 0:t.length)||0}static async countUnread(e){const{count:t,error:n}=await r.N.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",e).eq("read",!1);return n?(console.error("Error counting unread messages:",n),0):t||0}static subscribeToNewMessages(e,t){const n=r.N.channel("public:messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${e}`},(e=>{t(e)})).subscribe();return{unsubscribe:()=>{n.unsubscribe()}}}}},345:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BehaviorRecordModel:()=>s});var r=n(727);class s{static async getById(e){const{data:t,error:n}=await r.N.from("behavior_records").select("*").eq("id",e).single();return n?(console.error("Error fetching behavior record:",n),null):t}static async getByClientId(e){const{data:t,error:n}=await r.N.from("behavior_records").select("*").eq("client_id",e).order("recorded_at",{ascending:!1});return n?(console.error("Error fetching behavior records by client ID:",n),[]):t||[]}static async getByBehaviorType(e,t){const{data:n,error:s}=await r.N.from("behavior_records").select("*").eq("client_id",e).eq("behavior_type",t).order("recorded_at",{ascending:!1});return s?(console.error("Error fetching behavior records by type:",s),[]):n||[]}static async getByDateRange(e,t,n){const{data:s,error:i}=await r.N.from("behavior_records").select("*").eq("client_id",e).gte("recorded_at",t).lte("recorded_at",n).order("recorded_at",{ascending:!0});return i?(console.error("Error fetching behavior records by date range:",i),[]):s||[]}static async getWithClientData(e){let t=r.N.from("behavior_records").select("\n        *,\n        clients!behavior_records_client_id_fkey (\n          *,\n          users:user_id (*)\n        )\n      ");e&&Object.entries(e).forEach((e=>{let[n,r]=e;t=t.eq(n,r)}));const{data:n,error:s}=await t;return s?(console.error("Error fetching behavior records with client data:",s),[]):n||[]}static async create(e){const{data:t,error:n}=await r.N.from("behavior_records").insert(e).select().single();return n?(console.error("Error creating behavior record:",n),null):t}static async update(e,t){const{data:n,error:s}=await r.N.from("behavior_records").update(t).eq("id",e).select().single();return s?(console.error("Error updating behavior record:",s),null):n}static async delete(e){const{error:t}=await r.N.from("behavior_records").delete().eq("id",e);return!t||(console.error("Error deleting behavior record:",t),!1)}static async getStatistics(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=new Date;n.setDate(n.getDate()-t);const s=n.toISOString(),{data:i,error:a}=await r.N.from("behavior_records").select("*").eq("client_id",e).gte("recorded_at",s).order("recorded_at",{ascending:!0});if(a)return console.error("Error fetching behavior statistics:",a),{totalRecords:0,behaviorTypes:{},averageSeverity:0,severityTrend:[]};const o=i||[],l={};let c=0,d=0;const u={};o.forEach((e=>{l[e.behavior_type]=(l[e.behavior_type]||0)+1,null!==e.severity&&(c+=e.severity,d++);const t=e.recorded_at.split("T")[0];u[t]||(u[t]=[]),u[t].push(e)}));const h=Object.entries(u).map((e=>{let[t,n]=e;const r=n.reduce(((e,t)=>e+(t.severity||0)),0);return{date:t,averageSeverity:n.length>0?r/n.length:0,count:n.length}}));return{totalRecords:o.length,behaviorTypes:l,averageSeverity:d>0?c/d:0,severityTrend:h}}static async list(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*e,n=t+e-1,{data:s,error:i}=await r.N.from("behavior_records").select("*").range(t,n).order("recorded_at",{ascending:!1});return i?(console.error("Error listing behavior records:",i),[]):s||[]}static async count(){const{count:e,error:t}=await r.N.from("behavior_records").select("*",{count:"exact",head:!0});return t?(console.error("Error counting behavior records:",t),0):e||0}}},374:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(286));class i extends s.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="undefined"===typeof r?"offset":`${r}.offset`,i="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},525:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TherapySessionModel:()=>s});var r=n(727);class s{static async getById(e){const{data:t,error:n}=await r.N.from("therapy_sessions").select("*").eq("id",e).single();return n?(console.error("Error fetching therapy session:",n),null):t}static async getByClientId(e){const{data:t,error:n}=await r.N.from("therapy_sessions").select("*").eq("client_id",e).order("scheduled_start",{ascending:!1});return n?(console.error("Error fetching sessions by client ID:",n),[]):t||[]}static async getByTherapistId(e){const{data:t,error:n}=await r.N.from("therapy_sessions").select("*").eq("therapist_id",e).order("scheduled_start",{ascending:!1});return n?(console.error("Error fetching sessions by therapist ID:",n),[]):t||[]}static async getWithRelatedData(e){let t=r.N.from("therapy_sessions").select("\n        *,\n        clients!therapy_sessions_client_id_fkey (\n          *,\n          users:user_id (*)\n        ),\n        therapists!therapy_sessions_therapist_id_fkey (\n          *,\n          users:user_id (*)\n        )\n      ");e&&Object.entries(e).forEach((e=>{let[n,r]=e;t=t.eq(n,r)}));const{data:n,error:s}=await t;return s?(console.error("Error fetching sessions with related data:",s),[]):n||[]}static async getUpcomingSessions(e,t){const{data:n,error:s}=await r.N.from("client"===t?"clients":"therapists").select("id").eq("user_id",e).single();if(s||!n)return console.error(`Error fetching ${t} profile:`,s),[];const i=n.id,a=(new Date).toISOString(),{data:o,error:l}=await r.N.from("therapy_sessions").select("*").eq("client"===t?"client_id":"therapist_id",i).gte("scheduled_start",a).order("scheduled_start",{ascending:!0});return l?(console.error("Error fetching upcoming sessions:",l),[]):o||[]}static async create(e){const{data:t,error:n}=await r.N.from("therapy_sessions").insert(e).select().single();return n?(console.error("Error creating therapy session:",n),null):t}static async update(e,t){const{data:n,error:s}=await r.N.from("therapy_sessions").update(t).eq("id",e).select().single();return s?(console.error("Error updating therapy session:",s),null):n}static async delete(e){const{error:t}=await r.N.from("therapy_sessions").delete().eq("id",e);return!t||(console.error("Error deleting therapy session:",t),!1)}static async updateStatus(e,t){const{data:n,error:s}=await r.N.from("therapy_sessions").update({status:t}).eq("id",e).select().single();return s?(console.error("Error updating session status:",s),null):n}static async startSession(e){const t=(new Date).toISOString(),{data:n,error:s}=await r.N.from("therapy_sessions").update({status:"in-progress",actual_start:t}).eq("id",e).select().single();return s?(console.error("Error starting session:",s),null):n}static async endSession(e,t){const n=(new Date).toISOString(),{data:s,error:i}=await r.N.from("therapy_sessions").update({status:"completed",actual_end:n,...t&&{notes:t}}).eq("id",e).select().single();return i?(console.error("Error ending session:",i),null):s}static async list(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*e,n=t+e-1,{data:s,error:i}=await r.N.from("therapy_sessions").select("*").range(t,n).order("scheduled_start",{ascending:!1});return i?(console.error("Error listing therapy sessions:",i),[]):s||[]}static async count(){const{count:e,error:t}=await r.N.from("therapy_sessions").select("*",{count:"exact",head:!0});return t?(console.error("Error counting therapy sessions:",t),0):e||0}}},579:(e,t,n)=>{"use strict";e.exports=n(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},617:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ClientModel:()=>s});var r=n(727);class s{static async getById(e){const{data:t,error:n}=await r.N.from("clients").select("*").eq("id",e).single();return n?(console.error("Error fetching client:",n),null):t}static async getByUserId(e){const{data:t,error:n}=await r.N.from("clients").select("*").eq("user_id",e).single();return n?(console.error("Error fetching client by user ID:",n),null):t}static async getByTherapistId(e){const{data:t,error:n}=await r.N.from("clients").select("*").eq("therapist_id",e);return n?(console.error("Error fetching clients by therapist ID:",n),[]):t||[]}static async getWithUserData(e){let t=r.N.from("clients").select("\n        *,\n        users:user_id (*)\n      ");e&&Object.entries(e).forEach((e=>{let[n,r]=e;t=t.eq(n,r)}));const{data:n,error:s}=await t;return s?(console.error("Error fetching clients with user data:",s),[]):n||[]}static async create(e){const{data:t,error:n}=await r.N.from("clients").insert(e).select().single();return n?(console.error("Error creating client:",n),null):t}static async update(e,t){const{data:n,error:s}=await r.N.from("clients").update(t).eq("id",e).select().single();return s?(console.error("Error updating client:",s),null):n}static async delete(e){const{error:t}=await r.N.from("clients").delete().eq("id",e);return!t||(console.error("Error deleting client:",t),!1)}static async assignToTherapist(e,t){const{data:n,error:s}=await r.N.from("clients").update({therapist_id:t}).eq("id",e).select().single();return s?(console.error("Error assigning client to therapist:",s),null):n}static async list(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*e,n=t+e-1,{data:s,error:i}=await r.N.from("clients").select("*").range(t,n).order("created_at",{ascending:!1});return i?(console.error("Error listing clients:",i),[]):s||[]}static async count(){const{count:e,error:t}=await r.N.from("clients").select("*",{count:"exact",head:!0});return t?(console.error("Error counting clients:",t),0):e||0}}},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>i,fetch:()=>s});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const s=r.fetch,i=r.fetch.bind(r),a=r.Headers,o=r.Request,l=r.Response},673:(e,t,n)=>{const{UserModel:r}=n(117),{ClientModel:s}=n(617),{TherapistModel:i}=n(238),{TherapySessionModel:a}=n(525),{MessageModel:o}=n(337),{BehaviorRecordModel:l}=n(345);e.exports={UserModel:r,ClientModel:s,TherapistModel:i,TherapySessionModel:a,MessageModel:o,BehaviorRecordModel:l}},727:(e,t,n)=>{"use strict";n.d(t,{N:()=>zt});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class s extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class c{constructor(e){let{headers:t={},customFetch:r,region:s=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,(function*(){try{const{headers:r,method:o,body:l}=t;let c,d={},{region:u}=t;u||(u=this.region),u&&"any"!==u&&(d["x-region"]=u),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",c=l):"string"===typeof l?(d["Content-Type"]="text/plain",c=l):"undefined"!==typeof FormData&&l instanceof FormData?c=l:(d["Content-Type"]="application/json",c=JSON.stringify(l)));const h=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),r),body:c}).catch((e=>{throw new s(e)})),f=h.headers.get("x-relay-error");if(f&&"true"===f)throw new i(h);if(!h.ok)throw new a(h);let p,g=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===g?yield h.json():"application/octet-stream"===g?yield h.blob():"text/event-stream"===g?h:"multipart/form-data"===g?yield h.formData():yield h.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}}))}}var d=n(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:f,PostgrestTransformBuilder:p,PostgrestBuilder:g,PostgrestError:m}=d,y={"X-Client-Info":"realtime-js/2.11.2"};var v,b,x,w,_,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(v||(v={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(b||(b={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(x||(x={})),function(e){e.websocket="websocket"}(w||(w={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(_||(_={}));class S{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i+=r;const o=n.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class j{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const N=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((n,s)=>(n[s]=E(s,e,t,r),n)),{})},E=(e,t,n,r)=>{const s=t.find((t=>t.name===e)),i=null===s||void 0===s?void 0:s.type,a=n[e];return i&&!r.includes(i)?C(i,a):P(a)},C=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return R(t,n)}switch(e){case k.bool:return O(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return T(t);case k.json:case k.jsonb:return M(t);case k.timestamp:return L(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return P(t)}},P=e=>e,O=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},T=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},M=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},R=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(s){r=i?i.split(","):[]}return r.map((e=>C(t,e)))}return e},L=e=>"string"===typeof e?e.replace(" ","T"):e,A=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class D{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter((e=>e.status===t)).forEach((e=>e.callback(n)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var I,$,z,F;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(I||(I={}));class U{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=U.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=U.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=U.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const s=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(s,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=s[e];if(n){const r=t.map((e=>e.presence_ref)),s=n.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),l=n.filter((e=>r.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(s,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,((t,r)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map((e=>e.presence_ref)),r=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,i,r)})),this.map(i,((t,n)=>{let s=e[t];if(!s)return;const i=n.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,r(t,s,n),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}($||($={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(z||(z={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(F||(F={}));class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=b.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new D(this,x.join,this.params,this.timeout),this.rejoinTimer=new j((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=b.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=b.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=b.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=b.errored,this.rejoinTimer.scheduleTimeout())})),this._on(x.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new U(this),this.broadcastEndpointURL=A(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError((t=>null===e||void 0===e?void 0:e(F.CHANNEL_ERROR,t))),this._onClose((()=>null===e||void 0===e?void 0:e(F.CLOSED)));const o={},l={broadcast:s,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,s=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,i=[];for(let r=0;r<s;r++){const s=t[r],{filter:{event:a,schema:o,table:l,filter:c}}=s,d=n&&n[r];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),void(null===e||void 0===e||e(F.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=i,void(e&&e(F.SUBSCRIBED))}null===e||void 0===e||e(F.SUBSCRIBED)})).receive("error",(t=>{null===e||void 0===e||e(F.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null===e||void 0===e||e(F.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,s,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("error",(()=>n("error"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:i,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=b.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(x.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new D(this,x.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout((()=>r.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new D(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=x;if(n&&[a,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let d=this._onMessage(i,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i})).map((e=>e.callback(d,n))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var n,r,s,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:i}=e,a={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)}))}_isClosed(){return this.state===b.closed}_isJoined(){return this.state===b.joined}_isJoining(){return this.state===b.joining}_isLeaving(){return this.state===b.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&B.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(x.close,{},e)}_onError(e){this._on(x.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=b.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=N(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=N(e.columns,e.old_record)),t}}const V=()=>{},H="undefined"!==typeof WebSocket;class W{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=y,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=V,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${w.websocket}`,this.httpEndpoint=A(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new j((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(H)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new q(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),n.e(198).then(n.t.bind(n,198,23)).then((e=>{let{default:t}=e;this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case v.connecting:return _.Connecting;case v.open:return _.Open;case v.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}channel(e){const t=new B(`realtime:${e}`,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},this);return this.channels.push(t),t}push(e){const{topic:t,event:n,payload:r,ref:s}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let n=null;try{n=JSON.parse(atob(e.split(".")[1]))}catch(t){}if(n&&n.exp){if(!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`)}this.accessTokenValue=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(x.access_token,{access_token:e})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(x.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class q{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=v.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class K extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function J(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Y extends K{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class G extends K{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var X=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const Q=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},Z=e=>{if(Array.isArray(e))return e.map((e=>Z(e)));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((e=>{let[n,r]=e;const s=n.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[s]=Z(r)})),t};var ee=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const te=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ne=(e,t,r)=>ee(void 0,void 0,void 0,(function*(){const s=yield X(void 0,void 0,void 0,(function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response}));e instanceof s&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then((n=>{t(new Y(te(n),e.status||500))})).catch((e=>{t(new G(te(e),e))})):t(new G(te(e),e))}));function re(e,t,n,r,s,i){return ee(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,((e,t,n,r)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))})(t,r,s,i)).then((e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>ne(e,o,r)))}))}))}function se(e,t,n,r){return ee(this,void 0,void 0,(function*(){return re(e,"GET",t,n,r)}))}function ie(e,t,n,r,s){return ee(this,void 0,void 0,(function*(){return re(e,"POST",t,r,s,n)}))}function ae(e,t,n,r,s){return ee(this,void 0,void 0,(function*(){return re(e,"DELETE",t,r,s,n)}))}var oe=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const le={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ce={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class de{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=Q(r)}uploadOrUpdate(e,t,n,r){return oe(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},ce),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(s){if(J(s))return{data:null,error:s};throw s}}))}upload(e,t,n){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return oe(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ce.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),l=yield o.json();if(o.ok)return{data:{path:s,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(J(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e,t){return oe(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield ie(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new K("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}))}update(e,t,n){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t,n){return oe(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}))}copy(e,t,n){return oe(this,void 0,void 0,(function*(){try{return{data:{path:(yield ie(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}))}createSignedUrl(e,t,n){return oe(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),s=yield ie(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}))}createSignedUrls(e,t,n){return oe(this,void 0,void 0,(function*(){try{const r=yield ie(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}))}download(e,t){return oe(this,void 0,void 0,(function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),s=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield se(this.fetch,`${this.url}/${n}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(J(i))return{data:null,error:i};throw i}}))}info(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield se(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Z(e),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}))}exists(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return ee(this,void 0,void 0,(function*(){return re(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(J(n)&&n instanceof G){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return oe(this,void 0,void 0,(function*(){try{return{data:yield ae(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}}))}list(e,t,n){return oe(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},le),t),{prefix:e||""});return{data:yield ie(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ue={"X-Client-Info":"storage-js/2.7.1"};var he=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class fe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},ue),t),this.fetch=Q(n)}listBuckets(){return he(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(J(e))return{data:null,error:e};throw e}}))}getBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}}))}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return he(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}))}updateBucket(e,t){return he(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,s){return ee(this,void 0,void 0,(function*(){return re(e,"PUT",t,r,s,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}))}emptyBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield ae(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}}))}}class pe extends fe{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new de(this.url,this.headers,e,this.fetch)}}let ge="";ge="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const me={headers:{"X-Client-Info":`supabase-js-${ge}/2.49.4`}},ye={schema:"public"},ve={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},be={};var xe=n(630),we=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const _e=e=>{let t;return t=e||("undefined"===typeof fetch?xe.default:fetch),function(){return t(...arguments)}},ke=(e,t,n)=>{const r=_e(n),s="undefined"===typeof Headers?xe.Headers:Headers;return(n,i)=>we(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},i),{headers:l}))}))};var Se=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const je="2.69.1",Ne=3e4,Ee=9e4,Ce={"X-Client-Info":`gotrue-js/${je}`},Pe="X-Supabase-Api-Version",Oe={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Te=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Me extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Re(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Le extends Me{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ae extends Me{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class De extends Me{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Ie extends De{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class $e extends De{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ze extends De{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fe extends De{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ue extends De{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Be extends De{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ve(e){return Re(e)&&"AuthRetryableFetchError"===e.name}class He extends De{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class We extends De{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ke=" \t\n\r=".split(""),Je=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ke.length;t+=1)e[Ke[t].charCodeAt(0)]=-2;for(let t=0;t<qe.length;t+=1)e[qe[t].charCodeAt(0)]=t;return e})();function Ye(e,t,n){const r=Je[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ge(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)Ye(e.charCodeAt(a),s,i);return t.join("")}function Xe(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Qe(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Xe(r,t)}}function Ze(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Ye(e.charCodeAt(s),n,r);return new Uint8Array(t)}const et=()=>"undefined"!==typeof window&&"undefined"!==typeof document,tt={tested:!1,writable:!1},nt=()=>{if(!et())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(tt.tested)return tt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tt.tested=!0,tt.writable=!0}catch(t){tt.tested=!0,tt.writable=!1}return tt.writable};const rt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},st=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},it=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},at=async(e,t)=>{await e.removeItem(t)};class ot{constructor(){this.promise=new ot.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function lt(e){const t=e.split(".");if(3!==t.length)throw new We("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Te.test(t[n]))throw new We("JWT not in base64url format");return{header:JSON.parse(Ge(t[0])),payload:JSON.parse(Ge(t[1])),signature:Ze(t[2]),raw:{header:t[0],payload:t[1]}}}function ct(e){return("0"+e.toString(16)).substr(-2)}async function dt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,ct).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await st(e,`${t}-code-verifier`,s);const i=await dt(r);return[i,r===i?"plain":"s256"]}ot.promiseConstructor=Promise;const ht=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;var ft=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const pt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gt=[502,503,504];async function mt(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Be(pt(e),0);if(gt.includes(e.status))throw new Be(pt(e),e.status);let r,s;try{r=await e.json()}catch(a){throw new Ae(pt(a),a)}const i=function(e){const t=e.headers.get(Pe);if(!t)return null;if(!t.match(ht))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(i&&i.getTime()>=Oe.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?s=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new He(pt(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new Ie}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0))throw new He(pt(r),e.status,r.weak_password.reasons);throw new Le(pt(r),e.status||500,s)}async function yt(e,t,n,r){var s;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[Pe]||(i[Pe]=Oe.name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const a=null!==(s=null===r||void 0===r?void 0:r.query)&&void 0!==s?s:{};(null===r||void 0===r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,s,i){const a=((e,t,n,r)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,i);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new Be(pt(l),0)}o.ok||await mt(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await mt(l)}}(e,t,n+o,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function vt(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function bt(e){const t=vt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function xt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wt(e){return{data:e,error:null}}function _t(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=ft(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function kt(e){return e}var St=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class jt{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=rt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:xt})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=St(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:_t,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Re(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xt})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:kt});if(c.error)throw c.error;const d=await c.json(),u=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t})),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Re(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xt})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:xt})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:xt})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await yt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}}}const Nt={getItem:e=>nt()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{nt()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{nt()&&globalThis.localStorage.removeItem(e)}};function Et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ct=!!(globalThis&&nt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Pt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ot extends Pt{}async function Tt(e,t,n){Ct&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout((()=>{r.abort(),Ct&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},(async r=>{if(!r){if(0===t)throw Ct&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ot(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ct)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ct&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Ct&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Mt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ce,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rt(e,t,n){return await n()}class Lt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lt.nextInstanceID,Lt.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Mt),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new jt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=rt(r.fetch),this.lock=r.lock||Rt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:et()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Tt:this.lock=Rt,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:nt()?this.storage=Nt:(this.memoryStorage={},this.storage=Et(this.memoryStorage)):(this.memoryStorage={},this.storage=Et(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${je}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(r){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),et()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return Re(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout((async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Re(t)?{error:t}:{error:new Ae("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:vt}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Re(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await ut(this.storage,this.storageKey)),s=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:vt})}else{if(!("phone"in e))throw new ze("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;s=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:vt})}}const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:bt})}else{if(!("phone"in e))throw new ze("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:bt})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new $e}}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await it(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:s}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:vt});if(await at(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new $e}}catch(s){if(Re(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:i}=e,a=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:vt}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new $e}}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,i;try{if("email"in e){const{email:r,options:s}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await ut(this.storage,this.storageKey));const{error:o}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new ze("You must provide either an email or phone number.")}catch(a){if(Re(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:vt});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,i=null;return"pkce"===this.flowType&&([s,i]=await ut(this.storage,this.storageKey)),await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:wt})}catch(s){if(Re(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ie;const{error:r}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:i}=await yt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:i,error:a}=await yt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:a}}throw new ze("You must provide either an email or phone number and a type")}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await it(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ee;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xt}):await this._useSession((async e=>{var t,n,r;const{data:s,error:i}=e;if(i)throw i;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:xt}):{data:{user:null},error:new Ie}}))}catch(t){if(Re(t))return function(e){return Re(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession((async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new Ie;const i=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await ut(this.storage,this.storageKey));const{data:l,error:c}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:xt});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ie;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:i}=lt(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Re(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Ie;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!et())throw new Fe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ue("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Fe("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ue("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=e;if(!s||!a||!i||!l)throw new Fe("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Ne&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const f=u-d;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:p,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:u,refresh_token:i,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Re(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await it(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Re(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}}))}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await ut(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Re(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession((async t=>{var n,r,s,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})}));if(r)throw r;return et()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Re(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)throw i;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vt})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ve(t)&&Date.now()+n-s<Ne},new Promise(((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(s){if(!r(i,s))return void t(s)}})()})))}catch(s){if(this._debug(t,"error",s),Re(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),et()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await it(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<Ee;if(this._debug(t,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ve(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ot;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Ie;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),Re(s)){const e={session:null,error:s};return Ve(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(s){r.push(s)}}));if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await st(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await at(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Ne);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const t=Date.now();try{return await this._useSession((async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Ne);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof Pt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await ut(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await yt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(t){if(Re(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Re(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),s=n.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=lt(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find((t=>t.kid===e));if(t)return t;if(t=this.jwks.keys.find((t=>t.kid===e)),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new We("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find((t=>t.kid===e)),!t)throw new We("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:i,raw:{header:a,payload:o}}=lt(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:i},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,i,function(e){const t=[];return Qe(e,(e=>t.push(e))),new Uint8Array(t)}(`${a}.${o}`)))throw new We("Invalid JWT signature");return{data:{claims:s,header:r,signature:i},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}}Lt.nextInstanceID=0;const At=Lt;class Dt extends At{constructor(e){super(e)}}var It=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};class $t{constructor(e,t,n){var r,s,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=e.replace(/\/$/,"");this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const o=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:a,auth:o,realtime:l,global:c}=t,d={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>Se(this,void 0,void 0,(function*(){return""}))};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!==n&&void 0!==n?n:{},{db:ye,realtime:be,auth:Object.assign(Object.assign({},ve),{storageKey:o}),global:me});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=ke(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(`${a}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new pe(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return It(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:s,detectSessionInUrl:i,storage:a,storageKey:o,flowType:l,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dt({url:this.authUrl,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:r,persistSession:s,detectSessionInUrl:i,storage:a,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new W(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const zt=((e,t,n)=>new $t(e,t,n))("https://nvrvldvrqxlhcebxqowk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52cnZsZHZycXhsaGNlYnhxb3drIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxNzU5MTMsImV4cCI6MjA2Mjc1MTkxM30.1UvD8sMr1qMgIp-DdxTGuWooojM-H9KV3j330Bw3eEQ")},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(p,e)||!u.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,I=Object.assign;function $(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function U(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function je(e){if(e=bs(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Oe=!1;function Te(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ce(e,t,n)}finally{Oe=!1,(null!==ke||null!==Se)&&(Pe(),Ee())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Re=!1}function Ae(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var De=!1,Ie=null,$e=!1,ze=null,Fe={onError:function(e){De=!0,Ie=e}};function Ue(e,t,n,r,s,i,a,o,l){De=!1,Ie=null,Ae.apply(Fe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Je=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Ge=s.unstable_requestPaint,Xe=s.unstable_now,Qe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ut(o):0!==(i&=a)&&(r=ut(i))}else 0!==(a=n&~s)?r=ut(a):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,St,jt,Nt=!1,Et=[],Ct=null,Pt=null,Ot=null,Tt=new Map,Mt=new Map,Rt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function It(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void jt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){$t(e)&&n.delete(t)}function Ft(){Nt=!1,null!==Ct&&$t(Ct)&&(Ct=null),null!==Pt&&$t(Pt)&&(Pt=null),null!==Ot&&$t(Ot)&&(Ot=null),Tt.forEach(zt),Mt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Pt&&Ut(Pt,e),null!==Ot&&Ut(Ot,e),Tt.forEach(t),Mt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)It(n),null===n.blockedOn&&Rt.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var s=bt,i=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=s,Vt.transition=i}}function qt(e,t,n,r){var s=bt,i=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=s,Vt.transition=i}}function Kt(e,t,n,r){if(Ht){var s=Yt(e,t,n,r);if(null===s)Hr(e,t,r,Jt,n),At(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Dt(Ct,e,t,n,r,s),!0;case"dragenter":return Pt=Dt(Pt,e,t,n,r,s),!0;case"mouseover":return Ot=Dt(Ot,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Tt.set(i,Dt(Tt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mt.set(i,Dt(Mt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(At(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Hr(e,t,r,Jt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Jt=null;function Yt(e,t,n,r){if(Jt=null,null!==(e=vs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=I({},cn,{view:0,detail:0}),hn=sn(un),fn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),gn=sn(I({},fn,{dataTransfer:0})),mn=sn(I({},un,{relatedTarget:0})),yn=sn(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function jn(){return Sn}var Nn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(Nn),Cn=sn(I({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),On=sn(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=I({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(Tn),Rn=[9,13,27,32],Ln=d&&"CompositionEvent"in window,An=null;d&&"documentMode"in document&&(An=document.documentMode);var Dn=d&&"TextEvent"in window&&!An,In=d&&(!Ln||An&&8<An&&11>=An),$n=String.fromCharCode(32),zn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Jn(e){$r(e,0)}function Yn(e){if(K(xs(e)))return e}function Gn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Qn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Xn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,we(e)),Te(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dr(n,i);var a=dr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==J(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=qr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function jr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}d&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=jr("animationend"),Er=jr("animationiteration"),Cr=jr("animationstart"),Pr=jr("transitionend"),Or=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Or.set(e,t),l(t,[e])}for(var Rr=0;Rr<Tr.length;Rr++){var Lr=Tr[Rr];Mr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Mr(Nr,"onAnimationEnd"),Mr(Er,"onAnimationIteration"),Mr(Cr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Ue.apply(this,arguments),De){if(!De)throw Error(i(198));var d=Ie;De=!1,Ie=null,$e||($e=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function $r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ir(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ir(s,o,c),i=l}}}if($e)throw e=ze,$e=!1,ze=null,e}function zr(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Gt(t)){case 1:var s=Wt;break;case 4:s=qt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Te((function(){var r=i,s=we(n),a=[];e:{var o=Or.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Nr:case Er:case Cr:l=yn;break;case Pr:l=On;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Me(p,h))&&d.push(Wr(p,g,f)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(u=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,g="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:xs(l),f=null==c?o:xs(c),(o=new d(g,p+"leave",l,n,s)).target=u,o.relatedTarget=f,g=null,vs(s)===r&&((d=new d(h,p+"enter",c,n,s)).target=f,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,p=0,f=d=l;f;f=Kr(f))p++;for(f=0,g=h;g;g=Kr(g))f++;for(;0<p-f;)d=Kr(d),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==l&&Jr(a,o,l,d,!1),null!==c&&null!==u&&Jr(a,u,c,d,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Gn;else if(Hn(o))if(Xn)m=ar;else{m=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ir);switch(m&&(m=m(e,r))?Wn(a,m,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,s);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Qt="value"in(Xt=s)?Xt.value:Xt.textContent,Bn=!0)),0<(y=qr(r,b)).length&&(b=new xn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,$n);case"textInput":return(e=t.data)===$n&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Ln&&Fn(e,t)?(e=en(),Zt=Qt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}$r(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Me(e,n))&&r.unshift(Wr(e,i,s)),null!=(i=Me(e,t))&&r.push(Wr(e,i,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Me(n,i))&&a.unshift(Wr(n,l,o)):s||null!=(l=Me(n,i))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function Qr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,fs="__reactProps$"+us,ps="__reactContainer$"+us,gs="__reactEvents$"+us,ms="__reactListeners$"+us,ys="__reactHandles$"+us;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var _s=[],ks=-1;function Ss(e){return{current:e}}function js(e){0>ks||(e.current=_s[ks],_s[ks]=null,ks--)}function Ns(e,t){ks++,_s[ks]=e.current,e.current=t}var Es={},Cs=Ss(Es),Ps=Ss(!1),Os=Es;function Ts(e,t){var n=e.type.contextTypes;if(!n)return Es;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ms(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rs(){js(Ps),js(Cs)}function Ls(e,t,n){if(Cs.current!==Es)throw Error(i(168));Ns(Cs,t),Ns(Ps,n)}function As(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,V(e)||"Unknown",s));return I({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Os=Cs.current,Ns(Cs,e),Ns(Ps,Ps.current),!0}function Is(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=As(e,t,Os),r.__reactInternalMemoizedMergedChildContext=e,js(Ps),js(Cs),Ns(Cs,e)):js(Ps),Ns(Ps,n)}var $s=null,zs=!1,Fs=!1;function Us(e){null===$s?$s=[e]:$s.push(e)}function Bs(){if(!Fs&&null!==$s){Fs=!0;var e=0,t=bt;try{var n=$s;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$s=null,zs=!1}catch(s){throw null!==$s&&($s=$s.slice(e+1)),Ke(Ze,Bs),s}finally{bt=t,Fs=!1}}return null}var Vs=[],Hs=0,Ws=null,qs=0,Ks=[],Js=0,Ys=null,Gs=1,Xs="";function Qs(e,t){Vs[Hs++]=qs,Vs[Hs++]=Ws,Ws=e,qs=t}function Zs(e,t,n){Ks[Js++]=Gs,Ks[Js++]=Xs,Ks[Js++]=Ys,Ys=e;var r=Gs;e=Xs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gs=1<<32-at(t)+s|n<<s|r,Xs=i+e}else Gs=1<<i|n<<s|r,Xs=e}function ei(e){null!==e.return&&(Qs(e,1),Zs(e,1,0))}function ti(e){for(;e===Ws;)Ws=Vs[--Hs],Vs[Hs]=null,qs=Vs[--Hs],Vs[Hs]=null;for(;e===Ys;)Ys=Ks[--Js],Ks[Js]=null,Xs=Ks[--Js],Ks[Js]=null,Gs=Ks[--Js],Ks[Js]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Gs,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!si)return di(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var gi=x.ReactCurrentBatchConfig;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ic(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&vi(i)===t.type)?((r=s(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Ac(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case _:return(t=$c(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||A(t))return(t=Ac(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?d(e,t,n,r):null;case M:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||A(n))return null!==s?null:u(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case M:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||A(r))return u(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function g(s,i,o,l){for(var c=null,d=null,u=i,g=i=0,m=null;null!==u&&g<o.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var y=f(s,u,o[g],l);if(null===y){null===u&&(u=m);break}e&&u&&null===y.alternate&&t(s,u),i=a(y,i,g),null===d?c=y:d.sibling=y,d=y,u=m}if(g===o.length)return n(s,u),si&&Qs(s,g),c;if(null===u){for(;g<o.length;g++)null!==(u=h(s,o[g],l))&&(i=a(u,i,g),null===d?c=u:d.sibling=u,d=u);return si&&Qs(s,g),c}for(u=r(s,u);g<o.length;g++)null!==(m=p(u,s,g,o[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),i=a(m,i,g),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach((function(e){return t(s,e)})),si&&Qs(s,g),c}function m(s,o,l,c){var d=A(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,g=o,m=o=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(s,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(s,g),o=a(b,o,m),null===u?d=b:u.sibling=b,u=b,g=y}if(v.done)return n(s,g),si&&Qs(s,m),d;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,m),null===u?d=v:u.sibling=v,u=v);return si&&Qs(s,m),d}for(g=r(s,g);!v.done;m++,v=l.next())null!==(v=p(g,s,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),o=a(v,o,m),null===u?d=v:u.sibling=v,u=v);return e&&g.forEach((function(e){return t(s,e)})),si&&Qs(s,m),d}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=i;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(r,d.sibling),(i=s(d,a.props.children)).return=r,r=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&vi(c)===d.type){n(r,d.sibling),(i=s(d,a.props)).ref=mi(r,d,a),i.return=r,r=i;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===k?((i=Ac(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=mi(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(d=a.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=$c(a,r.mode,l)).return=r,r=i}return o(r);case M:return e(r,i,(d=a._init)(a._payload),l)}if(te(a))return g(r,i,a,l);if(A(a))return m(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Ic(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),_i=Ss(null),ki=null,Si=null,ji=null;function Ni(){ji=Si=ki=null}function Ei(e){var t=_i.current;js(_i),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){ki=e,ji=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(ji!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===ki)throw Error(i(308));Si=e,ki.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Ti=null;function Mi(e){null===Ti?Ti=[e]:Ti.push(e)}function Ri(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Mi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ai=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Li(e,n)}return null===(s=r.interleaved)?(t.next=t,Mi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Li(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var s=e.updateQueue;Ai=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=s.baseState;for(a=0,d=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(f,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,u,h):p)||void 0===h)break e;u=I({},u,h);break e;case 2:Ai=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=f,l=u):d=d.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=u}}function Vi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},Wi=Ss(Hi),qi=Ss(Hi),Ki=Ss(Hi);function Ji(e){if(e===Hi)throw Error(i(174));return e}function Yi(e,t){switch(Ns(Ki,t),Ns(qi,e),Ns(Wi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}js(Wi),Ns(Wi,t)}function Gi(){js(Wi),js(qi),js(Ki)}function Xi(e){Ji(Ki.current);var t=Ji(Wi.current),n=le(t,e.type);t!==n&&(Ns(qi,e),Ns(Wi,n))}function Qi(e){qi.current===e&&(js(Wi),js(qi))}var Zi=Ss(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Qa:Za,e=n(r,s),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(da)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ma(){var e=0!==ua;return ua=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ia&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Dl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function ka(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Aa(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Oa(9,ja.bind(null,n,r,s,t),void 0,null),null===Pl)throw Error(i(349));0!==(30&ia)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ja(e,t,n,r){t.value=n,t.getSnapshot=r,Ea(t)&&Ca(e)}function Na(e,t,n){return n((function(){Ea(t)&&Ca(e)}))}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Li(e,1);null!==t&&nc(t,e,1,-1)}function Pa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return va().memoizedState}function Ma(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Oa(t,n,i,r))}aa.flags|=e,s.memoizedState=Oa(1|t,n,i,r)}function La(e,t){return Ma(8390656,8,e,t)}function Aa(e,t){return Ra(2048,8,e,t)}function Da(e,t){return Ra(4,2,e,t)}function Ia(e,t){return Ra(4,4,e,t)}function $a(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,$a.bind(null,t,e),n)}function Fa(){}function Ua(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Wa(){return va().memoizedState}function qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ja(e))Ya(t,n);else if(null!==(n=Ri(e,t,n,r))){nc(n,e,r,ec()),Ga(n,t,r)}}function Ka(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ja(e))Ya(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Mi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ri(e,t,s,r))&&(nc(n,e,r,s=ec()),Ga(n,t,r))}}function Ja(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:Oi,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Oi,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Oi,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,$a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Pa,useDebugValue:Fa,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Pl)throw Error(i(349));0!==(30&ia)||Sa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Na.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,ja.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Pl.identifierPrefix;if(si){var n=Xs;t=":"+t+"R"+(n=(Gs&~(1<<32-at(Gs)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Oi,useCallback:Ua,useContext:Oi,useEffect:Aa,useImperativeHandle:za,useInsertionEffect:Da,useLayoutEffect:Ia,useMemo:Ba,useReducer:xa,useRef:Ta,useState:function(){return xa(ba)},useDebugValue:Fa,useDeferredValue:function(e){return Va(va(),oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Wa,unstable_isNewReconciler:!1},eo={readContext:Oi,useCallback:Ua,useContext:Oi,useEffect:Aa,useImperativeHandle:za,useInsertionEffect:Da,useLayoutEffect:Ia,useMemo:Ba,useReducer:wa,useRef:Ta,useState:function(){return wa(ba)},useDebugValue:Fa,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:Va(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Wa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=$i(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(nc(t,e,s,r),Fi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=$i(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(nc(t,e,s,r),Fi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=$i(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=zi(e,s,r))&&(nc(t,e,r,n),Fi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Es,i=t.contextType;return"object"===typeof i&&null!==i?i=Oi(i):(s=Ms(t)?Os:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ts(e,s):Es),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Oi(i):(i=Ms(t)?Os:Cs.current,s.context=Ts(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Bi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=$i(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),uo(0,t)},n}function po(e,t,n){(n=$i(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$i(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Pi(t,s),r=ga(e,t,n,r,i,s),n=ma(),null===e||bo?(si&&n&&ei(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Rc(i,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Rl,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Rl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ns(Rl,Ml),Ml|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ns(Rl,Ml),Ml|=r;return xo(e,t,s,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,s){var i=Ms(n)?Os:Cs.current;return i=Ts(t,i),Pi(t,s),n=ga(e,t,n,r,i,s),r=ma(),null===e||bo?(si&&r&&ei(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function Eo(e,t,n,r,s){if(Ms(n)){var i=!0;Ds(t)}else i=!1;if(Pi(t,s),null===t.stateNode)Vo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Oi(c):c=Ts(t,c=Ms(n)?Os:Cs.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ai=!1;var h=t.memoizedState;a.state=h,Bi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Ps.current||Ai?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ai||so(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ii(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Oi(l):l=Ts(t,l=Ms(n)?Os:Cs.current);var f=n.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),Ai=!1,h=t.memoizedState,a.state=h,Bi(t,r,a,s);var p=t.memoizedState;o!==u||h!==p||Ps.current||Ai?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Ai||so(t,n,c,r,h,p,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,i,s)}function Co(e,t,n,r,s,i){jo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Is(t,n,!1),Ho(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=r.state,s&&Is(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Yi(e,t.containerInfo)}function Oo(e,t,n,r,s){return fi(),pi(s),t.flags|=256,xo(e,t,n,r),t.child}var To,Mo,Ro,Lo,Ao={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ns(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,s,0,null),e=Ac(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Ao,e):$o(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Dc({mode:"visible",children:r.children},s,0,null),(a=Ac(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ao,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Pl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Li(e,s),nc(r,e,s,-1))}return gc(),zo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ks[Js++]=Gs,Ks[Js++]=Xs,Ks[Js++]=Ys,Gs=e.id,Xs=e.overflow,Ys=t),t=$o(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rc(r,o):(o=Ac(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ao,s}return e=(o=e.child).sibling,s=Rc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function $o(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&pi(r),xi(t,e.child,null,n),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function Uo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,n,t);else if(19===e.tag)Fo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Uo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Uo(t,!0,n,null,i);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ms(t.type)&&Rs(),qo(t),null;case 3:return r=t.stateNode,Gi(),js(Ps),js(Cs),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Mo(e,t),qo(t),null;case 5:Qi(t);var s=Ji(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qo(t),null}if(e=Ji(Wi.current),ui(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Ar.length;s++)zr(Ar[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":G(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":se(r,a),zr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ar.length;s++)zr(Ar[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":G(e,r),s=Y(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=I({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?me(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zr("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Ji(Ki.current),Ji(Wi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return qo(t),null;case 13:if(js(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Gi(),Mo(e,t),null===e&&Br(t.stateNode.containerInfo),qo(t),null;case 10:return Ei(t.type._context),qo(t),null;case 19:if(js(Zi),null===(a=t.memoizedState))return qo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ns(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return qo(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zi.current,Ns(Zi,r?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Jo(e,t){switch(ti(t),t.tag){case 1:return Ms(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gi(),js(Ps),js(Cs),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qi(t),null;case 13:if(js(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return js(Zi),null;case 4:return Gi(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},Ro=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ji(Wi.current);var i,a=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),a=[];break;case"select":s=I({},s,{value:void 0}),r=I({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ve(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Go=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[gs],delete t[ms],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Go||Zo(n,t);case 6:var r=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=s;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Go&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,hl(e,t,n),Go=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));fl(a,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){Sc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Sc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),be(l,o);var d=be(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?me(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):b(s,u,h,d)}switch(l){case"input":Q(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Ul=Xe())),4&r&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(d=Go)||u,gl(t,e),Go=d):gl(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(p=(f=Qo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Qo=p):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Qo;){var s=Qo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Yo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Go;o=Yo;var c=Go;if(Yo=a,(Go=l)&&!c)for(Qo=s;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Qo=l):_l(s);for(;null!==i;)Qo=i,bl(i,t,n),i=i.sibling;Qo=s,Yo=o,Go=c}xl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Qo=i):xl(e)}}function xl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Go||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Sc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){Sc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var kl,Sl=Math.ceil,jl=x.ReactCurrentDispatcher,Nl=x.ReactCurrentOwner,El=x.ReactCurrentBatchConfig,Cl=0,Pl=null,Ol=null,Tl=0,Ml=0,Rl=Ss(0),Ll=0,Al=null,Dl=0,Il=0,$l=0,zl=null,Fl=null,Ul=0,Bl=1/0,Vl=null,Hl=!1,Wl=null,ql=null,Kl=!1,Jl=null,Yl=0,Gl=0,Xl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Ql?Ql:Ql=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Tl?Tl&-Tl:null!==gi.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(i(185));yt(e,n,r),0!==(2&Cl)&&e===Pl||(e===Pl&&(0===(2&Cl)&&(Il|=n),4===Ll&&oc(e,Tl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Bl=Xe()+500,zs&&Bs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Pl?Tl:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){zs=!0,Us(e)}(lc.bind(null,e)):Us(lc.bind(null,e)),as((function(){0===(6&Cl)&&Bs()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Ql=-1,Zl=0,0!==(6&Cl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var s=Cl;Cl|=2;var a=pc();for(Pl===e&&Tl===t||(Vl=null,Bl=Xe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ni(),jl.current=a,Cl=s,null!==Ol?t=0:(Pl=null,Tl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Al,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Al,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Fl,Vl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Fl,Vl),t);break}wc(e,Fl,Vl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Fl,Vl),r);break}wc(e,Fl,Vl);break;default:throw Error(i(329))}}}return rc(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Fl,Fl=n,null!==t&&ac(t)),e}function ac(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~$l,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Al,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Vl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Bl=Xe()+500,zs&&Bs())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&Cl)&&_c();var t=Cl;Cl|=1;var n=El.transition,r=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=r,El.transition=n,0===(6&(Cl=t))&&Bs()}}function uc(){Ml=Rl.current,js(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Rs();break;case 3:Gi(),js(Ps),js(Cs),na();break;case 5:Qi(r);break;case 4:Gi();break;case 13:case 19:js(Zi);break;case 10:Ei(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Ol=e=Rc(e.current,null),Tl=Ml=t,Ll=0,Al=null,$l=Il=Dl=0,Fl=zl=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ti=null}return e}function fc(e,t){for(;;){var n=Ol;try{if(Ni(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,da=!1,ua=0,Nl.current=null,null===n||null===n.return){Ll=1,Al=t,Ol=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&go(a,d,t),c=d;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(a,d,t),gc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ui(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ui(a,po(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function pc(){var e=jl.current;return jl.current=Xa,null===e?Xa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Dl)&&0===(268435455&Il)||oc(Pl,Tl)}function mc(e,t){var n=Cl;Cl|=2;var r=pc();for(Pl===e&&Tl===t||(Vl=null,hc(e,t));;)try{yc();break}catch(s){fc(e,s)}if(Ni(),Cl=n,jl.current=r,null!==Ol)throw Error(i(261));return Pl=null,Tl=0,Ll}function yc(){for(;null!==Ol;)bc(Ol)}function vc(){for(;null!==Ol&&!Ye();)bc(Ol)}function bc(e){var t=kl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?xc(e):Ol=t,Nl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Ml)))return void(Ol=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Ll=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var r=bt,s=El.transition;try{El.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Jl);if(0!==(6&Cl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Pl&&(Ol=Pl=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=El.transition,El.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,Nl.current=null,function(e,t){if(es=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===s&&(l=o),f===a&&++u===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ts),Ht=!!es,ts=es=null,e.current=n,vl(n,e,s),Ge(),Cl=l,bt=o,El.transition=a}else e.current=n;if(Kl&&(Kl=!1,Jl=e,Yl=s),a=e.pendingLanes,0===a&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,Bs()}(e,t,n,r)}finally{El.transition=s,bt=r}return null}function _c(){if(null!==Jl){var e=xt(Yl),t=El.transition,n=bt;try{if(El.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Yl=0,0!==(6&Cl))throw Error(i(331));var s=Cl;for(Cl|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var f=(u=Qo).sibling,p=u.return;if(il(u),u===d){Qo=null;break}if(null!==f){f.return=p,Qo=f;break}Qo=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qo=v;break e}Qo=a.return}}var b=e.current;for(Qo=b;null!==Qo;){var x=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Qo=x;else e:for(o=b;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(Cl=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(_){}r=!0}return r}finally{bt=n,El.transition=t}}return!1}function kc(e,t,n){e=zi(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=zi(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Tl&n)===n&&(4===Ll||3===Ll&&(130023424&Tl)===Tl&&500>Xe()-Ul?hc(e,0):$l|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Li(e,t))&&(yt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nc(e,n)}function Pc(e,t){return Ke(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Oc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Ac(n.children,s,a,t);case S:o=8,s|=8;break;case j:return(e=Tc(12,n,t,2|s)).elementType=j,e.lanes=a,e;case P:return(e=Tc(13,n,t,s)).elementType=P,e.lanes=a,e;case O:return(e=Tc(19,n,t,s)).elementType=O,e.lanes=a,e;case R:return Dc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case E:o=9;break e;case C:o=11;break e;case T:o=14;break e;case M:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Ac(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,s,i,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Tc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Uc(e){if(!e)return Es;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ms(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ms(n))return As(e,n,t)}return t}function Bc(e,t,n,r,s,i,a,o,l){return(e=Fc(n,r,!0,e,0,i,0,o,l)).context=Uc(null),n=e.current,(i=$i(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Vc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$i(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(s,t,a))&&(nc(e,s,a,i),Fi(e,s,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ps.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),fi();break;case 5:Xi(t);break;case 1:Ms(t.type)&&Ds(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(_i,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(Ns(Zi,1&Zi.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ns(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var s=Ts(t,Cs.current);Pi(t,n),s=ga(null,t,r,e,s,n);var a=ma();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ms(r)?(a=!0,Ds(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Di(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(r),e=to(r,e),s){case 0:t=No(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Eo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Po(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Ii(e,t),Bi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Oo(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Oo(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Ho(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),jo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Io(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ns(_i,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Ps.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=$i(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ci(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ci(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Pi(t,n),r=r(s=Oi(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),_o(e,t,r,s=to(r.type,s),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Vo(e,t),t.tag=1,Ms(r)?(e=!0,Ds(t)):e=!1,Pi(t,n),io(t,r,s),oo(t,r,s,n),Co(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Hc(a);o.call(e)}}Vc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[ps]=a.current,Br(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[ps]=l.current,Br(8===e.nodeType?e.parentNode:e),dc((function(){Vc(t,l,n,r)})),l}(n,t,e,s,r);return Hc(a)}Yc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vc(e,t,null,null)},Yc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Vc(null,e,null,null)})),t[ps]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(Bl=Xe()+500,Bs()))}break;case 13:dc((function(){var t=Li(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},_t=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Li(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},St=function(){return bt},jt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));K(r),Q(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[bs,xs,ws,Ne,Ee,cc]},td={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),it=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(i(299));var n=!1,r="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Br(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ps]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(374));class i extends s.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=i},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`}},829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:s}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let i=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new s.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},844:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const s=r(n(210));t.PostgrestClient=s.default;const i=r(n(829));t.PostgrestQueryBuilder=i.default;const a=r(n(736));t.PostgrestFilterBuilder=a.default;const o=r(n(374));t.PostgrestTransformBuilder=o.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:s.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{38:"1bc9fb44",198:"f3b11633"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ai-coach-therapist-client:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise(((n,r)=>s=e[t]=[n,r]));r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkai_coach_therapist_client=self.webpackChunkai_coach_therapist_client||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(43),r=n.t(t,2),s=n(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(t,n,r,s){void 0===s&&(s={});let{window:l=document.defaultView,v5Compat:h=!1}=s,f=l.history,p=e.Pop,g=null,m=y();function y(){return(f.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-m;m=t,g&&g({action:p,location:x.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,f.replaceState(i({},f.state,{idx:m}),""));let x={get action(){return p},get location(){return t(l,f)},listen(e){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(a,v),g=e,()=>{l.removeEventListener(a,v),g=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let s=d(x.location,t,n);r&&r(s,t),m=y()+1;let i=c(s,m),a=x.createHref(s);try{f.pushState(i,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}h&&g&&g({action:p,location:x.location,delta:1})},replace:function(t,n){p=e.Replace;let s=d(x.location,t,n);r&&r(s,t),m=y();let i=c(s,m),a=x.createHref(s);f.replaceState(i,"",a),h&&g&&g({action:p,location:x.location,delta:0})},go:e=>f.go(e)};return x}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),m(e,t,n,!1)}function m(e,t,n,r){let s=O(("string"===typeof t?h(t):t).pathname||"/",n);if(null==s)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=P(s);a=E(i[o],e,r)}return a}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=A([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:N(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))s(e,t,r);else s(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=v(r.join("/")),o=[];return o.push(...a.map((e=>""===e?i:[i,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,x=3,w=2,_=1,k=10,S=-2,j=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=S),t&&(r+=w),n.filter((e=>!j(e))).reduce(((e,t)=>e+(b.test(t)?x:""===t?_:k)),r)}function E(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:A([i,d.pathname]),pathnameBase:D(A([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=A([i,d.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1),c=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:i,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function T(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=h(e):(s=i({},e),o(!s.pathname||!s.pathname.includes("?"),T("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),T("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),T("#","search","hash",s)));let a,l=""===e||""===s.pathname,c=l?"/":s.pathname;if(null==c)a=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?h(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:I(r),hash:$(s)}}(s,a),u=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!f||(d.pathname+="/"),d}const A=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const F=["post","put","patch","delete"],U=(new Set(F),["get",...F]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const V=t.createContext(null);const H=t.createContext(null);const W=t.createContext(null);const q=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const J=t.createContext(null);function Y(){return null!=t.useContext(q)}function G(){return Y()||o(!1),t.useContext(q).location}function X(e){t.useContext(W).static||t.useLayoutEffect(e)}function Q(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=ce(oe.UseNavigateStable),n=ue(le.UseNavigateStable),r=t.useRef(!1);X((()=>{r.current=!0}));let s=t.useCallback((function(t,s){void 0===s&&(s={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,B({fromRouteId:n},s)))}),[e,n]);return s}():function(){Y()||o(!1);let e=t.useContext(V),{basename:n,future:r,navigator:s}=t.useContext(W),{matches:i}=t.useContext(K),{pathname:a}=G(),l=JSON.stringify(R(i,r.v7_relativeSplatPath)),c=t.useRef(!1);X((()=>{c.current=!0}));let d=t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void s.go(t);let i=L(t,JSON.parse(l),a,"path"===r.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:A([n,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)}),[n,s,l,a,e]);return d}()}const Z=t.createContext(null);function ee(e,n){let{relative:r}=void 0===n?{}:n,{future:s}=t.useContext(W),{matches:i}=t.useContext(K),{pathname:a}=G(),o=JSON.stringify(R(i,s.v7_relativeSplatPath));return t.useMemo((()=>L(e,JSON.parse(o),a,"path"===r)),[e,o,a,r])}function te(n,r,s,i){Y()||o(!1);let{navigator:a,static:l}=t.useContext(W),{matches:c}=t.useContext(K),d=c[c.length-1],u=d?d.params:{},f=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let p,m=G();if(r){var y;let e="string"===typeof r?h(r):r;"/"===f||(null==(y=e.pathname)?void 0:y.startsWith(f))||o(!1),p=e}else p=m;let v=p.pathname||"/",b=v;if("/"!==f){let e=f.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=!l&&s&&s.matches&&s.matches.length>0?s.matches:g(n,{pathname:b});let w=ae(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:A([f,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?f:A([f,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,s,i);return r&&w?t.createElement(q.Provider,{value:{location:B({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:e.Pop}},w):w}function ne(){let e=function(){var e;let n=t.useContext(J),r=de(le.UseRouteError),s=ue(le.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[s]}(),n=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,null)}const re=t.createElement(ne,null);class se extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:n,match:r,children:s}=e,i=t.useContext(V);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(K.Provider,{value:n},s)}function ae(e,n,r,s){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=s)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(i=r)?void 0:i.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight(((e,s,i)=>{let a,o=!1,h=null,f=null;var p;r&&(a=c&&s.route.id?c[s.route.id]:void 0,h=s.route.errorElement||re,d&&(u<0&&0===i?(p="route-fallback",!1||he[p]||(he[p]=!0),o=!0,f=null):u===i&&(o=!0,f=s.route.hydrateFallbackElement||null)));let g=n.concat(l.slice(0,i+1)),m=()=>{let n;return n=a?h:o?f:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(ie,{match:s,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?t.createElement(se,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let n=t.useContext(V);return n||o(!1),n}function de(e){let n=t.useContext(H);return n||o(!1),n}function ue(e){let n=function(){let e=t.useContext(K);return e||o(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||o(!1),r.route.id}const he={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function pe(e){let{to:n,replace:r,state:s,relative:i}=e;Y()||o(!1);let{future:a,static:l}=t.useContext(W),{matches:c}=t.useContext(K),{pathname:d}=G(),u=Q(),h=L(n,R(c,a.v7_relativeSplatPath),d,"path"===i),f=JSON.stringify(h);return t.useEffect((()=>u(JSON.parse(f),{replace:r,state:s,relative:i})),[u,f,i,r,s]),null}function ge(e){return function(e){let n=t.useContext(K).outlet;return n?t.createElement(Z.Provider,{value:e},n):n}(e.context)}function me(e){o(!1)}function ye(n){let{basename:r="/",children:s=null,location:i,navigationType:a=e.Pop,navigator:l,static:c=!1,future:d}=n;Y()&&o(!1);let u=r.replace(/^\/*/,"/"),f=t.useMemo((()=>({basename:u,navigator:l,static:c,future:B({v7_relativeSplatPath:!1},d)})),[u,d,l,c]);"string"===typeof i&&(i=h(i));let{pathname:p="/",search:g="",hash:m="",state:y=null,key:v="default"}=i,b=t.useMemo((()=>{let e=O(p,u);return null==e?null:{location:{pathname:e,search:g,hash:m,state:y,key:v},navigationType:a}}),[u,p,g,m,y,v,a]);return null==b?null:t.createElement(W.Provider,{value:f},t.createElement(q.Provider,{children:s,value:b}))}function ve(e){let{children:t,location:n}=e;return te(be(t),n)}new Promise((()=>{}));t.Component;function be(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,s)=>{if(!t.isValidElement(e))return;let i=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,be(e.props.children,i));e.type!==me&&o(!1),e.props.index&&e.props.children&&o(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,i)),r.push(a)})),r}var xe=n(727);const we={signUp:async(e,t)=>await xe.N.auth.signUp({email:e,password:t}),signIn:async(e,t)=>await xe.N.auth.signInWithPassword({email:e,password:t}),signOut:async()=>await xe.N.auth.signOut(),getSession:async()=>await xe.N.auth.getSession(),getCurrentUser:async()=>{const{data:e}=await xe.N.auth.getUser();return(null===e||void 0===e?void 0:e.user)||null},resetPassword:async e=>await xe.N.auth.resetPasswordForEmail(e),updatePassword:async e=>await xe.N.auth.updateUser({password:e}),onAuthStateChange:e=>xe.N.auth.onAuthStateChange(e)},_e=we,ke=async()=>{try{const{error:e}=await xe.N.auth.getSession();return!e||(console.error("Supabase health check failed:",e.message),!1)}catch(e){return console.error("Unexpected error during health check:",e.message),!1}};xe.N;var Se=n(579);const je=(0,t.createContext)(),Ne=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("smarttherapist_mock_user");if(t)try{const e=JSON.parse(t);return console.log("\ud83d\udd27 Development mode: Using mock user from custom key",e),s(e),void a(!1)}catch(e){console.error("Error parsing mock user from custom key:",e),localStorage.removeItem("smarttherapist_mock_user")}const n=localStorage.getItem("sb-nvrvldvrqxlhcebxqowk-auth-token");if(n)try{const e=JSON.parse(n);if(e.currentSession&&e.currentSession.user){const t=e.currentSession.user;return console.log("\ud83d\udd27 Development mode: Using mock user from Supabase key",t),localStorage.setItem("smarttherapist_mock_user",JSON.stringify(t)),s(t),void a(!1)}}catch(e){console.error("Error parsing Supabase auth token:",e)}const{data:{session:r},error:i}=await xe.N.auth.getSession();if(i)return console.error("Error checking session:",i.message),void a(!1);if(!r)return s(null),void a(!1);const{data:o,error:l}=await xe.N.from("users").select("*").eq("id",r.user.id).single();l&&console.error("Error fetching user profile:",l.message);const c={...r.user,...o};s(c)}catch(o){console.error("Error in auth context:",o.message),l(o.message),s(null)}finally{a(!1)}})();const{data:e}=xe.N.auth.onAuthStateChange((async(e,t)=>{if("SIGNED_IN"===e){const{data:e,error:n}=await xe.N.from("users").select("*").eq("id",t.user.id).single(),r={...t.user,...e};s(r)}else"SIGNED_OUT"===e&&s(null)}));return()=>{e&&e.subscription.unsubscribe()}}),[]);return(0,Se.jsx)(je.Provider,{value:{user:r,loading:i,error:o,signIn:async(e,t)=>{try{a(!0);const{data:n,error:r}=await xe.N.auth.signInWithPassword({email:e,password:t});if(r)throw r;return n}catch(o){throw l(o.message),o}finally{a(!1)}},signUp:async(e,t,n)=>{try{a(!0);const{data:r,error:s}=await xe.N.auth.signUp({email:e,password:t});if(s)throw s;if(r.user){const{error:t}=await xe.N.from("users").insert([{id:r.user.id,email:e,role:n.role||"client",created_at:new Date}]);if(t)throw t;if("client"===n.role||!n.role){const{error:e}=await xe.N.from("clients").insert([{user_id:r.user.id,profile_data:n.profile_data||{}}]);if(e)throw e}if("therapist"===n.role){const{error:e}=await xe.N.from("therapists").insert([{user_id:r.user.id,credentials:n.credentials||{},availability:n.availability||{}}]);if(e)throw e}}return r}catch(o){throw l(o.message),o}finally{a(!1)}},signOut:async()=>{try{if(a(!0),localStorage.getItem("smarttherapist_mock_user"))localStorage.removeItem("smarttherapist_mock_user"),s(null),console.log("Mock user signed out");else{const{error:e}=await xe.N.auth.signOut();if(e)throw e;s(null)}}catch(o){throw l(o.message),o}finally{a(!1)}},resetPassword:async e=>{try{a(!0);const{error:t}=await xe.N.auth.resetPasswordForEmail(e);if(t)throw t}catch(o){throw l(o.message),o}finally{a(!1)}},updatePassword:async e=>{try{a(!0);const{error:t}=await xe.N.auth.updateUser({password:e});if(t)throw t}catch(o){throw l(o.message),o}finally{a(!1)}}},children:n})},Ee=()=>{const e=(0,t.useContext)(je);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Ce={getClients:async()=>{try{const{data:e,error:t}=await xe.N.from("clients").select("\n          *,\n          users:user_id (\n            profile_data\n          ),\n          client_behaviors (\n            id,\n            behavior_id\n          )\n        ");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching clients:",e),[]}},getClientById:async e=>{try{const{data:t,error:n}=await xe.N.from("clients").select("\n          *,\n          users:user_id (\n            profile_data\n          ),\n          client_behaviors (\n            id,\n            behavior_id,\n            behaviors (*)\n          )\n        ").eq("id",e).single();if(n)throw n;return t}catch(t){return console.error(`Error fetching client ${e}:`,t),null}},getClientsByTherapistId:async e=>{try{const{data:t,error:n}=await xe.N.from("clients").select("\n          *,\n          users:user_id (\n            profile_data\n          ),\n          client_behaviors (\n            id,\n            behavior_id\n          )\n        ").eq("therapist_id",e);if(n)throw n;return t||[]}catch(t){return console.error(`Error fetching clients for therapist ${e}:`,t),[]}}},Pe={getBehaviors:async()=>{try{const{data:e,error:t}=await xe.N.from("behaviors").select("*");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching behaviors:",e),[]}},getBehaviorById:async e=>{try{const{data:t,error:n}=await xe.N.from("behaviors").select("*").eq("id",e).single();if(n)throw n;return t}catch(t){return console.error(`Error fetching behavior ${e}:`,t),null}},getBehaviorsByClientId:async e=>{try{const{data:t,error:n}=await xe.N.from("client_behaviors").select("\n          behavior_id,\n          behaviors (*)\n        ").eq("client_id",e);if(n)throw n;return t?t.map((e=>e.behaviors)):[]}catch(t){return console.error(`Error fetching behaviors for client ${e}:`,t),[]}}},Oe={getSessions:async()=>{try{const{data:e,error:t}=await xe.N.from("sessions").select("\n          *,\n          clients (\n            id,\n            users (\n              profile_data\n            )\n          )\n        ");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching sessions:",e),[]}},getUpcomingSessions:async()=>{const e=(new Date).toISOString();try{const{data:t,error:n}=await xe.N.from("sessions").select("\n          *,\n          clients (\n            id,\n            users (\n              profile_data\n            )\n          )\n        ").gte("start_time",e).order("start_time",{ascending:!0});if(n)throw n;return t||[]}catch(t){return console.error("Error fetching upcoming sessions:",t),[]}},getSessionsByClientId:async e=>{try{const{data:t,error:n}=await xe.N.from("sessions").select("*").eq("client_id",e).order("start_time",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error(`Error fetching sessions for client ${e}:`,t),[]}}},Te={getSummaries:async()=>{try{const{data:e,error:t}=await xe.N.from("summaries").select("\n          *,\n          conversations (\n            client_id,\n            clients (\n              users (\n                profile_data\n              )\n            )\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){return console.error("Error fetching summaries:",e),[]}},getRecentSummaries:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{const{data:t,error:n}=await xe.N.from("summaries").select("\n          *,\n          conversations (\n            client_id,\n            clients (\n              users (\n                profile_data\n              )\n            )\n          )\n        ").order("created_at",{ascending:!1}).limit(e);if(n)throw n;return t||[]}catch(t){return console.error("Error fetching recent summaries:",t),[]}},getSummariesByClientId:async e=>{try{const{data:t,error:n}=await xe.N.from("summaries").select("\n          *,\n          conversations!inner (\n            client_id\n          )\n        ").eq("conversations.client_id",e).order("created_at",{ascending:!1});if(n)throw n;return t||[]}catch(t){return console.error(`Error fetching summaries for client ${e}:`,t),[]}}},Me={getSystemStats:async()=>{try{const{data:e,error:t}=await xe.N.from("users").select("role");if(t)throw t;const n={total:e.length,clients:e.filter((e=>"client"===e.role)).length,therapists:e.filter((e=>"therapist"===e.role)).length,admins:e.filter((e=>"admin"===e.role)).length},{count:r,error:s}=await xe.N.from("behaviors").select("id",{count:"exact",head:!0});if(s)throw s;const{count:i,error:a}=await xe.N.from("conversations").select("id",{count:"exact",head:!0});if(a)throw a;const{count:o,error:l}=await xe.N.from("messages").select("id",{count:"exact",head:!0});if(l)throw l;return{users:n,behaviors:r,conversations:i,messages:o}}catch(e){return console.error("Error fetching system stats:",e),{users:{total:0,clients:0,therapists:0,admins:0},behaviors:0,conversations:0,messages:0}}}},Re=!1,Le=async()=>{Re},Ae={getClients:async()=>{try{return await Ce.getClients()}catch(e){return console.error("Error fetching clients:",e),[]}},getBehaviors:async()=>{try{return await Pe.getBehaviors()}catch(e){return console.error("Error fetching behaviors:",e),[]}},getSessions:async()=>{try{return await Oe.getSessions()}catch(e){return console.error("Error fetching sessions:",e),[]}},getUpcomingSessions:async()=>{try{return await Oe.getUpcomingSessions()}catch(e){return console.error("Error fetching upcoming sessions:",e),[]}},getSummaries:async()=>{try{return await Te.getSummaries()}catch(e){return console.error("Error fetching summaries:",e),[]}},getRecentSummaries:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{return await Te.getRecentSummaries(e)}catch(t){return console.error("Error fetching recent summaries:",t),[]}},getStats:async()=>{try{return await Me.getSystemStats()}catch(e){return console.error("Error fetching system stats:",e),{users:{total:0,clients:0,therapists:0,admins:0},behaviors:0,conversations:0,messages:0}}}},De={client:{email:"client@example.com",password:"password123",role:"client",name:"Client User"},therapist:{email:"therapist@example.com",password:"password123",role:"therapist",name:"Therapist User"},admin:{email:"admin@example.com",password:"password123",role:"admin",name:"Admin User"}},Ie=e=>{try{if(!De[e])throw new Error(`Invalid user type: ${e}`);const t=De[e];switch(localStorage.setItem("smarttherapist_mock_user",JSON.stringify({id:`${e}-1`,email:t.email,role:t.role,name:t.name||`${e.charAt(0).toUpperCase()+e.slice(1)} User`,profile_data:{name:t.name||`${e.charAt(0).toUpperCase()+e.slice(1)} User`}})),console.log(`Mock login successful as ${e}`),e){case"client":window.location.href="/client/dashboard";break;case"therapist":window.location.href="/therapist/dashboard";break;case"admin":window.location.href="/admin/dashboard";break;default:window.location.href="/"}return!0}catch(t){return console.error(`Error with mock login as ${e}:`,t),!1}},$e=e=>Ie(e);"undefined"!==typeof window&&(window.loginAs=$e);const ze=e=>"string"===typeof e,Fe=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n},Ue=e=>null==e?"":""+e,Be=/###/g,Ve=e=>e&&e.indexOf("###")>-1?e.replace(Be,"."):e,He=e=>!e||ze(e),We=(e,t,n)=>{const r=ze(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(He(e))return{};const t=Ve(r[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return He(e)?{}:{obj:e,k:Ve(r[s])}},qe=(e,t,n)=>{const{obj:r,k:s}=We(e,t,Object);if(void 0!==r||1===t.length)return void(r[s]=n);let i=t[t.length-1],a=t.slice(0,t.length-1),o=We(e,a,Object);for(;void 0===o.obj&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=We(e,a,Object),o?.obj&&"undefined"!==typeof o.obj[`${o.k}.${i}`]&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},Ke=(e,t)=>{const{obj:n,k:r}=We(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Je=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?ze(e[r])||e[r]instanceof String||ze(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Je(e[r],t[r],n):e[r]=t[r]);return e},Ye=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xe=e=>ze(e)?e.replace(/[&<>"'\/]/g,(e=>Ge[e])):e;const Qe=[" ",",","?","!",";"],Ze=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),et=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(n);let s=e;for(let i=0;i<r.length;){if(!s||"object"!==typeof s)return;let e,t="";for(let a=i;a<r.length;++a)if(a!==i&&(t+=n),t+=r[a],e=s[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<r.length-1)continue;i+=a-i+1;break}s=e}return s},tt=e=>e?.replace("_","-"),nt={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class rt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||nt,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(ze(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new rt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new rt(this.logger,e)}}var st=new rt;class it{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let s=0;s<r;s++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[r,s]=t;for(let i=0;i<s;i++)r.apply(r,[e,...n])}))}}}class at extends it{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):ze(n)&&s?a.push(...n.split(s)):a.push(n)));const o=Ke(this.data,a);return!o&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),!o&&i&&ze(n)?et(this.data?.[e]?.[t],n,s):o}addResource(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),qe(this.data,a,r),s.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const s in n)(ze(n[s])||Array.isArray(n[s]))&&this.addResource(e,t,s,n[s],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let o=Ke(this.data,a)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Je(o,n,s):o={...o,...n},qe(this.data,a,o),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var ot={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach((e=>{t=this.processors[e]?.process(t,n,r,s)??t})),t}};const lt={},ct=e=>!ze(e)&&"boolean"!==typeof e&&"number"!==typeof e;class dt extends it{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=st.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){const t={...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}};if(null==e)return!1;const n=this.resolve(e,t);return void 0!==n?.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=Qe.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const s=Ze.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let i=!s.test(e);if(!i){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(i=!0)}return i})(e,n,r);if(i&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:ze(s)?[s]:s};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(s=i.shift()),e=i.join(r)}return{key:e,namespaces:ze(s)?[s]:s}}translate(e,t,n){let r="object"===typeof t?{...t}:t;if("object"!==typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof options&&(r={...r}),r||(r={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const s=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],r),l=o[o.length-1],c=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===c?.toLowerCase()){if(d){const e=r.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${e}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${e}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:a}const u=this.resolve(e,r);let h=u?.res;const f=u?.usedKey||a,p=u?.exactUsedKey||a,g=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==r.count&&!ze(r.count),v=dt.hasDefaultValue(r),b=y?this.pluralResolver.getSuffix(c,r.count,r):"",x=r.ordinal&&y?this.pluralResolver.getSuffix(c,r.count,{ordinal:!1}):"",w=y&&!r.ordinal&&0===r.count,_=w&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${b}`]||r[`defaultValue${x}`]||r.defaultValue;let k=h;m&&!h&&v&&(k=_);const S=ct(k),j=Object.prototype.toString.apply(k);if(!(m&&k&&S&&["[object Number]","[object Function]","[object RegExp]"].indexOf(j)<0)||ze(g)&&Array.isArray(k))if(m&&ze(g)&&Array.isArray(h))h=h.join(g),h&&(h=this.extendTranslation(h,e,r,n));else{let t=!1,s=!1;!this.isValidLookup(h)&&v&&(t=!0,h=_),this.isValidLookup(h)||(s=!0,h=a);const o=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:h,d=v&&_!==h&&this.options.updateMissing;if(s||t||d){if(this.logger.log(d?"updateKey":"missingKey",c,l,a,d?_:h),i){const e=this.resolve(a,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{const s=v&&n!==h?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,s,d,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,s,d,r),this.emit("missingKey",e,l,t,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,r);w&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{n([e],a+t,r[`defaultValue${t}`]||_)}))})):n(e,a,_))}h=this.extendTranslation(h,e,r,u,n),s&&h===a&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${a}`),(s||t)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,t?h:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,k,{...r,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(u.res=e,u.usedParams=this.getUsedParamsDetails(r),u):e}if(i){const e=Array.isArray(k),t=e?[]:{},n=e?p:f;for(const s in k)if(Object.prototype.hasOwnProperty.call(k,s)){const e=`${n}${i}${s}`;t[s]=v&&!h?this.translate(e,{...r,defaultValue:ct(_)?_[s]:void 0,joinArrays:!1,ns:o}):this.translate(e,{...r,joinArrays:!1,ns:o}),t[s]===e&&(t[s]=k[s])}h=t}}return s?(u.res=h,u.usedParams=this.getUsedParamsDetails(r),u):h}extendTranslation(e,t,n,r,s){var i=this;if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const a=ze(e)&&(void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(a){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let l=n.replace&&!ze(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return s?.[0]!==r[0]||n.context?i.translate(...r,t):(i.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null)}),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,o=ze(a)?[a]:a;return null!=e&&o?.length&&!1!==n.applyPostProcessor&&(e=ot.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,r,s,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,a),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==a.count&&!ze(a.count),u=d&&!a.ordinal&&0===a.count,h=void 0!==a.context&&(ze(a.context)||"number"===typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(i=e,lt[`${f[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(i)||(lt[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${f.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((n=>{if(this.isValidLookup(t))return;s=n;const i=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(i,l,n,e,a);else{let e;d&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(i.push(l+e),a.ordinal&&0===e.indexOf(r)&&i.push(l+e.replace(r,this.options.pluralSeparator)),u&&i.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${a.context}`;i.push(n),d&&(i.push(n+e),a.ordinal&&0===e.indexOf(r)&&i.push(n+e.replace(r,this.options.pluralSeparator)),u&&i.push(n+t))}}let o;for(;o=i.pop();)this.isValidLookup(t)||(r=o,t=this.getResource(n,e,o,a))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:s,usedNS:i}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!ze(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class ut{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=st.create("languageUtils")}getScriptPartFromCode(e){if(!(e=tt(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=tt(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ze(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch(t){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find((e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),ze(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],s=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return ze(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):ze(e)&&s(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&s(this.formatLanguageCode(e))})),r}}const ht={zero:0,one:1,two:2,few:3,many:4,other:5},ft={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class pt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=st.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=tt("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(n,{type:r})}catch(a){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ft;if(!e.match(/-|_/))return ft;const n=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(n,t)}return this.pluralRulesCache[s]=i,i}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort(((e,t)=>ht[e]-ht[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const gt=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,n)=>{const r=Ke(e,n);return void 0!==r?r:Ke(t,n)})(e,t,n);return!i&&s&&ze(n)&&(i=et(e,n,r),void 0===i&&(i=et(t,n,r))),i},mt=e=>e.replace(/\$/g,"$$$$");class yt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=st.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:i,suffix:a,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:f,nestingSuffixEscaped:p,nestingOptionsSeparator:g,maxReplaces:m,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:Xe,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=s?Ye(s):i||"{{",this.suffix=a?Ye(a):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?Ye(u):h||Ye("$t("),this.nestingSuffix=f?Ye(f):p||Ye(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let s,i,a;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const s=gt(t,o,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,{...r,...t,interpolationkey:e}):s}const s=e.split(this.formatSeparator),i=s.shift().trim(),a=s.join(this.formatSeparator).trim();return this.format(gt(t,o,i,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...r,...t,interpolationkey:i})};this.resetRegExp();const c=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=void 0!==r?.interpolation?.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>mt(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?mt(this.escape(e)):mt(e)}].forEach((t=>{for(a=0;s=t.regex.exec(e);){const n=s[1].trim();if(i=l(n),void 0===i)if("function"===typeof c){const t=c(e,s,r);i=ze(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))i="";else{if(d){i=s[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),i=""}else ze(i)||this.useRawValueToEscape||(i=Ue(i));const o=t.safeValue(i);if(e=e.replace(s[0],o),d?(t.regex.lastIndex+=i.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}})),e}nest(e,t){let n,r,s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,s);const a=i.match(/'/g),o=i.match(/"/g);((a?.length??0)%2===0&&!o||o.length%2!==0)&&(i=i.replace(/'/g,'"'));try{s=JSON.parse(i),t&&(s={...t,...s})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${n}${i}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];s={...i},s=s.replace&&!ze(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),o=e,l=!0}if(r=t(a.call(this,n[1].trim(),s),s),r&&n[0]===e&&!ze(r))return r;ze(r)||(r=Ue(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),l&&(r=o.reduce(((e,t)=>this.format(e,t,i.lng,{...i,interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const vt=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=r+JSON.stringify(i);let o=t[a];return o||(o=e(tt(r),s),t[a]=o),o(n)}};class bt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=st.create("formatter"),this.options=e,this.formats={number:vt(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:vt(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:vt(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:vt(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:vt(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=vt(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find((e=>e.indexOf(")")>-1))){const e=s.findIndex((e=>e.indexOf(")")>-1));s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce(((e,t)=>{const{formatName:s,formatOptions:i}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),s=r.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=s),"false"===s&&(n[i]=!1),"true"===s&&(n[i]=!0),isNaN(s)||(n[i]=parseInt(s,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[s]){let t=e;try{const a=r?.formatParams?.[r.interpolationkey]||{},o=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[s](e,o,{...i,...r,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn(`there was no format function for ${s}`),e}),e)}}class xt extends it{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=st.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,r.backend,r)}queueLoad(e,t,n,r){const s={},i={},a={},o={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===i[a]&&(i[a]=!0):(this.state[a]=1,r=!1,void 0===i[a]&&(i[a]=!0),void 0===s[a]&&(s[a]=!0),void 0===o[t]&&(o[t]=!0)))})),r||(a[e]=!0)})),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),s=r[0],i=r[1];t&&this.emit("failedLoading",s,i,t),!t&&n&&this.store.addResourceBundle(s,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:r,k:s}=We(e,t,Object);r[s]=r[s]||[],r[s].push(n)})(n.loaded,[s],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:s,callback:i});this.readingCalls++;const a=(a,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&o&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*s,i)}),s):i(a,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,a);try{const n=o(e,t);n&&"function"===typeof n.then?n.then((e=>a(null,e))).catch(a):a(null,n)}catch(l){a(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();ze(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ze(t)&&(t=[t]);const s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,((n,i)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,n),!n&&i&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,i),this.loaded(e,n,i)}))}saveMissing(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(void 0!==n&&null!==n&&""!==n){if(this.backend?.create){const l={...i,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let s;s=5===c.length?c(e,t,n,r,l):c(e,t,n,r),s&&"function"===typeof s.then?s.then((e=>a(null,e))).catch(a):a(null,s)}catch(o){a(o)}else c(e,t,n,r,a,l)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const wt=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),ze(e[1])&&(t.defaultValue=e[1]),ze(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),_t=e=>(ze(e.ns)&&(e.ns=[e.ns]),ze(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ze(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"===typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),kt=()=>{};class St extends it{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=_t(e),this.services={},this.logger=st,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),null==t.defaultNS&&t.ns&&(ze(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=wt();this.options={...r,...this.options,..._t(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?st.init(s(this.modules.logger),this.options):st.init(null,this.options),t=this.modules.formatter?this.modules.formatter:bt;const n=new ut(this.options);this.store=new at(this.options.resources,this.options);const i=this.services;i.logger=st,i.resourceStore=this.store,i.languageUtils=n,i.pluralResolver=new pt(n,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(i.formatter=s(t),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new yt(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new xt(s(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];e.emit(t,...r)})),this.modules.languageDetector&&(i.languageDetector=s(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=s(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new dt(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=kt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const i=Fe(),a=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),i}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;const n=ze(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===n?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}this.options.preload?.forEach?.((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=Fe();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=kt),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&ot.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=Fe();this.emit("languageChanging",e);const s=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,a)=>{a?this.isLanguageChangingTo===e&&(s(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(i,(function(){return n.t(...arguments)}))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const n=ze(t)?t:t&&t[0],r=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(ze(t)?[t]:t);r&&(this.language||s(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector?.cacheUserLanguage?.(r)),this.loadResources(r,(e=>{i(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const s=function(e,t){let i;if("object"!==typeof t){for(var a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([e,t].concat(o))}else i={...t};i.lng=i.lng||s.lng,i.lngs=i.lngs||s.lngs,i.ns=i.ns||s.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||s.keyPrefix);const c=r.options.keySeparator||".";let d;return d=i.keyPrefix&&Array.isArray(e)?e.map((e=>`${i.keyPrefix}${c}${e}`)):i.keyPrefix?`${i.keyPrefix}${c}${e}`:e,r.t(d,i)};return ze(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.translator?.translate(...t)}exists(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.translator?.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(n,e)||r&&!i(s,e)))}loadNamespaces(e,t){const n=Fe();return this.options.ns?(ze(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Fe();ze(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter((e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return s.length?(this.options.preload=r.concat(s),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services?.languageUtils||new ut(wt());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new St(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},s=new St(r);void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e));if(["store","services","language"].forEach((e=>{s[e]=this[e]})),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce(((n,r)=>(n[r]={...e[t][r]},n)),e[t]),e)),{});s.store=new at(e,r),s.services.resourceStore=s.store}return s.translator=new dt(s.services,r),s.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.emit(e,...n)})),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const jt=St.createInstance();jt.createInstance=St.createInstance;jt.createInstance,jt.dir,jt.init,jt.loadResources,jt.reloadResources,jt.use,jt.changeLanguage,jt.getFixedT,jt.t,jt.exists,jt.setDefaultNamespace,jt.hasLoadedNamespace,jt.loadNamespaces,jt.loadLanguages;n(844);Object.create(null);const Nt={},Et=(e,t,n,r)=>{Tt(n)&&Nt[n]||(Tt(n)&&(Nt[n]=new Date),((e,t,n,r)=>{const s=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);Tt(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...s):console?.warn&&console.warn(...s)})(e,t,n,r))},Ct=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout((()=>{e.off("initialized",n)}),0),t()};e.on("initialized",n)}},Pt=(e,t,n)=>{e.loadNamespaces(t,Ct(e,n))},Ot=(e,t,n,r)=>{if(Tt(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Pt(e,n,r);n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,Ct(e,r))},Tt=e=>"string"===typeof e,Mt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Rt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Lt=e=>Rt[e];let At={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Mt,Lt)};let Dt;const It={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At={...At,...e}}(e.options.react),(e=>{Dt=e})(e)}},$t=(0,t.createContext)();class zt{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ft=(e,t,n,r)=>e.getFixedT(t,n,r),Ut=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:r}=n,{i18n:s,defaultNS:i}=(0,t.useContext)($t)||{},a=r||s||Dt;if(a&&!a.reportNamespaces&&(a.reportNamespaces=new zt),!a){Et(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return Tt(t)?t:"object"===typeof(n=t)&&null!==n&&Tt(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}a.options.react?.wait&&Et(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...At,...a.options.react,...n},{useSuspense:l,keyPrefix:c}=o;let d=e||i||a.options?.defaultNS;d=Tt(d)?[d]:d||["translation"],a.reportNamespaces.addUsedNamespaces?.(d);const u=(a.isInitialized||a.initializedStoreOnce)&&d.every((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n?.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(Et(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0)}(e,a,o))),h=((e,n,r,s)=>(0,t.useCallback)(Ft(e,n,r,s),[e,n,r,s]))(a,n.lng||null,"fallback"===o.nsMode?d:d[0],c),f=()=>h,p=()=>Ft(a,n.lng||null,"fallback"===o.nsMode?d:d[0],c),[g,m]=(0,t.useState)(f);let y=d.join();n.lng&&(y=`${n.lng}${y}`);const v=((e,n)=>{const r=(0,t.useRef)();return(0,t.useEffect)((()=>{r.current=n?r.current:e}),[e,n]),r.current})(y),b=(0,t.useRef)(!0);(0,t.useEffect)((()=>{const{bindI18n:e,bindI18nStore:t}=o;b.current=!0,u||l||(n.lng?Ot(a,n.lng,d,(()=>{b.current&&m(p)})):Pt(a,d,(()=>{b.current&&m(p)}))),u&&v&&v!==y&&b.current&&m(p);const r=()=>{b.current&&m(p)};return e&&a?.on(e,r),t&&a?.store.on(t,r),()=>{b.current=!1,a&&e?.split(" ").forEach((e=>a.off(e,r))),t&&a&&t.split(" ").forEach((e=>a.store.off(e,r)))}}),[a,y]),(0,t.useEffect)((()=>{b.current&&u&&m(f)}),[a,c,u]);const x=[g,a,u];if(x.t=g,x.i18n=a,x.ready=u,u)return x;if(!u&&!l)return x;throw new Promise((e=>{n.lng?Ot(a,n.lng,d,(()=>e())):Pt(a,d,(()=>e()))}))};const{slice:Bt,forEach:Vt}=[];const Ht=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Wt={create(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+60*n*1e3)),r&&(s.domain=r),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let r=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!Ht.test(n.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${n.domain}`}if(n.path){if(!Ht.test(n.path))throw new TypeError("option path is invalid");r+=`; Path=${n.path}`}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(r+="; Partitioned"),r}(e,encodeURIComponent(t),s)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e){this.create(e,"",-1)}};var qt={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return Wt.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=t;n&&"undefined"!==typeof document&&Wt.create(n,e,r,s,i)}},Kt={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){let{search:e}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const r=e.substring(1).split("&");for(let s=0;s<r.length;s++){const e=r[s].indexOf("=");if(e>0){r[s].substring(0,e)===n&&(t=r[s].substring(e+1))}}}return t}};let Jt=null;const Yt=()=>{if(null!==Jt)return Jt;try{if(Jt="undefined"!==typeof window&&null!==window.localStorage,!Jt)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){Jt=!1}return Jt};var Gt={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Yt())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Yt()&&window.localStorage.setItem(n,e)}};let Xt=null;const Qt=()=>{if(null!==Xt)return Xt;try{if(Xt="undefined"!==typeof window&&null!==window.sessionStorage,!Xt)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Xt=!1}return Xt};var Zt={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Qt())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&Qt()&&window.sessionStorage.setItem(n,e)}},en={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let s=0;s<e.length;s++)t.push(e[s]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},tn={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const r=n||("undefined"!==typeof document?document.documentElement:null);return r&&"function"===typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},nn={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if("undefined"===typeof window)return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return;const r="number"===typeof t?t:0;return n[r]?.replace("/","")}},rn={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const n="number"===typeof t?t+1:1,r="undefined"!==typeof window&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};let sn=!1;try{document.cookie,sn=!0}catch(Fu){}const an=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];sn||an.splice(1,1);class on{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return Vt.call(Bt.call(arguments,1),(t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:an,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(qt),this.addDetector(Kt),this.addDetector(Gt),this.addDetector(Zt),this.addDetector(en),this.addDetector(tn),this.addDetector(nn),this.addDetector(rn)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach((e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}})),t=t.filter((e=>{return void 0!==e&&null!==e&&!("string"===typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some((e=>e.test(t))));var t})).map((e=>this.options.convertDetectedLanguage(e))),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})))}}function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}on.type="languageDetector";function cn(){return"function"===typeof XMLHttpRequest||"object"===("undefined"===typeof XMLHttpRequest?"undefined":ln(XMLHttpRequest))}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}var pn,gn,mn="function"===typeof fetch?fetch:void 0;if("undefined"!==typeof global&&global.fetch?mn=global.fetch:"undefined"!==typeof window&&window.fetch&&(mn=window.fetch),cn()&&("undefined"!==typeof global&&global.XMLHttpRequest?pn=global.XMLHttpRequest:"undefined"!==typeof window&&window.XMLHttpRequest&&(pn=window.XMLHttpRequest)),"function"===typeof ActiveXObject&&("undefined"!==typeof global&&global.ActiveXObject?gn=global.ActiveXObject:"undefined"!==typeof window&&window.ActiveXObject&&(gn=window.ActiveXObject)),"function"!==typeof mn&&(mn=void 0),!mn&&!pn&&!gn)try{n.e(38).then(n.t.bind(n,38,19)).then((function(e){mn=e.default})).catch((function(){}))}catch(Fu){}var yn=function(e,t){if(t&&"object"===fn(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},vn=function(e,t,n,r){var s=function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then((function(t){n(null,{status:e.status,data:t})})).catch(n)};if(r){var i=r(e,t);if(i instanceof Promise)return void i.then(s).catch(n)}"function"===typeof fetch?fetch(e,t).then(s).catch(n):mn(e,t).then(s).catch(n)},bn=!1;const xn=function(e,t,n,r){return"function"===typeof n&&(r=n,n=void 0),r=r||function(){},mn&&0!==t.indexOf("file:")?function(e,t,n,r){e.queryStringParams&&(t=yn(t,e.queryStringParams));var s=un({},"function"===typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"===typeof window&&"undefined"!==typeof global&&"undefined"!==typeof global.process&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(s["Content-Type"]="application/json");var i="function"===typeof e.requestOptions?e.requestOptions(n):e.requestOptions,a=un({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:s},bn?{}:i),o="function"===typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{vn(t,a,r,o)}catch(Fu){if(!i||0===Object.keys(i).length||!Fu.message||Fu.message.indexOf("not implemented")<0)return r(Fu);try{Object.keys(i).forEach((function(e){delete a[e]})),vn(t,a,r,o),bn=!0}catch(l){r(l)}}}(e,t,n,r):cn()||"function"===typeof ActiveXObject?function(e,t,n,r){n&&"object"===fn(n)&&(n=yn("",n).slice(1)),e.queryStringParams&&(t=yn(t,e.queryStringParams));try{var s=pn?new pn:new gn("MSXML2.XMLHTTP.3.0");s.open(n?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,n&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var i=e.customHeaders;if(i="function"===typeof i?i():i)for(var a in i)s.setRequestHeader(a,i[a]);s.onreadystatechange=function(){s.readyState>3&&r(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(n)}catch(Fu){console&&console.log(Fu)}}(e,t,n,r):void r(new Error("No fetch and no xhr implementation found!"))};function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nn(r.key),r)}}function jn(e,t,n){return(t=Nn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e){var t=function(e,t){if("object"!=wn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wn(t)?t:t+""}var En=function(e,t,n){return t&&Sn(e.prototype,t),n&&Sn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}),[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=kn(kn(kn({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return jn({},t,n||"")},parseLoadPayload:function(e,t){},request:xn,reloadInterval:"undefined"===typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=r,this.services&&this.options.reloadInterval){var s=setInterval((function(){return t.reload()}),this.options.reloadInterval);"object"===wn(s)&&"function"===typeof s.unref&&s.unref()}}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,s){var i,a=this,o=this.options.loadPath;"function"===typeof this.options.loadPath&&(o=this.options.loadPath(e,n)),(o=function(e){return!!e&&"function"===typeof e.then}(i=o)?i:Promise.resolve(i)).then((function(i){if(!i)return s(null,{});var o=a.services.interpolator.interpolate(i,{lng:e.join("+"),ns:n.join("+")});a.loadUrl(o,s,t,r)}))}},{key:"loadUrl",value:function(e,t,n,r){var s=this,i="string"===typeof n?[n]:n,a="string"===typeof r?[r]:r,o=this.options.parseLoadPayload(i,a);this.options.request(this.options,e,o,(function(i,a){if(a&&(a.status>=500&&a.status<600||!a.status))return t("failed loading "+e+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return t("failed loading "+e+"; status code: "+a.status,!1);if(!a&&i&&i.message){var o=i.message.toLowerCase();if(["failed","fetch","network","load"].find((function(e){return o.indexOf(e)>-1})))return t("failed loading "+e+": "+i.message,!0)}if(i)return t(i,!1);var l,c;try{l="string"===typeof a.data?s.options.parse(a.data,n,r):a.data}catch(Fu){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,l)}))}},{key:"create",value:function(e,t,n,r,s){var i=this;if(this.options.addPath){"string"===typeof e&&(e=[e]);var a=this.options.parsePayload(t,n,r),o=0,l=[],c=[];e.forEach((function(n){var r=i.options.addPath;"function"===typeof i.options.addPath&&(r=i.options.addPath(n,t));var d=i.services.interpolator.interpolate(r,{lng:n,ns:t});i.options.request(i.options,d,a,(function(t,n){o+=1,l.push(t),c.push(n),o===e.length&&"function"===typeof s&&s(l,c)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,s=t.logger,i=n.language;if(!i||"cimode"!==i.toLowerCase()){var a=[],o=function(e){r.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};o(i),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return o(e)})),a.forEach((function(t){e.allOptions.ns.forEach((function(e){n.read(t,e,"read",null,null,(function(r,i){r&&s.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&i&&s.log("loaded namespace ".concat(e," for language ").concat(t),i),n.loaded("".concat(t,"|").concat(e),r,i)}))}))}))}}}]);En.type="backend";const Cn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"translation";try{const{data:n,error:r}=await xe.N.from("translations").select("key, value").eq("language_code",e).eq("namespace",t);if(r)return console.error("Error fetching translations:",r),{};const s={};return n.forEach((e=>{let{key:t,value:n}=e;const r=t.split(".");let i=s;r.forEach(((e,t)=>{t===r.length-1?i[e]=n:(i[e]=i[e]||{},i=i[e])}))})),s}catch(n){return console.error("Error in fetchTranslations:",n),{}}},Pn={type:"backend",init:()=>{},read:async(e,t,n)=>{try{console.log(`Loading translations for language: ${e}, namespace: ${t}`);const r=await Cn(e,t);console.log(`Loaded translations for ${e}:`,r),n(null,r)}catch(r){console.error(`Error loading ${e} translations:`,r),n(r,null)}}};jt.use(Pn).use(on).use(It).init({fallbackLng:"en",debug:!1,resources:{en:{translation:{"app.name":"Zaira Montoya AI Wellness Coach","common.client":"Client","common.therapist":"Therapist","common.refresh":"Refresh","common.viewDetails":"View Details","nav.dashboard":"Dashboard","nav.chat":"Chat","auth.login":"Login","auth.logout":"Logout","dashboard.welcomeBack":"Welcome back, {{name}}","dashboard.trackProgress":"Track your progress, manage your therapy sessions, and access resources to support your mental health journey.","dashboard.wellness":"Wellness","dashboard.totalSessions":"Total Sessions","dashboard.averageScore":"Average Well-being Score","dashboard.progressTrend":"Progress Trend","dashboard.lastSession":"Last Session","dashboard.quickActions":"Quick Actions","dashboard.chatSession":"Chat Session","dashboard.talkWithAI":"Talk with your AI therapist","dashboard.schedule":"Schedule","dashboard.bookSession":"Book a live session","dashboard.resources":"Resources","dashboard.accessMaterials":"Access helpful materials","dashboard.wellbeingProgress":"Your Well-being Progress","dashboard.score":"Score","dashboard.chartDescription":"This chart shows your emotional well-being trends based on your conversations with the AI therapist.","dashboard.recentSessions":"Recent Sessions","dashboard.noSummary":"No summary available","dashboard.upcomingSession":"Upcoming Session","dashboard.withTherapist":"With Dr. {{name}}","dashboard.joinSession":"Join Session","dashboard.noUpcomingSessions":"No Upcoming Sessions","dashboard.noSessionsScheduled":"You don't have any upcoming sessions scheduled.","dashboard.scheduleNow":"Schedule Now","dashboard.helpfulResources":"Helpful Resources","dashboard.sentimentScore":"Sentiment Score"}},es:{translation:{"app.name":"Zaira Montoya Entrenadora de Bienestar con IA","common.client":"Cliente","common.therapist":"Terapeuta","common.refresh":"Actualizar","common.viewDetails":"Ver Detalles","nav.dashboard":"Panel Principal","nav.chat":"Chat","auth.login":"Iniciar Sesi\xf3n","auth.logout":"Cerrar Sesi\xf3n","dashboard.welcomeBack":"Bienvenido/a de nuevo, {{name}}","dashboard.trackProgress":"Sigue tu progreso, gestiona tus sesiones de terapia y accede a recursos para apoyar tu viaje de salud mental.","dashboard.wellness":"Bienestar","dashboard.totalSessions":"Sesiones Totales","dashboard.averageScore":"Puntuaci\xf3n Media de Bienestar","dashboard.progressTrend":"Tendencia de Progreso","dashboard.lastSession":"\xdaltima Sesi\xf3n","dashboard.quickActions":"Acciones R\xe1pidas","dashboard.chatSession":"Sesi\xf3n de Chat","dashboard.talkWithAI":"Habla con tu terapeuta IA","dashboard.schedule":"Programar","dashboard.bookSession":"Reservar una sesi\xf3n en vivo","dashboard.resources":"Recursos","dashboard.accessMaterials":"Acceder a materiales \xfatiles","dashboard.wellbeingProgress":"Tu Progreso de Bienestar","dashboard.score":"Puntuaci\xf3n","dashboard.chartDescription":"Este gr\xe1fico muestra las tendencias de tu bienestar emocional basadas en tus conversaciones con el terapeuta IA.","dashboard.recentSessions":"Sesiones Recientes","dashboard.noSummary":"No hay resumen disponible","dashboard.upcomingSession":"Pr\xf3xima Sesi\xf3n","dashboard.withTherapist":"Con Dr. {{name}}","dashboard.joinSession":"Unirse a la Sesi\xf3n","dashboard.noUpcomingSessions":"Sin Sesiones Programadas","dashboard.noSessionsScheduled":"No tienes ninguna sesi\xf3n programada pr\xf3ximamente.","dashboard.scheduleNow":"Programar Ahora","dashboard.helpfulResources":"Recursos \xdatiles","dashboard.sentimentScore":"Puntuaci\xf3n de Sentimiento"}}},interpolation:{escapeValue:!1},detection:{order:["querystring","localStorage","navigator"],lookupQuerystring:"lang",caches:["localStorage"]},react:{useSuspense:!0},partialBundledLanguages:!0});const On=(0,t.createContext)(),Tn=e=>{let{children:n}=e;const{i18n:r}=Ut(),[s,i]=(0,t.useState)("en"),[a,o]=(0,t.useState)([{code:"en",name:"English"},{code:"es",name:"Espa\xf1ol"}]);(0,t.useEffect)((()=>{(async()=>{try{var e;const{data:{session:n}}=await xe.N.auth.getSession();if(null!==n&&void 0!==n&&null!==(e=n.user)&&void 0!==e&&e.id){var t;const{data:e}=await xe.N.from("users").select("profile_data").eq("id",n.user.id).single(),s=null===e||void 0===e||null===(t=e.profile_data)||void 0===t?void 0:t.language;if(s&&a.some((e=>e.code===s)))return i(s),void r.changeLanguage(s)}}catch(s){console.error("Error fetching user language preference:",s)}const n=localStorage.getItem("language");if(n&&a.some((e=>e.code===n)))i(n),r.changeLanguage(n);else{const e=navigator.language.split("-")[0],t=a.some((t=>t.code===e))?e:"en";i(t),r.changeLanguage(t),localStorage.setItem("language",t)}})()}),[r]);return(0,Se.jsx)(On.Provider,{value:{currentLanguage:s,availableLanguages:a,changeLanguage:async e=>{if(a.some((t=>t.code===e)))try{var t;console.log(`LanguageContext: Changing language to ${e}`),i(e),localStorage.setItem("language",e),await r.changeLanguage(e),console.log(`Language changed to ${e}, i18n.language is now: ${r.language}`),r.services.resourceStore&&(console.log("Reloading translation resources..."),await r.reloadResources(e,"translation"));const{data:{session:n}}=await xe.N.auth.getSession();if(null!==n&&void 0!==n&&null!==(t=n.user)&&void 0!==t&&t.id){const{data:t}=await xe.N.from("users").select("profile_data").eq("id",n.user.id).single(),r={...null===t||void 0===t?void 0:t.profile_data,language:e};await xe.N.from("users").update({profile_data:r}).eq("id",n.user.id)}}catch(n){console.error("Error changing language:",n)}else console.error(`Language ${e} is not supported`)},addLanguage:(e,t)=>{a.some((t=>t.code===e))?console.error(`Language ${e} already exists`):o((n=>[...n,{code:e,name:t}]))}},children:n})},Mn=On;var Rn=n(950),Ln=n.t(Rn,2);function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},An.apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const In=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Fu){}new Map;const $n=r.startTransition;Ln.flushSync,r.useId;function zn(e){let{basename:n,children:r,future:s,window:i}=e,a=t.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return d("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:u(t)}),null,e)}({window:i,v5Compat:!0}));let o=a.current,[l,c]=t.useState({action:o.action,location:o.location}),{v7_startTransition:h}=s||{},p=t.useCallback((e=>{h&&$n?$n((()=>c(e))):c(e)}),[c,h]);return t.useLayoutEffect((()=>o.listen(p)),[o,p]),t.useEffect((()=>fe(s)),[s]),t.createElement(ye,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Fn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Un=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bn=t.forwardRef((function(e,n){let r,{onClick:s,relative:i,reloadDocument:a,replace:l,state:c,target:d,to:h,preventScrollReset:f,viewTransition:p}=e,g=Dn(e,In),{basename:m}=t.useContext(W),y=!1;if("string"===typeof h&&Un.test(h)&&(r=h,Fn))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=O(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(Fu){}let v=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||o(!1);let{basename:s,navigator:i}=t.useContext(W),{hash:a,pathname:l,search:c}=ee(e,{relative:r}),d=l;return"/"!==s&&(d="/"===l?s:A([s,l])),i.createHref({pathname:d,search:c,hash:a})}(h,{relative:i}),b=function(e,n){let{target:r,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===n?{}:n,c=Q(),d=G(),h=ee(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==s?s:u(d)===u(h);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}}),[d,c,h,s,i,r,e,a,o,l])}(h,{replace:l,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:p});return t.createElement("a",An({},g,{href:r||v,onClick:y||a?s:function(e){s&&s(e),e.defaultPrevented||b(e)},ref:n,target:d}))}));var Vn,Hn;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Vn||(Vn={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Hn||(Hn={}));const Wn=()=>{const{t:e}=Ut(),n=(0,t.useContext)(Mn);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");const{currentLanguage:r,availableLanguages:s,changeLanguage:i,addLanguage:a}=n;return{t:e,currentLanguage:r,availableLanguages:s,changeLanguage:i,addLanguage:a}};function qn(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Kn=t.forwardRef(qn),Jn=e=>{var n;let{className:r=""}=e;const{t:s}=Ut(),{currentLanguage:i,availableLanguages:a,changeLanguage:o}=Wn(),[l,c]=(0,t.useState)(!1),d=(null===(n=a.find((e=>e.code===i)))||void 0===n?void 0:n.name)||"English";return(0,Se.jsxs)("div",{className:`relative ${r}`,children:[(0,Se.jsxs)("button",{type:"button",onClick:()=>{c(!l)},className:"flex items-center text-secondary-500 hover:text-secondary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md","aria-expanded":l,"aria-haspopup":"true",children:[(0,Se.jsx)(Kn,{className:"h-5 w-5 mr-1","aria-hidden":"true"}),(0,Se.jsx)("span",{className:"text-sm font-medium",children:d})]}),l&&(0,Se.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",role:"menu","aria-orientation":"vertical","aria-labelledby":"language-menu",children:(0,Se.jsx)("div",{className:"py-1",role:"none",children:a.map((e=>(0,Se.jsx)("button",{onClick:()=>(async e=>{try{console.log(`Changing language to: ${e}`),localStorage.setItem("i18nextLng",e),localStorage.setItem("language",e),await o(e),window.location.href=window.location.pathname+"?lang="+e,window.location.reload()}catch(t){console.error("Error changing language:",t)}finally{c(!1)}})(e.code),className:"block px-4 py-2 text-sm w-full text-left "+(i===e.code?"bg-primary-100 text-primary-900 font-medium":"text-secondary-700 hover:bg-secondary-100"),role:"menuitem",children:e.name},e.code)))})})]})},Yn=e=>{let{type:t}=e;const{user:n,signOut:r}=Ee(),s=Q(),{t:i}=Ut(),a=async()=>{try{await r(),s("/login")}catch(e){console.error("Error signing out:",e)}};return(0,Se.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[(0,Se.jsxs)("header",{className:"bg-white shadow-sm",children:[(0,Se.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Se.jsxs)("div",{className:"flex justify-between h-16",children:[(0,Se.jsxs)("div",{className:"flex",children:[(0,Se.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,Se.jsx)(Bn,{to:"/",className:"text-primary-600 font-bold text-xl",children:i("app.name")})}),(0,Se.jsxs)("nav",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:["client"===t&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Bn,{to:"/client/dashboard",className:"border-primary-500 text-secondary-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:i("nav.dashboard")}),(0,Se.jsx)(Bn,{to:"/client/chat",className:"border-transparent text-secondary-500 hover:border-secondary-300 hover:text-secondary-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:i("nav.chat")})]}),"therapist"===t&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Bn,{to:"/therapist/dashboard",className:"border-primary-500 text-secondary-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Dashboard"}),(0,Se.jsx)(Bn,{to:"/therapist/clients",className:"border-transparent text-secondary-500 hover:border-secondary-300 hover:text-secondary-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Clients"})]}),"admin"===t&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Bn,{to:"/admin/dashboard",className:"border-primary-500 text-secondary-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Dashboard"}),(0,Se.jsx)(Bn,{to:"/admin/behaviors",className:"border-transparent text-secondary-500 hover:border-secondary-300 hover:text-secondary-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Behaviors"}),(0,Se.jsx)(Bn,{to:"/admin/users",className:"border-transparent text-secondary-500 hover:border-secondary-300 hover:text-secondary-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Users"}),(0,Se.jsx)(Bn,{to:"/admin/subscriptions",className:"border-transparent text-secondary-500 hover:border-secondary-300 hover:text-secondary-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Subscriptions"})]})]})]}),(0,Se.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:[(0,Se.jsx)(Jn,{className:"mr-4"}),(0,Se.jsxs)("div",{className:"ml-3 relative flex items-center space-x-4",children:[(0,Se.jsx)("span",{className:"text-sm font-medium text-secondary-700",children:null===n||void 0===n?void 0:n.email}),(0,Se.jsx)("button",{onClick:a,type:"button",className:"text-secondary-500 hover:text-secondary-700 focus:outline-none",children:i("auth.logout")})]})]}),(0,Se.jsx)("div",{className:"flex items-center sm:hidden",children:(0,Se.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-secondary-400 hover:text-secondary-500 hover:bg-secondary-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500","aria-controls":"mobile-menu","aria-expanded":"false",children:[(0,Se.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,Se.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,Se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),(0,Se.jsxs)("div",{className:"sm:hidden hidden",id:"mobile-menu",children:[(0,Se.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:["client"===t&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Bn,{to:"/client/dashboard",className:"bg-primary-50 border-primary-500 text-primary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Dashboard"}),(0,Se.jsx)(Bn,{to:"/client/chat",className:"border-transparent text-secondary-500 hover:bg-secondary-50 hover:border-secondary-300 hover:text-secondary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Chat"})]}),"therapist"===t&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Bn,{to:"/therapist/dashboard",className:"bg-primary-50 border-primary-500 text-primary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Dashboard"}),(0,Se.jsx)(Bn,{to:"/therapist/clients",className:"border-transparent text-secondary-500 hover:bg-secondary-50 hover:border-secondary-300 hover:text-secondary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Clients"})]}),"admin"===t&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(Bn,{to:"/admin/dashboard",className:"bg-primary-50 border-primary-500 text-primary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Dashboard"}),(0,Se.jsx)(Bn,{to:"/admin/behaviors",className:"border-transparent text-secondary-500 hover:bg-secondary-50 hover:border-secondary-300 hover:text-secondary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Behaviors"}),(0,Se.jsx)(Bn,{to:"/admin/users",className:"border-transparent text-secondary-500 hover:bg-secondary-50 hover:border-secondary-300 hover:text-secondary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Users"}),(0,Se.jsx)(Bn,{to:"/admin/subscriptions",className:"border-transparent text-secondary-500 hover:bg-secondary-50 hover:border-secondary-300 hover:text-secondary-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Subscriptions"})]})]}),(0,Se.jsxs)("div",{className:"pt-4 pb-3 border-t border-secondary-200",children:[(0,Se.jsx)("div",{className:"px-4 py-2",children:(0,Se.jsx)(Jn,{})}),(0,Se.jsx)("div",{className:"flex items-center px-4",children:(0,Se.jsxs)("div",{className:"ml-3",children:[(0,Se.jsx)("div",{className:"text-base font-medium text-secondary-800",children:null===n||void 0===n?void 0:n.email}),(0,Se.jsx)("div",{className:"text-sm font-medium text-secondary-500",children:t})]})}),(0,Se.jsx)("div",{className:"mt-3 space-y-1",children:(0,Se.jsx)("button",{onClick:a,className:"block px-4 py-2 text-base font-medium text-secondary-500 hover:text-secondary-800 hover:bg-secondary-100 w-full text-left",children:"Sign out"})})]})]})]}),(0,Se.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Se.jsx)(ge,{})}),(0,Se.jsx)("footer",{className:"bg-white border-t border-secondary-200 py-4",children:(0,Se.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Se.jsxs)("p",{className:"text-sm text-secondary-500 text-center",children:["\xa9 ",(new Date).getFullYear()," AI Coach & Therapist Platform - Inspiration AI / Gvargas Inc."]})})})]})},Gn=e=>{let{role:t}=e;const{user:n,loading:r}=Ee();return r?(0,Se.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):n?t&&n.role!==t?"client"===n.role?(0,Se.jsx)(pe,{to:"/client/dashboard",replace:!0}):"therapist"===n.role?(0,Se.jsx)(pe,{to:"/therapist/dashboard",replace:!0}):"admin"===n.role?(0,Se.jsx)(pe,{to:"/admin/dashboard",replace:!0}):(0,Se.jsx)(pe,{to:"/login",replace:!0}):(0,Se.jsx)(ge,{}):(0,Se.jsx)(pe,{to:"/login",replace:!0})},Xn=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),{signIn:c}=Ee(),d=Q();return(0,Se.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Se.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-secondary-900",children:"Sign in to your account"}),(0,Se.jsxs)("p",{className:"mt-2 text-center text-sm text-secondary-600",children:["Or"," ",(0,Se.jsx)(Bn,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a new account"})]})]}),(0,Se.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),a(""),l(!0);try{await c(e,r),d("/")}catch(n){console.error("Login error:",n),a(n.message||"Failed to sign in")}finally{l(!1)}},children:[(0,Se.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,Se.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-secondary-300 placeholder-secondary-500 text-secondary-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>n(e.target.value)})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,Se.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-secondary-300 placeholder-secondary-500 text-secondary-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:e=>s(e.target.value)})]})]}),i&&(0,Se.jsx)("div",{className:"text-red-500 text-sm mt-2",children:i}),(0,Se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Se.jsxs)("div",{className:"flex items-center",children:[(0,Se.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded"}),(0,Se.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-secondary-900",children:"Remember me"})]}),(0,Se.jsx)("div",{className:"text-sm",children:(0,Se.jsx)("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),(0,Se.jsx)("div",{children:(0,Se.jsxs)("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[o?(0,Se.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,Se.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Se.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Se.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,Se.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,Se.jsx)("svg",{className:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,Se.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 116 0z",clipRule:"evenodd"})})}),"Sign in"]})})]})]})})},Qn=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)("client"),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),{signUp:f}=Ee(),p=Q();return(0,Se.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Se.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-secondary-900",children:"Create a new account"}),(0,Se.jsxs)("p",{className:"mt-2 text-center text-sm text-secondary-600",children:["Or"," ",(0,Se.jsx)(Bn,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your existing account"})]})]}),(0,Se.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),d(""),r===i)if(r.length<8)d("Password must be at least 8 characters long");else{h(!0);try{await f(e,r,{role:o}),p("/")}catch(n){console.error("Registration error:",n),d(n.message||"Failed to create account")}finally{h(!1)}}else d("Passwords do not match")},children:[(0,Se.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,Se.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-secondary-300 placeholder-secondary-500 text-secondary-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>n(e.target.value)})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,Se.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-secondary-300 placeholder-secondary-500 text-secondary-900 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:e=>s(e.target.value)})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),(0,Se.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-secondary-300 placeholder-secondary-500 text-secondary-900 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:i,onChange:e=>a(e.target.value)})]})]}),(0,Se.jsxs)("div",{className:"mt-4",children:[(0,Se.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-secondary-700",children:"Account Type"}),(0,Se.jsxs)("select",{id:"role",name:"role",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-secondary-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",value:o,onChange:e=>l(e.target.value),children:[(0,Se.jsx)("option",{value:"client",children:"Client"}),(0,Se.jsx)("option",{value:"therapist",children:"Therapist"})]})]}),c&&(0,Se.jsx)("div",{className:"text-red-500 text-sm mt-2",children:c}),(0,Se.jsx)("div",{children:(0,Se.jsxs)("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[u?(0,Se.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,Se.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Se.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Se.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,Se.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,Se.jsx)("svg",{className:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,Se.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 116 0z",clipRule:"evenodd"})})}),"Create Account"]})})]}),(0,Se.jsx)("div",{className:"text-sm text-center",children:(0,Se.jsxs)("p",{className:"text-secondary-600",children:["By creating an account, you agree to our"," ",(0,Se.jsx)("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Terms of Service"})," ","and"," ",(0,Se.jsx)("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Privacy Policy"})]})})]})})};var Zn=n(673);const er=()=>{const[e,n]=(0,t.useState)("Checking..."),[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{const e=await ke();n(e?"Connected":"Disconnected")})();const{data:{subscription:e}}=_e.onAuthStateChange(((e,t)=>{console.log("Auth event:",e),s(t?t.user:null)}));return(async()=>{const{data:e}=await _e.getSession();e.session&&s(e.session.user)})(),()=>{e.unsubscribe()}}),[]);return(0,Se.jsxs)("div",{className:"supabase-demo",children:[(0,Se.jsx)("h2",{children:"Supabase Integration Demo"}),(0,Se.jsx)("div",{className:"connection-status",children:(0,Se.jsxs)("p",{children:[(0,Se.jsx)("strong",{children:"Connection Status:"}),(0,Se.jsx)("span",{className:"Connected"===e?"connected":"disconnected",children:e})]})}),(0,Se.jsxs)("div",{className:"mt-8",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"TypeScript Models Test"}),(0,Se.jsx)("p",{className:"mb-4",children:"Test our TypeScript models for interacting with the database:"}),(0,Se.jsx)("button",{onClick:async()=>{m(!0),p("");try{if(!r)throw new Error("You must be signed in to test the models");const e=await Zn.UserModel.getById(r.id);if(e)p(`Successfully retrieved user data: ${JSON.stringify(e)}`);else{const e=await Zn.UserModel.create({id:r.id,email:r.email,role:"client",first_name:"Test",last_name:"User"});if(!e)throw new Error("Failed to create user record");{p(`Successfully created user: ${JSON.stringify(e)}`);const t=await Zn.ClientModel.create({user_id:r.id,profile_data:{interests:["therapy","wellness"]}});t&&p((e=>e+"\n\nSuccessfully created client: "+JSON.stringify(t)))}}}catch(e){p(`Error testing models: ${e.message}`)}finally{m(!1)}},className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded",disabled:g,children:g?"Testing...":"Test Models"}),f&&(0,Se.jsx)("div",{className:"mt-4 p-4 bg-gray-100 rounded overflow-auto max-h-60",children:(0,Se.jsx)("pre",{className:"whitespace-pre-wrap",children:f})})]}),r?(0,Se.jsxs)("div",{className:"user-profile",children:[(0,Se.jsx)("h3",{children:"User Profile"}),(0,Se.jsxs)("p",{children:[(0,Se.jsx)("strong",{children:"Email:"})," ",r.email]}),(0,Se.jsxs)("p",{children:[(0,Se.jsx)("strong",{children:"ID:"})," ",r.id]}),(0,Se.jsx)("button",{onClick:async()=>{h(!0),d("");try{const{error:e}=await _e.signOut();d(e?`Error: ${e.message}`:"Signed out successfully!")}catch(e){d(`Unexpected error: ${e.message}`)}finally{h(!1)}},disabled:u,children:u?"Signing Out...":"Sign Out"})]}):(0,Se.jsxs)("div",{className:"auth-form",children:[(0,Se.jsx)("h3",{children:"Authentication"}),(0,Se.jsxs)("form",{children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Se.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>a(e.target.value),required:!0})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Se.jsx)("input",{type:"password",id:"password",value:o,onChange:e=>l(e.target.value),required:!0})]}),(0,Se.jsxs)("div",{className:"button-group",children:[(0,Se.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault(),h(!0),d("");try{const{data:e,error:t}=await _e.signIn(i,o);d(t?`Error: ${t.message}`:"Sign in successful!")}catch(t){d(`Unexpected error: ${t.message}`)}finally{h(!1)}},disabled:u,children:u?"Signing In...":"Sign In"}),(0,Se.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault(),h(!0),d("");try{const{data:e,error:t}=await _e.signUp(i,o);d(t?`Error: ${t.message}`:"Sign up successful! Check your email for confirmation.")}catch(t){d(`Unexpected error: ${t.message}`)}finally{h(!1)}},disabled:u,children:u?"Signing Up...":"Sign Up"})]})]})]}),c&&(0,Se.jsx)("div",{className:"message "+(c.includes("Error")?"error":"success"),children:c}),(0,Se.jsxs)("div",{className:"demo-section",children:[(0,Se.jsx)("h3",{children:"Additional Features"}),(0,Se.jsx)("p",{children:"This component demonstrates basic authentication with Supabase. The full supabaseService.js includes methods for:"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"Database operations (fetch, insert, update, delete)"}),(0,Se.jsx)("li",{children:"Storage management (upload, download, list files)"}),(0,Se.jsx)("li",{children:"Realtime subscriptions"}),(0,Se.jsx)("li",{children:"RPC function calls"})]})]}),(0,Se.jsx)("style",{jsx:!0,children:"\n        .supabase-demo {\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 20px;\n          font-family: Arial, sans-serif;\n        }\n        .connection-status {\n          margin-bottom: 20px;\n          padding: 10px;\n          background-color: #f5f5f5;\n          border-radius: 4px;\n        }\n        .connected {\n          color: green;\n          font-weight: bold;\n        }\n        .disconnected {\n          color: red;\n          font-weight: bold;\n        }\n        .auth-form, .user-profile {\n          margin-bottom: 20px;\n          padding: 15px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n        .form-group {\n          margin-bottom: 15px;\n        }\n        .form-group label {\n          display: block;\n          margin-bottom: 5px;\n        }\n        .form-group input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n        .button-group {\n          display: flex;\n          gap: 10px;\n        }\n        button {\n          padding: 8px 16px;\n          background-color: #4285f4;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        button:hover {\n          background-color: #3367d6;\n        }\n        button:disabled {\n          background-color: #cccccc;\n          cursor: not-allowed;\n        }\n        .message {\n          margin: 15px 0;\n          padding: 10px;\n          border-radius: 4px;\n        }\n        .error {\n          background-color: #ffebee;\n          color: #c62828;\n        }\n        .success {\n          background-color: #e8f5e9;\n          color: #2e7d32;\n        }\n        .demo-section {\n          margin-top: 20px;\n          padding: 15px;\n          background-color: #f5f5f5;\n          border-radius: 4px;\n        }\n        ul {\n          padding-left: 20px;\n        }\n      "})]})},tr=()=>(0,Se.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Se.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Supabase Integration Test"}),(0,Se.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6",children:(0,Se.jsx)(er,{})})]}),nr={async getUserProfile(e){try{const{data:t,error:n}=await xe.N.from("users").select("*").eq("id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error fetching user profile:",t),t}},async getClientData(e){try{const{data:t,error:n}=await xe.N.from("clients").select("*").eq("user_id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error fetching client data:",t),t}},async getTherapistData(e){try{const{data:t,error:n}=await xe.N.from("therapists").select("*").eq("user_id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error fetching therapist data:",t),t}},async getTherapistClients(e){try{const{data:t,error:n}=await xe.N.from("sessions").select("client_id").eq("therapist_id",e).order("start_time",{ascending:!1});if(n)throw n;const r=[...new Set(t.map((e=>e.client_id)))],{data:s,error:i}=await xe.N.from("users").select("*, clients(*)").in("id",r);if(i)throw i;return s}catch(t){throw console.error("Error fetching therapist clients:",t),t}},async getUpcomingSessions(e,t){try{const n=xe.N.from("sessions").select("\n          *,\n          clients:users!sessions_client_id_fkey(*),\n          therapists:users!sessions_therapist_id_fkey(*)\n        ").gt("start_time",(new Date).toISOString()).order("start_time",{ascending:!0});"client"===t?n.eq("client_id",e):"therapist"===t&&n.eq("therapist_id",e);const{data:r,error:s}=await n;if(s)throw s;return r||[]}catch(n){throw console.error("Error fetching upcoming sessions:",n),n}},async getRecentConversations(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;try{const r=xe.N.from("conversations").select("\n          *,\n          clients:users!conversations_client_id_fkey(*),\n          therapists:users!conversations_therapist_id_fkey(*),\n          summaries(*)\n        ").order("start_ts",{ascending:!1}).limit(n);"client"===t?r.eq("client_id",e):"therapist"===t&&r.eq("therapist_id",e);const{data:s,error:i}=await r;if(i)throw i;return s||[]}catch(r){throw console.error("Error fetching recent conversations:",r),r}},async updateUserProfile(e,t){try{const{data:n,error:r}=await xe.N.from("users").update(t).eq("id",e).select().single();if(r)throw r;return n}catch(n){throw console.error("Error updating user profile:",n),n}},async scheduleSession(e){try{const{data:t,error:n}=await xe.N.from("sessions").insert([e]).select().single();if(n)throw n;return t}catch(t){throw console.error("Error scheduling session:",t),t}}},rr={async getConversationHistory(e){try{const{data:t,error:n}=await xe.N.from("messages").select("*").eq("conversation_id",e).order("timestamp",{ascending:!0});if(n)throw n;return t||[]}catch(t){throw console.error("Error fetching conversation history:",t),t}},async createConversation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const{data:n,error:r}=await xe.N.from("conversations").insert([{client_id:e,therapist_id:t,start_ts:(new Date).toISOString()}]).select().single();if(r)throw r;return n.id}catch(n){throw console.error("Error creating conversation:",n),n}},async endConversation(e){try{const{error:t}=await xe.N.from("conversations").update({end_ts:(new Date).toISOString()}).eq("id",e);if(t)throw t}catch(t){throw console.error("Error ending conversation:",t),t}},async saveMessage(e){try{const{data:t,error:n}=await xe.N.from("messages").insert([e]).select().single();if(n)throw n;return t}catch(t){throw console.error("Error saving message:",t),t}},async getAIResponse(e,t,n){try{return new Promise((t=>{setTimeout((()=>{this.getCurrentBehavior(n).then((n=>{let r="I understand how you feel. Can you tell me more about that?";e.toLowerCase().includes("anxious")||e.toLowerCase().includes("anxiety")?r="I notice you mentioned feeling anxious. "+("CBT-focused"===(null===n||void 0===n?void 0:n.name)?"Let's identify what thoughts might be contributing to this anxiety. Can you share what's going through your mind?":"Taking slow, deep breaths can help in the moment. Would you like to try a brief breathing exercise together?"):e.toLowerCase().includes("sad")||e.toLowerCase().includes("depressed")?r="I'm sorry to hear you're feeling down. "+("Motivational"===(null===n||void 0===n?void 0:n.name)?"What's one small thing you could do today that might bring you a moment of joy?":"Depression can make everything feel more difficult. Have you noticed any patterns to when these feelings are strongest?"):(e.toLowerCase().includes("work")||e.toLowerCase().includes("job"))&&(r="Work situations can be challenging. "+("Mindfulness"===(null===n||void 0===n?void 0:n.name)?"When you're at work, what helps you stay grounded in the present moment?":"How do you think your thoughts about work are affecting your emotions and behaviors?")),t({message:r,sentiment_score:.5*Math.random()+.5})}))}),1e3)}))}catch(r){throw console.error("Error getting AI response:",r),r}},async getCurrentBehavior(e){try{const{data:t,error:n}=await xe.N.from("client_behaviors").select("behaviors(*)").eq("client_id",e).eq("active",!0).single();if(n&&"PGRST116"!==n.code)throw n;return(null===t||void 0===t?void 0:t.behaviors)||null}catch(t){return console.error("Error getting current behavior:",t),null}},async generateSummary(e){try{const{data:t,error:n}=await xe.N.from("messages").select("*").eq("conversation_id",e).order("timestamp",{ascending:!0});if(n)throw n;const r=t.filter((e=>null!==e.sentiment_score)).map((e=>e.sentiment_score)),s={average:r.length>0?r.reduce(((e,t)=>e+t),0)/r.length:.5,min:r.length>0?Math.min(...r):.5,max:r.length>0?Math.max(...r):.5,trend:r.length>1&&r[r.length-1]>r[0]?"improving":r.length>1&&r[r.length-1]<r[0]?"declining":"stable"};let i="Session focused on ";t.some((e=>e.text.toLowerCase().includes("anxiety")||e.text.toLowerCase().includes("anxious")))?i+="anxiety management. ":t.some((e=>e.text.toLowerCase().includes("work")||e.text.toLowerCase().includes("job")))?i+="work-related stress. ":t.some((e=>e.text.toLowerCase().includes("sad")||e.text.toLowerCase().includes("depressed")))?i+="mood improvement strategies. ":i+="general well-being. ",i+=`Overall sentiment was ${s.trend}. `,"improving"===s.trend?i+="Client showed progress during the session.":"declining"===s.trend?i+="Client may need additional support in future sessions.":i+="Client maintained consistent engagement throughout the session.";const{data:a,error:o}=await xe.N.from("summaries").insert([{conversation_id:e,summary_text:i,sentiment_metrics:s}]).select().single();if(o)throw o;return a}catch(t){throw console.error("Error generating summary:",t),t}}};function sr(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const ir=t.forwardRef(sr);function ar(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const or=t.forwardRef(ar);function lr(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const cr=t.forwardRef(lr);function dr(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ur=t.forwardRef(dr);function hr(e){return e+.5|0}const fr=(e,t,n)=>Math.max(Math.min(e,n),t);function pr(e){return fr(hr(2.55*e),0,255)}function gr(e){return fr(hr(255*e),0,255)}function mr(e){return fr(hr(e/2.55)/100,0,1)}function yr(e){return fr(hr(100*e),0,100)}const vr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},br=[..."0123456789ABCDEF"],xr=e=>br[15&e],wr=e=>br[(240&e)>>4]+br[15&e],_r=e=>(240&e)>>4===(15&e);function kr(e){var t=(e=>_r(e.r)&&_r(e.g)&&_r(e.b)&&_r(e.a))(e)?xr:wr;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Sr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jr(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function Nr(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function Er(e,t,n){const r=jr(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function Cr(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),i=Math.min(t,n,r),a=(s+i)/2;let o,l,c;return s!==i&&(c=s-i,l=a>.5?c/(2-s-i):c/(s+i),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,a]}function Pr(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(gr)}function Or(e,t,n){return Pr(jr,e,t,n)}function Tr(e){return(e%360+360)%360}function Mr(e){const t=Sr.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?pr(+t[5]):gr(+t[5]));const s=Tr(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Pr(Er,e,t,n)}(s,i,a):"hsv"===t[1]?function(e,t,n){return Pr(Nr,e,t,n)}(s,i,a):Or(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}const Rr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ar;function Dr(e){Ar||(Ar=function(){const e={},t=Object.keys(Lr),n=Object.keys(Rr);let r,s,i,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,Rr[i]);i=parseInt(Lr[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),Ar.transparent=[0,0,0,0]);const t=Ar[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ir=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const $r=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,zr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Fr(e,t,n){if(e){let r=Cr(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Or(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function Ur(e,t){return e?Object.assign(t||{},e):e}function Br(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=gr(e[3]))):(t=Ur(e,{r:0,g:0,b:0,a:1})).a=gr(t.a),t}function Vr(e){return"r"===e.charAt(0)?function(e){const t=Ir.exec(e);let n,r,s,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?pr(e):fr(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?pr(n):fr(n,0,255)),r=255&(t[4]?pr(r):fr(r,0,255)),s=255&(t[6]?pr(s):fr(s,0,255)),{r:n,g:r,b:s,a:i}}}(e):Mr(e)}class Hr{constructor(e){if(e instanceof Hr)return e;const t=typeof e;let n;"object"===t?n=Br(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*vr[e[1]],g:255&17*vr[e[2]],b:255&17*vr[e[3]],a:5===n?17*vr[e[4]]:255}:7!==n&&9!==n||(t={r:vr[e[1]]<<4|vr[e[2]],g:vr[e[3]]<<4|vr[e[4]],b:vr[e[5]]<<4|vr[e[6]],a:9===n?vr[e[7]]<<4|vr[e[8]]:255})),t}(e)||Dr(e)||Vr(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ur(this._rgb);return e&&(e.a=mr(e.a)),e}set rgb(e){this._rgb=Br(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${mr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?kr(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Cr(e),n=t[0],r=yr(t[1]),s=yr(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${mr(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const i=t===s?.5:t,a=2*i-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=i*n.a+(1-i)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=zr(mr(e.r)),s=zr(mr(e.g)),i=zr(mr(e.b));return{r:gr($r(r+n*(zr(mr(t.r))-r))),g:gr($r(s+n*(zr(mr(t.g))-s))),b:gr($r(i+n*(zr(mr(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Hr(this.rgb)}alpha(e){return this._rgb.a=gr(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=hr(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fr(this._rgb,2,e),this}darken(e){return Fr(this._rgb,2,-e),this}saturate(e){return Fr(this._rgb,1,e),this}desaturate(e){return Fr(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Cr(e);n[0]=Tr(n[0]+t),n=Or(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Wr(){}const qr=(()=>{let e=0;return()=>e++})();function Kr(e){return null===e||void 0===e}function Jr(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Yr(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Gr(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Xr(e,t){return Gr(e)?e:t}function Qr(e,t){return"undefined"===typeof e?t:e}const Zr=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function es(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function ts(e,t,n,r){let s,i,a;if(Jr(e))if(i=e.length,r)for(s=i-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<i;s++)t.call(n,e[s],s);else if(Yr(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function ns(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function rs(e){if(Jr(e))return e.map(rs);if(Yr(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=rs(e[n[s]]);return t}return e}function ss(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function is(e,t,n,r){if(!ss(e))return;const s=t[e],i=n[e];Yr(s)&&Yr(i)?as(s,i,r):t[e]=rs(i)}function as(e,t,n){const r=Jr(t)?t:[t],s=r.length;if(!Yr(e))return e;const i=(n=n||{}).merger||is;let a;for(let o=0;o<s;++o){if(a=r[o],!Yr(a))continue;const t=Object.keys(a);for(let r=0,s=t.length;r<s;++r)i(t[r],e,a,n)}return e}function os(e,t){return as(e,t,{merger:ls})}function ls(e,t,n){if(!ss(e))return;const r=t[e],s=n[e];Yr(r)&&Yr(s)?os(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=rs(s))}const cs={"":e=>e,x:e=>e.x,y:e=>e.y};function ds(e,t){const n=cs[t]||(cs[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function us(e){return e.charAt(0).toUpperCase()+e.slice(1)}const hs=e=>"undefined"!==typeof e,fs=e=>"function"===typeof e,ps=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const gs=Math.PI,ms=2*gs,ys=ms+gs,vs=Number.POSITIVE_INFINITY,bs=gs/180,xs=gs/2,ws=gs/4,_s=2*gs/3,ks=Math.log10,Ss=Math.sign;function js(e,t,n){return Math.abs(e-t)<n}function Ns(e){const t=Math.round(e);e=js(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(ks(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Es(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Cs(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Ps(e){return e*(gs/180)}function Os(e){return e*(180/gs)}function Ts(e){if(!Gr(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Ms(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*gs&&(i+=ms),{angle:i,distance:s}}function Rs(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ls(e,t){return(e-t+ys)%ms-gs}function As(e){return(e%ms+ms)%ms}function Ds(e,t,n,r){const s=As(e),i=As(t),a=As(n),o=As(i-s),l=As(a-s),c=As(s-i),d=As(s-a);return s===i||s===a||r&&i===a||o>l&&c<d}function Is(e,t,n){return Math.max(t,Math.min(n,e))}function $s(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function zs(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,i=0;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Fs=(e,t,n,r)=>zs(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),Us=(e,t,n)=>zs(e,n,(r=>e[r][t]>=n));const Bs=["push","pop","shift","splice","unshift"];function Vs(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(Bs.forEach((t=>{delete e[t]})),delete e._chartjs)}function Hs(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Ws="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function qs(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];n=i,r||(r=!0,Ws.call(window,(()=>{r=!1,e.apply(t,n)})))}}const Ks=e=>"start"===e?"left":"end"===e?"right":"center",Js=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Ys(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:u,max:h,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(s=Math.min(Fs(l,d,u).lo,n?r:Fs(t,d,a.getPixelForValue(u)).lo),c){const e=l.slice(0,s+1).reverse().findIndex((e=>!Kr(e[o.axis])));s-=Math.max(0,e)}s=Is(s,0,r-1)}if(p){let e=Math.max(Fs(l,a.axis,h,!0).hi+1,n?0:Fs(t,d,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!Kr(e[o.axis])));e+=Math.max(0,t)}i=Is(e,s,r)-s}else i=r-s}return{start:s,count:i}}function Gs(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Xs=e=>0===e||1===e,Qs=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ms/n),Zs=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ms/n)+1,ei={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*xs),easeOutSine:e=>Math.sin(e*xs),easeInOutSine:e=>-.5*(Math.cos(gs*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Xs(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Xs(e)?e:Qs(e,.075,.3),easeOutElastic:e=>Xs(e)?e:Zs(e,.075,.3),easeInOutElastic(e){const t=.1125;return Xs(e)?e:e<.5?.5*Qs(2*e,t,.45):.5+.5*Zs(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ei.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*ei.easeInBounce(2*e):.5*ei.easeOutBounce(2*e-1)+.5};function ti(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function ni(e){return ti(e)?e:new Hr(e)}function ri(e){return ti(e)?e:new Hr(e).saturate(.5).darken(.1).hexString()}const si=["x","y","borderWidth","radius","tension"],ii=["color","borderColor","backgroundColor"];const ai=new Map;function oi(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=ai.get(n);return r||(r=new Intl.NumberFormat(e,t),ai.set(n,r)),r}(t,n).format(e)}const li={values:e=>Jr(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=ks(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),oi(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(ks(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?li.numeric.call(this,e,t,n):""}};var ci={formatters:li};const di=Object.create(null),ui=Object.create(null);function hi(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function fi(e,t,n){return"string"===typeof t?as(hi(e,t),n):as(hi(e,""),t)}class pi{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>ri(t.backgroundColor),this.hoverBorderColor=(e,t)=>ri(t.borderColor),this.hoverColor=(e,t)=>ri(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return fi(this,e,t)}get(e){return hi(this,e)}describe(e,t){return fi(ui,e,t)}override(e,t){return fi(di,e,t)}route(e,t,n,r){const s=hi(this,e),i=hi(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[r];return Yr(e)?Object.assign({},t,e):Qr(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var gi=new pi({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:ii},numbers:{type:"number",properties:si}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ci.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function mi(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function yi(e,t,n,r){let s=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||Jr(u)){if(Jr(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||Jr(h)||(a=mi(e,s,i,a,h))}else a=mi(e,s,i,a,u);e.restore();const f=i.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[i[l]];i.splice(0,f)}return a}function vi(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function bi(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function xi(e,t,n,r){wi(e,t,n,r,null)}function wi(e,t,n,r,s){let i,a,o,l,c,d,u,h;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*bs;if(f&&"object"===typeof f&&(i=f.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:s?e.ellipse(n,r,s/2,g,0,0,ms):e.arc(n,r,g,0,ms),e.closePath();break;case"triangle":d=s?s/2:g,e.moveTo(n+Math.sin(m)*d,r-Math.cos(m)*g),m+=_s,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*g),m+=_s,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+ws)*l,u=Math.cos(m+ws)*(s?s/2-c:l),o=Math.sin(m+ws)*l,h=Math.sin(m+ws)*(s?s/2-c:l),e.arc(n-u,r-o,c,m-gs,m-xs),e.arc(n+h,r-a,c,m-xs,m),e.arc(n+u,r+o,c,m,m+xs),e.arc(n-h,r+a,c,m+xs,m+gs),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,d=s?s/2:l,e.rect(n-d,r-l,2*d,2*l);break}m+=ws;case"rectRot":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+h,r-a),e.lineTo(n+u,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":m+=ws;case"cross":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),m+=ws,u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=s?s/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(s?s/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function _i(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ki(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Si(e){e.restore()}function ji(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ni(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Ei(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(o,d),e.stroke()}}function Ci(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Pi(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Jr(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Kr(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&Ci(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Kr(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,r,i.maxWidth)),e.fillText(c,n,r,i.maxWidth),Ei(e,n,r,c,i),r+=Number(s.lineHeight);e.restore()}function Oi(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*gs,gs,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,gs,xs,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,xs,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-xs,!0),e.lineTo(n+a.topLeft,r)}const Ti=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mi=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ri(e,t){const n=(""+e).match(Ti);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function Li(e,t){const n={},r=Yr(t),s=r?Object.keys(t):t,i=Yr(e)?r?n=>Qr(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=+i(a)||0;return n}function Ai(e){return Li(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Di(e){return Li(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ii(e){const t=Ai(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $i(e,t){e=e||{},t=t||gi.font;let n=Qr(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=Qr(e.style,t.style);r&&!(""+r).match(Mi)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Qr(e.family,t.family),lineHeight:Ri(Qr(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Qr(e.weight,t.weight),string:""};return s.string=function(e){return!e||Kr(e.size)||Kr(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function zi(e,t,n,r){let s,i,a,o=!0;for(s=0,i=e.length;s<i;++s)if(a=e[s],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&Jr(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function Fi(e,t){return Object.assign(Object.create(e),t)}function Ui(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Qi("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>Ui([r,...e],t,s,n)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>qi(n,r,(()=>function(e,t,n,r){let s;for(const i of t)if(s=Qi(Hi(i,e),n),"undefined"!==typeof s)return Wi(e,s)?Gi(n,r,e,s):s}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Zi(e).includes(t),ownKeys:e=>Zi(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function Bi(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Vi(e,r),setContext:t=>Bi(e,t,n,r),override:s=>Bi(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>qi(e,t,(()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let o=r[t];fs(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||r);o.delete(e),Wi(e,l)&&(l=Gi(s._scopes,s,e,l));return l}(t,o,e,n));Jr(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof i.index&&r(e))return t[i.index%t.length];if(Yr(t[0])){const n=t,r=s._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Gi(r,s,e,l);t.push(Bi(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));Wi(t,o)&&(o=Bi(o,s,i&&i[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function Vi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:fs(n)?n:()=>n,isIndexable:fs(r)?r:()=>r}}const Hi=(e,t)=>e?e+us(t):t,Wi=(e,t)=>Yr(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function qi(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function Ki(e,t,n){return fs(e)?e(t,n):e}const Ji=(e,t)=>!0===e?t:"string"===typeof e?ds(t,e):void 0;function Yi(e,t,n,r,s){for(const i of t){const t=Ji(n,i);if(t){e.add(t);const i=Ki(t._fallback,n,s);if("undefined"!==typeof i&&i!==n&&i!==r)return i}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function Gi(e,t,n,r){const s=t._rootScopes,i=Ki(t._fallback,n,r),a=[...e,...s],o=new Set;o.add(r);let l=Xi(o,a,n,i||n,r);return null!==l&&(("undefined"===typeof i||i===n||(l=Xi(o,a,i,l,r),null!==l))&&Ui(Array.from(o),[""],s,i,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(Jr(s)&&Yr(n))return n;return s||{}}(t,n,r))))}function Xi(e,t,n,r,s){for(;n;)n=Yi(e,t,n,r,s);return n}function Qi(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Zi(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function ea(e,t,n,r){const{iScale:s}=e,{key:i="r"}=this._parsing,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={r:s.parse(ds(d,i),c)};return a}const ta=Number.EPSILON||1e-14,na=(e,t)=>t<e.length&&!e[t].skip&&e[t],ra=e=>"x"===e?"y":"x";function sa(e,t,n,r){const s=e.skip?t:e,i=t,a=n.skip?t:n,o=Rs(i,s),l=Rs(a,i);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:i.x-u*(a.x-s.x),y:i.y-u*(a.y-s.y)},next:{x:i.x+h*(a.x-s.x),y:i.y+h*(a.y-s.y)}}}function ia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=ra(t),r=e.length,s=Array(r).fill(0),i=Array(r);let a,o,l,c=na(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=na(e,a+1),l){if(c){const e=c[t]-l[t];s[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?Ss(s[a-1])!==Ss(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const r=e.length;let s,i,a,o,l,c=na(e,0);for(let d=0;d<r-1;++d)l=c,c=na(e,d+1),l&&c&&(js(t[d],0,ta)?n[d]=n[d+1]=0:(s=n[d]/t[d],i=n[d+1]/t[d],o=Math.pow(s,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[d]=s*a*t[d],n[d+1]=i*a*t[d])))}(e,s,i),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=ra(n),s=e.length;let i,a,o,l=na(e,0);for(let c=0;c<s;++c){if(a=o,o=l,l=na(e,c+1),!o)continue;const s=o[n],d=o[r];a&&(i=(s-a[n])/3,o[`cp1${n}`]=s-i,o[`cp1${r}`]=d-i*t[c]),l&&(i=(l[n]-s)/3,o[`cp2${n}`]=s+i,o[`cp2${r}`]=d+i*t[c])}}(e,i,t)}function aa(e,t,n){return Math.max(Math.min(e,n),t)}function oa(e,t,n,r,s){let i,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)ia(e,s);else{let n=r?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=sa(n,o,e[Math.min(i+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,i,a,o=_i(e[0],t);for(n=0,r=e.length;n<r;++n)a=i,i=o,o=n<r-1&&_i(e[n+1],t),i&&(s=e[n],a&&(s.cp1x=aa(s.cp1x,t.left,t.right),s.cp1y=aa(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=aa(s.cp2x,t.left,t.right),s.cp2y=aa(s.cp2y,t.top,t.bottom)))}(e,n)}function la(){return"undefined"!==typeof window&&"undefined"!==typeof document}function ca(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function da(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const ua=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const ha=["top","right","bottom","left"];function fa(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=ha[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function pa(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=ua(n),i="border-box"===s.boxSizing,a=fa(s,"padding"),o=fa(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,i,e.target))a=s,o=i;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),u=a.left+(d&&o.left),h=a.top+(d&&o.top);let{width:f,height:p}=t;return i&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-u)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const ga=e=>Math.round(10*e)/10;function ma(e,t,n,r){const s=ua(e),i=fa(s,"margin"),a=da(s.maxWidth,e,"clientWidth")||vs,o=da(s.maxHeight,e,"clientHeight")||vs,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const i=e&&ca(e);if(i){const e=i.getBoundingClientRect(),a=ua(i),o=fa(a,"border","width"),l=fa(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=da(a.maxWidth,i,"clientWidth"),s=da(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||vs,maxHeight:s||vs}}(e,t,n);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=fa(s,"border","width"),t=fa(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-i.width),d=Math.max(0,r?c/r:d-i.height),c=ga(Math.min(c,a,l.maxWidth)),d=ga(Math.min(d,o,l.maxHeight)),c&&!d&&(d=ga(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=ga(Math.floor(d*r))),{width:c,height:d}}function ya(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i)&&(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}const va=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};la()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Fu){}return e}();function ba(e,t){const n=function(e,t){return ua(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function xa(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function wa(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function _a(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=xa(e,s,n),o=xa(s,i,n),l=xa(i,t,n),c=xa(a,o,n),d=xa(o,l,n);return xa(c,d,n)}function ka(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Sa(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function ja(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Na(e){return"angle"===e?{between:Ds,compare:Ls,normalize:As}:{between:$s,compare:(e,t)=>e-t,normalize:e=>e}}function Ea(e){let{start:t,end:n,count:r,loop:s,style:i}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:i}}function Ca(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=Na(r),{start:d,end:u,loop:h,style:f}=function(e,t,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=Na(r),l=t.length;let c,d,{start:u,end:h,loop:f}=e;if(f){for(u+=l,h+=l,c=0,d=l;c<d&&a(o(t[u%l][r]),s,i);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,b=null;const x=()=>v||l(s,y,g)&&0!==o(s,y),w=()=>!v||0===o(i,g)||l(i,y,g);for(let _=d,k=d;_<=u;++_)m=t[_%a],m.skip||(g=c(m[r]),g!==y&&(v=l(g,s,i),null===b&&x()&&(b=0===o(g,s)?_:k),null!==b&&w()&&(p.push(Ea({start:b,end:_,loop:h,count:a,style:f})),b=null),k=_,y=g));return null!==b&&p.push(Ea({start:b,end:u,loop:h,count:a,style:f})),p}function Pa(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=Ca(r[s],e.points,t);i.length&&n.push(...i)}return n}function Oa(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),i=Ta(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let d=i,u=t[0].start,h=u;function f(e,t,r,s){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),d=s,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=n[u%l];for(h=u+1;h<=p.end;h++){const i=n[h%l];e=Ta(r.setContext(Fi(s,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),Ma(e,d)&&f(u,h-1,p.loop,d),t=i,d=e}u<h-1&&f(u,h-1,p.loop,d)}return c}(e,t,n,r):t}function Ta(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Ma(e,t){if(!t)return!1;const n=[],r=function(e,t){return ti(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Ra(e,t,n){return e.options.clip?e[n]:t[n]}function La(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Ra(n,t,"left"),right:Ra(n,t,"right"),top:Ra(r,t,"top"),bottom:Ra(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class Aa{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],i=t.duration;s.forEach((r=>r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)})))}_refresh(){this._request||(this._running=!0,this._request=Ws.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let i,a=s.length-1,o=!1;for(;a>=0;--a)i=s[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Da=new Aa;const Ia="transparent",$a={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=ni(e||Ia),s=r.valid&&ni(t||Ia);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class za{constructor(e,t,n,r){const s=t[n];r=zi([e.to,r,s,e.from]);const i=zi([e.from,s,r]);this._active=!0,this._fn=e.fn||$a[e.type||typeof i],this._easing=ei[e.easing]||ei.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,i=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=zi([e.to,t,r,e.from]),this._from=zi([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,i=this._loop,a=this._to;let o;if(this._active=s!==a&&(i||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Fa{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Yr(e))return;const t=Object.keys(gi.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const s=e[r];if(!Yr(s))return;const i={};for(const e of t)i[e]=s[e];(Jr(s.properties)&&s.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,i)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=s[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,a);continue}d.cancel()}u&&u.duration?(s[l]=d=new za(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Da.add(this._chart,n),!0):void 0}}function Ua(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:s,end:r?s:i}}function Ba(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Va(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,i="single"===r.mode;let a,o,l,c;if(null===t)return;let d=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(d=!0,r.all)continue;break}c=e.values[l],Gr(c)&&(i||0===t||Ss(t)===Ss(c))&&(t+=c)}return d||r.all?t:0}function Ha(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Wa(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function qa(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function Ka(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,d=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(i,a,r),u=t.length;let h;for(let f=0;f<u;++f){const e=t[f],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=Wa(s,d,n),h[o]=i,h._top=qa(h,a,!0,r.type),h._bottom=qa(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=i}}function Ja(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Ya(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const Ga=e=>"reset"===e||"none"===e,Xa=(e,t)=>t?e:Object.assign({},e);class Qa{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ha(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ya(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=Qr(n.xAxisID,Ja(e,"x")),i=t.yAxisID=Qr(n.yAxisID,Ja(e,"y")),a=t.rAxisID=Qr(n.rAxisID,Ja(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,i,a),c=t.vAxisID=r(o,i,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Vs(this._data,this),e._stacked&&Ya(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Yr(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",i="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],o[l]={[s]:d,[i]:e[d]};return o}(t,e)}else if(n!==t){if(n){Vs(n,this);const e=this._cachedMeta;Ya(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),Bs.forEach((e=>{const t="_onData"+us(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const a=n.apply(this,s);return r._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...s)})),a}})})))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=Ha(t.vScale,t),t.stack!==n.stack&&(r=!0,Ya(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(Ka(this,t._parsed),t._stacked=Ha(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:i}=n,a=s.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Jr(r[e])?this.parseArrayData(n,r,e,t):Yr(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(s()&&(d=!1),u=l);n._sorted=d}i&&Ka(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:i}=e,a=s.axis,o=i.axis,l=s.getLabels(),c=s===i,d=new Array(r);let u,h,f;for(u=0,h=r;u<h;++u)f=u+n,d[u]={[a]:c||s.parse(l[f],f),[o]:i.parse(t[f],f)};return d}parseArrayData(e,t,n,r){const{xScale:s,yScale:i}=e,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={x:s.parse(d[0],c),y:i.parse(d[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:s,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:s.parse(ds(h,a),u),y:i.parse(ds(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,i=t[e.axis];return Va({keys:Ba(r,!0),values:t._stacks[e.axis]._visualValues},i,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let i=null===s?NaN:s;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,i=Va(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,i=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Ba(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let u,h;function f(){h=r[u];const t=h[a.axis];return!Gr(h[e.axis])||c>t||d<t}for(u=0;u<i&&(f()||(this.updateRangeFromParsed(l,e,h,o),!s));++u);if(s)for(u=i-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,i;for(r=0,s=t.length;r<s;++r)i=t[r][e.axis],Gr(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return Yr(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(Qr(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=Ua(e,n),s=Ua(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,s))}for(c=0;c<i.length;++c)i[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return Fi(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return Fi(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,i=e+"-"+t,a=s[i],o=this.enableOptionSharing&&hs(n);if(a)return Xa(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(gi.elements[e]),f=l.resolveNamedOptions(u,h,(()=>this.getContext(n,r,t)),d);return f.$shared&&(f.$shared=o,s[i]=Object.freeze(Xa(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,i=`animation-${t}`,a=s[i];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),i=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(i,this.getContext(e,n,t))}const l=new Fa(r,o&&o.animations);return o&&o._cacheable&&(s[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ga(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),i=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:i}}updateElement(e,t,n,r){Ga(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Ga(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,s=t.length,i=Math.min(s,r);i&&this.parse(0,i),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(s),a=e;a<i;++a)s[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&Ya(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Za(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Hs(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,s,i,a,o=t._length;const l=()=>{32767!==i&&-32768!==i&&(hs(a)&&(o=Math.min(o,Math.abs(i-a)||o)),a=i)};for(r=0,s=n.length;r<s;++r)i=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)i=t.getPixelForTick(r),l();return o}function eo(e,t,n,r){return Jr(e)?function(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),a=Math.min(s,i),o=Math.max(s,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:i,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function to(e,t,n,r){const s=e.iScale,i=e.vScale,a=s.getLabels(),o=s===i,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[s.axis]=o||s.parse(a[c],c),l.push(eo(h,u,i,c));return l}function no(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function ro(e,t,n,r){let s=t.borderSkipped;const i={};if(!s)return void(e.borderSkipped=i);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=d:(i[so(d,a,o,l)]=!0,s=c)),i[so(s,a,o,l)]=!0,e.borderSkipped=i}function so(e,t,n,r){var s,i,a;return r?(a=n,e=io(e=(s=e)===(i=t)?a:s===a?i:s,n,t)):e=io(e,t,n),e}function io(e,t,n){return"start"===e?t:"end"===e?n:e}function ao(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}class oo extends Qa{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,r){return to(e,t,n,r)}parseArrayData(e,t,n,r){return to(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?a:o,c="x"===i.axis?a:o,d=[];let u,h,f,p;for(u=n,h=n+r;u<h;++u)p=t[u],f={},f[s.axis]=s.parse(ds(p,l),u),d.push(eo(ds(p,c),f,i,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),i=s._custom,a=no(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:i,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||Kr(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||no(t._custom)||i===p._top||i===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};u&&(g.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const m=g.options||e[h].options;ro(g,m,p,i),ao(g,m,c.ratio),this.updateElement(e[h],h,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),s=n.options.stacked,i=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),r=t&&t[e.vScale.axis];if(Kr(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===i.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&i.push(c.stack),c.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,i;for(s=0,i=t.data.length;s<i;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=e.barThickness;return{min:a||Za(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:i}}=this,a=s||0,o=this.getParsed(e),l=o._custom,c=no(l);let d,u,h=o[t.axis],f=0,p=n?this.applyStack(t,o,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&Ss(h)!==Ss(l.barEnd)&&(f=0),f+=h);const g=Kr(s)||c?f:s;let m=t.getPixelForValue(g);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,u=d-m,Math.abs(u)<i){u=function(e,t,n){return 0!==e?Ss(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,a)*i,h===a&&(m-=u/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),f=Math.max(e,s);m=Math.max(Math.min(m,f),l),d=m+u,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=Ss(u)*t.getLineWidthForValue(a)/2;m+=e,u-=e}return{size:u,base:m,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,i=Qr(r.maxBarThickness,1/0);let a,o;if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,i=s[e];let a=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===a&&(a=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const s=n.barThickness;let i,a;return Kr(s)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:t.pixels[e]-i/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(i,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(i,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}class lo extends Qa{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,i,a=e=>+n[e];if(Yr(n[e])){const{key:e="value"}=this._parsing;a=t=>+ds(n[t],e)}for(s=e,i=e+t;s<i;++s)r._parsed[s]=a(s)}}_getRotation(){return Ps(this.options.rotation-90)}_getCircumference(){return Ps(this.options.circumference)}_getRotationExtents(){let e=ms,t=-ms;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),i=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+i)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,i=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-i)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let r=1,s=1,i=0,a=0;if(t<ms){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>Ds(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>Ds(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),g=f(0,c,u),m=f(xs,d,h),y=p(gs,c,u),v=p(gs+xs,d,h);r=(g-y)/2,s=(m-v)/2,i=-(g+y)/2,a=-(m+v)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}(h,u,o),y=(n.width-i)/f,v=(n.height-i)/p,b=Math.max(Math.min(y,v)/2,0),x=Zr(this.options.radius,b),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/ms)}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.chartArea,o=i.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=s&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,s);for(g=t;g<t+n;++g){const t=this._circumference(g,s),n=e[g],i={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:u};p&&(i.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,i,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ms*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=oi(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,i,a,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){i=n.getDatasetMeta(r),e=i.data,a=i.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Qr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class co extends Qa{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,i=this.chart._animationsDisabled;let{start:a,count:o}=Ys(t,r,i);this._drawStart=a,this._drawCount=o,Gs(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=i.axis,h=a.axis,{spanGaps:f,segment:p}=this.options,g=Es(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],f=m?n:{};if(x<t||x>=y){f.skip=!0;continue}const v=this.getParsed(x),w=Kr(v[h]),_=f[u]=i.getPixelForValue(v[u],x),k=f[h]=s||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,v,o):v[h],x);f.skip=isNaN(_)||isNaN(k)||w,f.stop=x>0&&Math.abs(v[u]-b[u])>g,p&&(f.parsed=v,f.raw=l.data[x]),d&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),m||this.updateElement(n,x,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class uo extends Qa{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=oi(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return ea.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),i=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-i*this.index,this.innerRadius=this.outerRadius-i}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*gs;let u,h=d;const f=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,f);for(u=t;u<t+n;u++){const t=e[u];let n=h,p=h+this._computeAngle(u,r,f),g=i.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,s&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=d));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Ps(this.resolveDataElementOptions(e,t).angle||n):0}}var ho=Object.freeze({__proto__:null,BarController:oo,BubbleController:class extends Qa{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let i=0;i<s.length;i++)s[i]._custom=this.resolveDataElementOptions(i+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=Qr(e[2],this.resolveDataElementOptions(i+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=Qr(e&&e.r&&+e.r,this.resolveDataElementOptions(i+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y),l=i._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=i.axis,d=a.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!s&&this.getParsed(u),h={},f=h[c]=s?i.getPixelForDecimal(.5):i.getPixelForValue(n[c]),p=h[d]=s?a.getBasePixel():a.getPixelForValue(n[d]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),s&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return"active"!==t&&(r.radius=0),r.radius+=Qr(n&&n._custom,s),r}},DoughnutController:lo,LineController:co,PieController:class extends lo{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:uo,RadarController:class extends Qa{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return ea.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const i={_loop:!0,_fullLoop:s.length===r.length,options:t};this.updateElement(n,void 0,i,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,i="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=s.getPointPositionForValue(a,this.getParsed(a).r),l=i?s.xCenter:o.x,c=i?s.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,d,r)}}},ScatterController:class extends Qa{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:i}=Ys(t,n,r);if(this._drawStart=s,this._drawCount=i,Gs(t)&&(s=0,i=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:i}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=i.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=Es(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=Kr(n[f]),x=c[h]=i.getPixelForValue(n[h],b),w=c[f]=s||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(x)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[h]-v[h])>m,g&&(c.parsed=n,c.raw=l.data[b]),u&&(c.options=d||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),i=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,i)/2}}});function fo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class po{static override(e){Object.assign(po.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return fo()}parse(){return fo()}format(){return fo()}add(){return fo()}diff(){return fo()}startOf(){return fo()}endOf(){return fo()}}var go=po;function mo(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?Us:Fs;if(!r){const r=a(i,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,i=n.slice(0,r.lo+1).reverse().findIndex((e=>!Kr(e[t.axis])));r.lo-=Math.max(0,i);const a=n.slice(r.hi).findIndex((e=>!Kr(e[t.axis])));r.hi+=Math.max(0,a)}return r}if(s._sharedOptions){const e=i[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(i,t,n-r),s=a(i,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:i.length-1}}function yo(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=mo(i[o],t,a,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function vo(e,t,n,r,s){const i=[];if(!s&&!e.isPointInArea(t))return i;return yo(e,n,t,(function(n,a,o){(s||_i(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:a,index:o})}),!0),i}function bo(e,t,n,r,s,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return yo(e,n,t,(function(n,c,d){const u=n.inRange(t.x,t.y,s);if(r&&!u)return;const h=n.getCenterPoint(s);if(!(!!i||e.isPointInArea(h))&&!u)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:d}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:d})})),a}function xo(e,t,n,r,s,i){return i||e.isPointInArea(t)?"r"!==n||r?bo(e,t,n,r,s,i):function(e,t,n,r){let s=[];return yo(e,n,t,(function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=Ms(e,{x:t.x,y:t.y});Ds(l,a,o)&&s.push({element:e,datasetIndex:n,index:i})})),s}(e,t,n,s):[]}function wo(e,t,n,r,s){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return yo(e,n,t,((e,r,l)=>{e[a]&&e[a](t[n],s)&&(i.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))})),r&&!o?[]:i}var _o={evaluateInteractionItems:yo,modes:{index(e,t,n,r){const s=pa(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?vo(e,s,i,r,a):xo(e,s,i,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const s=pa(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?vo(e,s,i,r,a):xo(e,s,i,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>vo(e,pa(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=pa(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return xo(e,s,i,n.intersect,r,a)},x:(e,t,n,r)=>wo(e,pa(t,e),"x",n.intersect,r),y:(e,t,n,r)=>wo(e,pa(t,e),"y",n.intersect,r)}};const ko=["left","top","right","bottom"];function So(e,t){return e.filter((e=>e.pos===t))}function jo(e,t){return e.filter((e=>-1===ko.indexOf(e.pos)&&e.box.axis===t))}function No(e,t){return e.sort(((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight}))}function Eo(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!ko.includes(r))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:a&&t.availableHeight)}return n}function Co(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Po(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Oo(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!Yr(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[s]+=n.size}i.getPadding&&Po(a,i.getPadding());const o=Math.max(0,t.outerWidth-Co(a,e,"left","right")),l=Math.max(0,t.outerHeight-Co(a,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function To(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Mo(e,t,n,r){const s=[];let i,a,o,l,c,d;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,To(o.horizontal,t));const{same:a,other:u}=Oo(t,n,o,r);c|=a&&s.length,d=d||u,l.fullSize||s.push(o)}return c&&Mo(s,t,n,r)||d}function Ro(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function Lo(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,i=l.size||e.height;hs(l.start)&&(a=l.start),e.fullSize?Ro(e,s.left,a,n.outerWidth-s.right-s.left,i):Ro(e,t.left+l.placed,a,r,i),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;hs(l.start)&&(i=l.start),e.fullSize?Ro(e,i,s.top,a,n.outerHeight-s.bottom-s.top):Ro(e,i,t.top+l.placed,a,r),l.start=i,l.placed+=r,i=e.right}}t.x=i,t.y=a}var Ao={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=Ii(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,i,a,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=No(t.filter((e=>e.box.fullSize)),!0),r=No(So(t,"left"),!0),s=No(So(t,"right")),i=No(So(t,"top"),!0),a=No(So(t,"bottom")),o=jo(t,"x"),l=jo(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:So(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;ts(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},s);Po(h,Ii(r));const f=Object.assign({maxPadding:h,w:i,h:a,x:s.left,y:s.top},s),p=Eo(l.concat(c),u);Mo(o.fullSize,f,u,p),Mo(l,f,u,p),Mo(c,f,u,p)&&Mo(l,f,u,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Lo(o.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Lo(o.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ts(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Do{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Io extends Do{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $o="$chartjs",zo={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fo=e=>null===e||""===e;const Uo=!!va&&{passive:!0};function Bo(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Uo)}function Vo(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Ho(e,t,n){const r=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Vo(n.addedNodes,r),t=t&&!Vo(n.removedNodes,r);t&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}function Wo(e,t,n){const r=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Vo(n.removedNodes,r),t=t&&!Vo(n.addedNodes,r);t&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}const qo=new Map;let Ko=0;function Jo(){const e=window.devicePixelRatio;e!==Ko&&(Ko=e,qo.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Yo(e,t,n){const r=e.canvas,s=r&&ca(r);if(!s)return;const i=qs(((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)}));return a.observe(s),function(e,t){qo.size||window.addEventListener("resize",Jo),qo.set(e,t)}(e,i),a}function Go(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){qo.delete(e),qo.size||window.removeEventListener("resize",Jo)}(e)}function Xo(e,t,n){const r=e.canvas,s=qs((t=>{null!==e.ctx&&n(function(e,t){const n=zo[e.type]||e.type,{x:r,y:s}=pa(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,Uo)}(r,t,s),s}class Qo extends Do{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[$o]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Fo(s)){const t=ba(e,"width");void 0!==t&&(e.width=t)}if(Fo(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=ba(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[$o])return!1;const n=t[$o].initial;["height","width"].forEach((e=>{const r=n[e];Kr(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[$o],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:Ho,detach:Wo,resize:Yo}[t]||Xo;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Go,detach:Go,resize:Go}[t]||Bo)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return ma(e,t,n,r)}isAttached(e){const t=e&&ca(e);return!(!t||!t.isConnected)}}class Zo{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Es(this.x)&&Es(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function el(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return function(e,t,n,r){let s,i=0,a=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===a&&(t.push(e[s]),i++,a=n[i*r])}(t,c,i,a/s),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const i=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>s)return e}return Math.max(s,1)}(i,t,s);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(tl(t,c,d,Kr(r)?0:o-r,o),e=0,n=a-1;e<n;e++)tl(t,c,d,i[e],i[e+1]);return tl(t,c,d,l,Kr(r)?t.length:l+r),c}return tl(t,c,d),c}function tl(e,t,n,r,s){const i=Qr(r,0),a=Math.min(Qr(s,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=i;c<0;)d++,c=Math.round(i+d*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),d++,c=Math.round(i+d*n))}const nl=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,rl=(e,t)=>Math.min(t||e,e);function sl(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function il(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<i-o||c>a+o)))return c}function al(e){return e.drawTicks?e.tickLength:0}function ol(e,t){if(!e.display)return 0;const n=$i(e.font,t),r=Ii(e.padding);return(Jr(e.text)?e.text.length:1)*n.lineHeight+r.height}function ll(e,t,n){let r=Ks(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class cl extends Zo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Xr(e,Number.POSITIVE_INFINITY),t=Xr(t,Number.NEGATIVE_INFINITY),n=Xr(n,Number.POSITIVE_INFINITY),r=Xr(r,Number.NEGATIVE_INFINITY),{min:Xr(e,n),max:Xr(t,r),minDefined:Gr(e),maxDefined:Gr(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),i||(r=Math.max(r,t.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Xr(n,Xr(r,n)),max:Xr(r,Xr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){es(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,i=Zr(t,(s-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(i)),max:a(s,i)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?sl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=el(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){es(this.options.afterUpdate,[this])}beforeSetDimensions(){es(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){es(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),es(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){es(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=es(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){es(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){es(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=rl(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let i,a,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Is(this.chart.width-d,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),d+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-al(e.grid)-t.padding-ol(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=Os(Math.min(Math.asin(Is((c.highest.height+6)/i,-1,1)),Math.asin(Is(a/o,-1,1))-Math.asin(Is(u/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){es(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){es(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=ol(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=al(s)+i):(e.height=this.maxHeight,e.width=al(s)+i),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:i}=this._getLabelSizes(),o=2*n.padding,l=Ps(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(a){const t=n.mirror?0:d*s.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+d*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===s?u=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+i,this.paddingBottom=r+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){es(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Kr(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=sl(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,i=[],a=[],o=Math.floor(t/rl(t,n));let l,c,d,u,h,f,p,g,m,y,v,b=0,x=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=s[f]=s[f]||{data:{},gc:[]},g=h.lineHeight,m=y=0,Kr(u)||Jr(u)){if(Jr(u))for(c=0,d=u.length;c<d;++c)v=u[c],Kr(v)||Jr(v)||(m=mi(r,p.data,p.gc,m,v),y+=g)}else m=mi(r,p.data,p.gc,m,u),y=g;i.push(m),a.push(y),b=Math.max(m,b),x=Math.max(y,x)}!function(e,t){ts(e,(e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}}))}(s,t);const w=i.indexOf(b),_=a.indexOf(x),k=e=>({width:i[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Is(this._alignToPixels?vi(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Fi(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Fi(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Ps(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),i=e.autoSkipPadding||0,a=s?s.widest.width+i:0,o=s?s.highest.height+i:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:i,border:a}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=al(s),u=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,g=function(e){return vi(n,e,f)};let m,y,v,b,x,w,_,k,S,j,N,E;if("top"===i)m=g(this.bottom),w=this.bottom-d,k=m-p,j=g(e.top)+p,E=e.bottom;else if("bottom"===i)m=g(this.top),j=e.top,E=g(e.bottom)-p,w=m+p,k=this.top+d;else if("left"===i)m=g(this.right),x=this.right-d,_=m-p,S=g(e.left)+p,N=e.right;else if("right"===i)m=g(this.left),S=e.left,N=g(e.right)-p,x=m+p,_=this.left+d;else if("x"===t){if("center"===i)m=g((e.top+e.bottom)/2+.5);else if(Yr(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}j=e.top,E=e.bottom,w=m+p,k=w+d}else if("y"===t){if("center"===i)m=g((e.left+e.right)/2);else if(Yr(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}x=m-p,_=x-d,S=e.left,N=e.right}const C=Qr(r.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=P){const e=this.getContext(y),t=s.setContext(e),r=a.setContext(e),i=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=il(this,y,o),void 0!==v&&(b=vi(n,v,i),l?x=_=S=N=b:w=k=j=E=b,u.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:S,y1:j,x2:N,y2:E,width:i,color:c,borderDash:d,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=s,u=al(n.grid),h=u+c,f=d?-c:h,p=-Ps(this.labelRotation),g=[];let m,y,v,b,x,w,_,k,S,j,N,E,C="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(Yr(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-h;else if(Yr(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const P=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){v=a[m],b=v.label;const e=s.setContext(this.getContext(m));k=this.getPixelForTick(m)+s.labelOffset,S=this._resolveTickFontOptions(m),j=S.lineHeight,N=Jr(b)?b.length:1;const t=N/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=_;if(i?(x=k,"inner"===_&&(h=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),E="top"===r?"near"===l||0!==p?-N*j+j/2:"center"===l?-P.highest.height/2-t*j+j:-P.highest.height+j/2:"near"===l||0!==p?j/2:"center"===l?P.highest.height/2-t*j:P.highest.height-N*j,d&&(E*=-1),0===p||e.showLabelBackdrop||(x+=j/2*Math.sin(p))):(w=k,E=(1-N)*j/2),e.showLabelBackdrop){const t=Ii(e.backdropPadding),n=P.heights[m],r=P.widths[m];let s=E-t.top,i=0-t.left;switch(C){case"middle":s-=n/2;break;case"bottom":s-=n}switch(_){case"center":i-=r/2;break;case"right":i-=r;break;case"inner":m===y-1?i-=r:m>0&&(i-=r/2)}u={left:i,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:E,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[x,w],backdrop:u}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ps(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,i=e+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,i;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,i=r.length;s<i;++s){const e=r[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),i=n.display?s.width:0;if(!i)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=vi(e,this.left,i)-i/2,c=vi(e,this.right,a)+a/2,d=u=o):(d=vi(e,this.top,i)-i/2,u=vi(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&ki(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;Pi(t,s.label,0,s.textOffset,n,e)}n&&Si(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=$i(n.font),i=Ii(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||Yr(t)?(o+=i.bottom,Jr(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,f,p=0;const g=a-s,m=o-i;if(e.isHorizontal()){if(h=Js(r,i,o),Yr(n)){const e=Object.keys(n)[0],r=n[e];f=d[e].getPixelForValue(r)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:nl(e,n,t);u=o-i}else{if(Yr(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:nl(e,n,t);f=Js(r,a,s),p="left"===n?-xs:xs}return{titleX:h,titleY:f,maxWidth:u,rotation:p}}(this,o,t,a);Pi(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:u,textAlign:ll(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Qr(e.grid&&e.grid.z,-1),r=Qr(e.border&&e.border.z,0);return this._isVisible()&&this.draw===cl.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,i;for(s=0,i=t.length;s<i;++s){const i=t[s];i[n]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return $i(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dl{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,i=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=as(Object.create(null),[n?gi.get(n):{},gi.get(t),e.defaults]);gi.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");gi.route(i,s,l,o)}))}(t,e.defaultRoutes);e.descriptors&&gi.describe(t,e.descriptors)}(e,i,n),this.override&&gi.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in gi[r]&&(delete gi[r][n],this.override&&delete di[n])}}class ul{constructor(){this.controllers=new dl(Qa,"datasets",!0),this.elements=new dl(Zo,"elements"),this.plugins=new dl(Object,"plugins"),this.scales=new dl(cl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):ts(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=us(e);es(n["before"+r],[],n),t[e](n),es(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var hl=new ul;class fl{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===es(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){Kr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=Qr(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(hl.plugins.items);for(let i=0;i<r.length;i++)n.push(hl.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const e=s[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:i}=t;const a=[],o=e.getContext();for(const l of s){const t=l.id,s=pl(n[t],r);null!==s&&a.push({plugin:l,options:gl(e.config,{plugin:l,local:i[t]},s,o)})}return a}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function pl(e,t){return t||!1!==e?!0===e?{}:e:null}function gl(e,t,n,r){let{plugin:s,local:i}=t;const a=e.pluginScopeKeys(s),o=e.getOptionScopes(n,a);return i&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ml(e,t){const n=gi.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function yl(e){if("x"===e||"y"===e||"r"===e)return e}function vl(e){if(yl(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||("top"===(s=i.position)||"bottom"===s?"x":"left"===s||"right"===s?"y":void 0)||e.length>1&&yl(e[0].toLowerCase());if(t)return t}var s;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function bl(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function xl(e,t){const n=di[e.type]||{scales:{}},r=t.scales||{},s=ml(e.type,t),i=Object.create(null);return Object.keys(r).forEach((t=>{const a=r[t];if(!Yr(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=vl(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return bl(e,"x",n[0])||bl(e,"y",n[0])}return{}}(t,e),gi.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};i[t]=os(Object.create(null),[{axis:o},a,c[o],c[l]])})),e.data.datasets.forEach((n=>{const s=n.type||e.type,a=n.indexAxis||ml(s,t),o=(di[s]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;i[s]=i[s]||Object.create(null),os(i[s],[{axis:t},r[s],o[e]])}))})),Object.keys(i).forEach((e=>{const t=i[e];os(t,[gi.scales[t.type],gi.scale])})),i}function wl(e){const t=e.options||(e.options={});t.plugins=Qr(t.plugins,{}),t.scales=xl(e,t)}function _l(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const kl=new Map,Sl=new Set;function jl(e,t){let n=kl.get(e);return n||(n=t(),kl.set(e,n),Sl.add(n)),n}const Nl=(e,t,n)=>{const r=ds(t,n);void 0!==r&&e.add(r)};class El{constructor(e){this._config=function(e){return(e=e||{}).data=_l(e.data),wl(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=_l(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),wl(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return jl(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return jl(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return jl(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return jl(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>Nl(o,e,t)))),t.forEach((e=>Nl(o,r,e))),t.forEach((e=>Nl(o,di[s]||{},e))),t.forEach((e=>Nl(o,gi,e))),t.forEach((e=>Nl(o,ui,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Sl.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,di[t]||{},gi.datasets[t]||{},{type:t},gi,ui]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:i,subPrefixes:a}=Cl(this._resolverCache,e,r);let o=i;if(function(e,t){const{isScriptable:n,isIndexable:r}=Vi(e);for(const s of t){const t=n(s),i=r(s),a=(i||t)&&e[s];if(t&&(fs(a)||Pl(a))||i&&Jr(a))return!0}return!1}(i,t)){s.$shared=!1;o=Bi(i,n=fs(n)?n():n,this.createResolver(e,n,a))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=Cl(this._resolverCache,e,n);return Yr(t)?Bi(s,t,void 0,r):s}}function Cl(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);if(!i){i={resolver:Ui(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(s,i)}return i}const Pl=e=>Yr(e)&&Object.getOwnPropertyNames(e).some((t=>fs(e[t])));const Ol=["top","bottom","left","right","chartArea"];function Tl(e,t){return"top"===e||"bottom"===e||-1===Ol.indexOf(e)&&"x"===t}function Ml(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Rl(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),es(n&&n.onComplete,[e],t)}function Ll(e){const t=e.chart,n=t.options.animation;es(n&&n.onProgress,[e],t)}function Al(e){return la()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Dl={},Il=e=>{const t=Al(e);return Object.values(Dl).filter((e=>e.canvas===t)).pop()};function $l(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const i=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=i)}}}class zl{static defaults=(()=>gi)();static instances=(()=>Dl)();static overrides=(()=>di)();static registry=(()=>hl)();static version="4.4.9";static getChart=(()=>Il)();static register(){hl.add(...arguments),Fl()}static unregister(){hl.remove(...arguments),Fl()}constructor(e,t){const n=this.config=new El(t),r=Al(e),s=Il(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!la()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Io:Qo}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=qr(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}((e=>this.update(e)),i.resizeDelay||0),this._dataChanges=[],Dl[this.id]=this,a&&o?(Da.listen(this,"complete",Rl),Da.listen(this,"progress",Ll),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return Kr(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return hl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ya(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bi(this.canvas,this.ctx),this}stop(){return Da.stop(this),this}resize(e,t){Da.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,ya(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),es(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){ts(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let s=[];t&&(s=s.concat(Object.keys(t).map((e=>{const n=t[e],r=vl(e,n),s="r"===r,i="x"===r;return{options:n,dposition:s?"chartArea":i?"bottom":"left",dtype:s?"radialLinear":i?"category":"linear"}})))),ts(s,(t=>{const s=t.options,i=s.id,a=vl(i,s),o=Qr(s.type,t.dtype);void 0!==s.position&&Tl(s.position,a)===Tl(t.dposition)||(s.position=t.dposition),r[i]=!0;let l=null;if(i in n&&n[i].type===o)l=n[i];else{l=new(hl.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)})),ts(r,((e,t)=>{e||delete n[t]})),ts(n,(e=>{Ao.configure(this,e,e.options),Ao.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Ml("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const i=r.type||this.config.type;if(s.type&&s.type!==i&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=i,s.indexAxis=r.indexAxis||ml(i,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=hl.getController(i),{datasetElementType:r,dataElementType:a}=gi.datasets[i];Object.assign(t,{dataElementType:hl.getElement(a),datasetElementType:r&&hl.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){ts(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||ts(s,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ml("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ts(this.scales,(e=>{Ao.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);ps(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){$l(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let s=1;s<t;s++)if(!ps(r,n(s)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ao.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],ts(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,fs(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Da.has(this)?this.attached&&!Da.running(this)&&Da.start(this):(this.draw(),Rl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=La(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&ki(t,r),e.controller.draw(),r&&Si(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return _i(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=_o.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Fi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),i=s.controller._resolveAnimations(void 0,r);hs(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(s,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Da.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bi(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Dl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};ts(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",i)};i=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){ts(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},ts(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,i,a,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[r+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!ns(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),i=s(t,e),a=n?e:s(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,i=t,a=this._getActiveElements(e,r,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,es(s.onHover,[e,a,this],this),o&&es(s.onClick,[e,a,this],this));const c=!ns(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function Fl(){return ts(zl.instances,(e=>e._plugins.invalidate()))}function Ul(e,t,n,r){const s=Li(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const i=(n-t)/2,a=Math.min(i,r*t/2),o=e=>{const t=(n-Math.min(i,e))*r/2;return Is(e,0,Math.min(i,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:Is(s.innerStart,0,a),innerEnd:Is(s.innerEnd,0,a)}}function Bl(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Vl(e,t,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let f=0;const p=s-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const g=(p-Math.max(.001,p*u-n/gs)/u)/2,m=l+g+f,y=s-g-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=Ul(t,h,u,y-m),_=u-v,k=u-b,S=m+v/_,j=y-b/k,N=h+x,E=h+w,C=m+x/N,P=y-w/E;if(e.beginPath(),i){const t=(S+j)/2;if(e.arc(a,o,u,S,t),e.arc(a,o,u,t,j),b>0){const t=Bl(k,j,a,o);e.arc(t.x,t.y,b,j,y+xs)}const n=Bl(E,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=Bl(E,P,a,o);e.arc(t.x,t.y,w,y+xs,P+Math.PI)}const r=(y-w/h+(m+x/h))/2;if(e.arc(a,o,h,y-w/h,r,!0),e.arc(a,o,h,r,m+x/h,!0),x>0){const t=Bl(N,C,a,o);e.arc(t.x,t.y,x,C+Math.PI,m-xs)}const s=Bl(_,m,a,o);if(e.lineTo(s.x,s.y),v>0){const t=Bl(_,S,a,o);e.arc(t.x,t.y,v,m-xs,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*u+a,n=Math.sin(S)*u+o;e.lineTo(t,n);const r=Math.cos(j)*u+a,s=Math.sin(j)*u+o;e.lineTo(r,s)}e.closePath()}function Hl(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let p=t.endAngle;if(i){Vl(e,t,n,r,p,s);for(let t=0;t<i;++t)e.stroke();isNaN(o)||(p=a+(o%ms||ms))}f&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(i,a,o,r-c,n+c),l>s?(c=s/l,e.arc(i,a,l,n+c,r-c,!0)):e.arc(i,a,s,n+xs,r-xs),e.closePath(),e.clip()}(e,t,p),i||(Vl(e,t,n,r,p,s),e.stroke())}function Wl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Qr(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Qr(n.borderDash,t.borderDash)),e.lineDashOffset=Qr(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Qr(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Qr(n.borderWidth,t.borderWidth),e.strokeStyle=Qr(n.borderColor,t.borderColor)}function ql(e,t,n){e.lineTo(n.x,n.y)}function Kl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=t,l=Math.max(s,a),c=Math.min(i,o),d=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function Jl(e,t,n,r){const{points:s,options:i}=t,{count:a,start:o,loop:l,ilen:c}=Kl(s,n,r),d=function(e){return e.stepped?ji:e.tension||"monotone"===e.cubicInterpolationMode?Ni:ql}(i);let u,h,f,{move:p=!0,reverse:g}=r||{};for(u=0;u<=c;++u)h=s[(o+(g?c-u:u))%a],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,f,h,g,i.stepped),f=h);return l&&(h=s[(o+(g?c:0))%a],d(e,f,h,g,i.stepped)),!!l}function Yl(e,t,n,r){const s=t.points,{count:i,start:a,ilen:o}=Kl(s,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,f,p,g,m=0,y=0;const v=e=>(a+(c?o-e:e))%i,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(u=s[v(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=s[v(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),h=r,y=0,f=p=n),g=n}b()}function Gl(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Yl:Jl}const Xl="function"===typeof Path2D;function Ql(e,t,n,r){Xl&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),Wl(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:i}=t,a=Gl(t);for(const o of s)Wl(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Zl extends Zo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;oa(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}(n,s,i,r);return Oa(e,!0===r?[{start:a,end:o,loop:i}]:function(e,t,n,r){const s=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(r=!1,i.push({start:t%s,end:(a-1)%s,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%s,end:o%s,loop:r}),i}(n,a,o<a?o+s:o,!!e._fullLoop&&0===a&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,i=Pa(this,{property:t,start:r,end:r});if(!i.length)return;const a=[],o=function(e){return e.stepped?wa:e.tension||"monotone"===e.cubicInterpolationMode?_a:xa}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:d}=i[l],u=s[c],h=s[d];if(u===h){a.push(u);continue}const f=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Gl(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=Gl(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)i&=s(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Ql(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ec(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}class tc extends Zo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:i}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-i,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return ec(this,e,"x",t)}inYRange(e,t){return ec(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!_i(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,xi(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function nc(e,t){const{x:n,y:r,base:s,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=a/2,o=Math.min(n,s),l=Math.max(n,s),c=r-u,d=r+u):(u=i/2,o=n-u,l=n+u,c=Math.min(r,s),d=Math.max(r,s)),{left:o,top:c,right:l,bottom:d}}function rc(e,t,n,r){return e?0:Is(t,n,r)}function sc(e){const t=nc(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=Ai(r);return{t:rc(s.top,i.top,0,n),r:rc(s.right,i.right,0,t),b:rc(s.bottom,i.bottom,0,n),l:rc(s.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=Di(s),a=Math.min(t,n),o=e.borderSkipped,l=r||Yr(s);return{topLeft:rc(!l||o.top||o.left,i.topLeft,0,a),topRight:rc(!l||o.top||o.right,i.topRight,0,a),bottomLeft:rc(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:rc(!l||o.bottom||o.right,i.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function ic(e,t,n,r){const s=null===t,i=null===n,a=e&&!(s&&i)&&nc(e,r);return a&&(s||$s(t,a.left,a.right))&&(i||$s(n,a.top,a.bottom))}function ac(e,t){e.rect(t.x,t.y,t.w,t.h)}function oc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+a,radius:e.radius}}var lc=Object.freeze({__proto__:null,ArcElement:class extends Zo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:i}=Ms(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=Qr(d,o-a),f=Ds(s,a,o)&&a!==o,p=h>=ms||f,g=$s(i,l+u,c+u);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,d=(i+a+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ms?Math.floor(n/ms):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(gs,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=t;let l=t.endAngle;if(i){Vl(e,t,n,r,l,s);for(let t=0;t<i;++t)e.fill();isNaN(o)||(l=a+(o%ms||ms))}Vl(e,t,n,r,l,s),e.fill()}(e,this,o,s,i),Hl(e,this,o,s,i),e.restore()}},BarElement:class extends Zo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:i}=sc(this),a=(o=i.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Oi:ac;var o;e.save(),i.w===s.w&&i.h===s.h||(e.beginPath(),a(e,oc(i,t,s)),e.clip(),a(e,oc(s,-t,i)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,oc(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return ic(this,e,t,n)}inXRange(e,t){return ic(this,e,null,t)}inYRange(e,t){return ic(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:Zl,PointElement:tc});const cc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],dc=cc.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function uc(e){return cc[e%cc.length]}function hc(e){return dc[e%dc.length]}function fc(e){let t=0;return(n,r)=>{const s=e.getDatasetMeta(r).controller;s instanceof lo?t=function(e,t){return e.backgroundColor=e.data.map((()=>uc(t++))),t}(n,t):s instanceof uo?t=function(e,t){return e.backgroundColor=e.data.map((()=>hc(t++))),t}(n,t):s&&(t=function(e,t){return e.borderColor=uc(t),e.backgroundColor=hc(t),++t}(n,t))}}function pc(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var gc={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:s}=e.config,{elements:i}=s,a=pc(r)||(o=s)&&(o.borderColor||o.backgroundColor)||i&&pc(i)||"rgba(0,0,0,0.1)"!==gi.borderColor||"rgba(0,0,0,0.1)"!==gi.backgroundColor;var o;if(!n.forceOverride&&a)return;const l=fc(e);r.forEach(l)}};function mc(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function yc(e){e.data.datasets.forEach((e=>{mc(e)}))}var vc={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void yc(e);const r=e.width;e.data.datasets.forEach(((t,s)=>{const{_data:i,indexAxis:a}=t,o=e.getDatasetMeta(s),l=i||t.data;if("y"===zi([a,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:d,count:u}=function(e,t){const n=t.length;let r,s=0;const{iScale:i}=e,{min:a,max:o,minDefined:l,maxDefined:c}=i.getUserBounds();return l&&(s=Is(Fs(t,i.axis,a).lo,0,n-1)),r=c?Is(Fs(t,i.axis,o).hi+1,s,n)-s:n-s,{start:s,count:r}}(o,l);if(u<=(n.threshold||4*r))return void mc(t);let h;switch(Kr(i)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":h=function(e,t,n,r,s){const i=s.samples||r;if(i>=n)return e.slice(t,t+n);const a=[],o=(n-2)/(i-2);let l=0;const c=t+n-1;let d,u,h,f,p,g=t;for(a[l++]=e[g],d=0;d<i-2;d++){let r,s=0,i=0;const c=Math.floor((d+1)*o)+1+t,m=Math.min(Math.floor((d+2)*o)+1,n)+t,y=m-c;for(r=c;r<m;r++)s+=e[r].x,i+=e[r].y;s/=y,i/=y;const v=Math.floor(d*o)+1+t,b=Math.min(Math.floor((d+1)*o)+1,n)+t,{x:x,y:w}=e[g];for(h=f=-1,r=v;r<b;r++)f=.5*Math.abs((x-s)*(e[r].y-w)-(x-e[r].x)*(i-w)),f>h&&(h=f,u=e[r],p=r);a[l++]=u,g=p}return a[l++]=e[c],a}(l,d,u,r,n);break;case"min-max":h=function(e,t,n,r){let s,i,a,o,l,c,d,u,h,f,p=0,g=0;const m=[],y=t+n-1,v=e[t].x,b=e[y].x-v;for(s=t;s<t+n;++s){i=e[s],a=(i.x-v)/b*r,o=i.y;const t=0|a;if(t===l)o<h?(h=o,c=s):o>f&&(f=o,d=s),p=(g*p+i.x)/++g;else{const n=s-1;if(!Kr(c)&&!Kr(d)){const t=Math.min(c,d),r=Math.max(c,d);t!==u&&t!==n&&m.push({...e[t],x:p}),r!==u&&r!==n&&m.push({...e[r],x:p})}s>0&&n!==u&&m.push(e[n]),m.push(i),l=t,g=0,h=f=o,c=d=u=s}}return m}(l,d,u,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=h}))},destroy(e){yc(e)}};function bc(e,t,n,r){if(r)return;let s=t[e],i=n[e];return"angle"===e&&(s=As(s),i=As(i)),{property:e,start:s,end:i}}function xc(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function wc(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function _c(e,t){let n=[],r=!1;return Jr(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,i=[];return t.segments.forEach((e=>{let{start:t,end:a}=e;a=xc(t,a,s);const o=s[t],l=s[a];null!==r?(i.push({x:o.x,y:r}),i.push({x:l.x,y:r})):null!==n&&(i.push({x:n,y:o.y}),i.push({x:n,y:l.y}))})),i}(e,t),n.length?new Zl({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function kc(e){return e&&!1!==e.fill}function Sc(e,t,n){let r=e[t].fill;const s=[t];let i;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!Gr(r))return r;if(i=e[r],!i)return!1;if(i.visible)return r;s.push(r),r=i.fill}return!1}function jc(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=Qr(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(Yr(r))return!isNaN(r.value)&&r;let s=parseFloat(r);return Gr(s)&&Math.floor(s)===s?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Nc(e,t,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:a,last:o,point:l}=Ec(i,t,"x");if(!(!l||a&&o))if(a)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function Ec(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],i=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<i.length;c++){const e=i[c],t=a[e.start][n],r=a[e.end][n];if($s(s,t,r)){o=s===t,l=s===r;break}}return{first:o,last:l,point:r}}class Cc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:s,radius:i}=this;return t=t||{start:0,end:ms},e.arc(r,s,i,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function Pc(e){const{chart:t,fill:n,line:r}=e;if(Gr(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,s=[],i=r.segments,a=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const e=r[s];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(_c({x:null,y:t.bottom},r));for(let l=0;l<i.length;l++){const e=i[l];for(let t=e.start;t<=e.end;t++)Nc(s,a[t],o)}return new Zl({points:s,options:{}})}(e);if("shape"===n)return!0;const s=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,i=r.reverse?t.max:t.min,a=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Yr(e)?e.value:t.getBaseValue(),r}(n,t,i),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,i);return new Cc({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Yr(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Gr(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return s instanceof Cc?s:_c(s,r)}function Oc(e,t,n){const r=Pc(t),{chart:s,index:i,line:a,scale:o,axis:l}=t,c=a.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:f=u}=d||{},p=s.getDatasetMeta(i),g=La(s,p);r&&a.points.length&&(ki(e,n),function(e,t){const{line:n,target:r,above:s,below:i,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save(),"x"===c&&i!==s&&(Tc(e,r,a.top),Mc(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),Tc(e,r,a.bottom));Mc(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:r,above:h,below:f,area:n,scale:o,axis:l,clip:g}),Si(e))}function Tc(e,t,n){const{segments:r,points:s}=t;let i=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],d=s[xc(r,l,s)];i?(e.moveTo(c.x,c.y),i=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Mc(e,t){const{line:n,target:r,property:s,color:i,scale:a,clip:o}=t,l=function(e,t,n){const r=e.segments,s=e.points,i=t.points,a=[];for(const o of r){let{start:e,end:r}=o;r=xc(e,r,s);const l=bc(n,s[e],s[r],o.loop);if(!t.segments){a.push({source:o,target:l,start:s[e],end:s[r]});continue}const c=Pa(t,l);for(const t of c){const e=bc(n,i[t.start],i[t.end],t.loop),r=Ca(o,s,e);for(const s of r)a.push({source:s,target:t,start:{[n]:wc(l,e,"start",Math.max)},end:{[n]:wc(l,e,"end",Math.min)}})}}return a}(n,r,s);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=i}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,Rc(e,a,o,l&&bc(s,u,h)),e.beginPath();const f=!!n.pathSegment(e,c);let p;if(l){f?e.closePath():Lc(e,r,h,s);const t=!!r.pathSegment(e,d,{move:f,reverse:!0});p=f&&t,p||Lc(e,r,u,s)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Rc(e,t,n,r){const s=t.chart.chartArea,{property:i,start:a,end:o}=r||{};if("x"===i||"y"===i){let t,r,l,c;"x"===i?(t=a,r=s.top,l=o,c=s.bottom):(t=s.left,r=a,l=s.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function Lc(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var Ac={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let i,a,o,l;for(a=0;a<r;++a)i=e.getDatasetMeta(a),o=i.dataset,l=null,o&&o.options&&o instanceof Zl&&(l={visible:e.isDatasetVisible(a),index:a,fill:jc(o,a,r),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=l,s.push(l);for(a=0;a<r;++a)l=s[a],l&&!1!==l.fill&&(l.fill=Sc(s,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,s=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=s.length-1;a>=0;--a){const t=s[a].$filler;t&&(t.line.updateControlPoints(i,t.axis),r&&t.fill&&Oc(e.ctx,t,i))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const t=r[s].$filler;kc(t)&&Oc(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;kc(r)&&"beforeDatasetDraw"===n.drawTime&&Oc(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Dc=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class Ic extends Zo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=es(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=$i(n.font),s=r.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Dc(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+s.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>i)&&(d+=c,l[l.length-(f>0?0:1)]=0,h+=c,u++),o[f]={left:0,top:h,row:u,width:p,height:r},l[l.length-1]+=p+a})),d}_fitCols(e,t,n,r){const{ctx:s,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let d=a,u=0,h=0,f=0,p=0;return this.legendItems.forEach(((e,i)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,s){const i=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(s).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=$c(t,n));return r}(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,s,e,r);i>0&&h+m+2*a>c&&(d+=u+a,l.push({width:u,height:h}),f+=u+a,p++,u=h=0),o[i]={left:f,top:h,col:p,width:g,height:m},u=Math.max(u,g),h+=m+a})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,i=ka(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=Js(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,a=Js(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+r}else{let s=0,a=Js(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,a=Js(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+r,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;ki(e,this),this._draw(),Si(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:i}=e,a=gi.color,o=ka(e.rtl,this.left,this.width),l=$i(i.font),{padding:c}=i,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Dc(i,d),m=this.isHorizontal(),y=this._computeTitleHeight();h=m?{x:Js(s,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Js(s,this.top+y+c,this.bottom-t[0].height),line:0},Sa(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach(((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=i.textAlign)),k=f+u+w;let S=h.x,j=h.y;o.setWidth(this.width),m?x>0&&S+k+c>this.right&&(j=h.y+=v,h.line++,S=h.x=Js(s,this.left+c,this.right-n[h.line])):x>0&&j+v>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,j=h.y=Js(s,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const s=Qr(n.lineWidth,1);if(r.fillStyle=Qr(n.fillStyle,a),r.lineCap=Qr(n.lineCap,"butt"),r.lineDashOffset=Qr(n.lineDashOffset,0),r.lineJoin=Qr(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=Qr(n.strokeStyle,a),r.setLineDash(Qr(n.lineDash,[])),i.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,f/2);wi(r,a,l,t+u,i.pointStyleWidth&&f)}else{const i=t+Math.max((d-p)/2,0),a=o.leftForLtr(e,f),l=Di(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?Oi(r,{x:a,y:i,w:f,h:p,radius:l}):r.rect(a,i,f,p),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(S),j,b),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+u,m?S+k:this.right,e.rtl),function(e,t,n){Pi(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),j,b),m)h.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=$c(b,e)+c}else h.y+=v})),ja(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=$i(t.font),r=Ii(t.padding);if(!t.display)return;const s=ka(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Js(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+Js(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Js(a,d,d+u);i.textAlign=s.textAlign(Ks(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,Pi(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=$i(e.font),n=Ii(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if($s(e,this.left,this.right)&&$s(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],$s(e,r.left,r.left+r.width)&&$s(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!s&&es(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&es(t.onHover,[e,n,this],this)}else n&&es(t.onClick,[e,n,this],this)}}function $c(e,t){return t*(e.text?e.text.length:0)}var zc={id:"legend",_element:Ic,start(e,t,n){const r=e.legend=new Ic({ctx:e.ctx,options:n,chart:e});Ao.configure(e,r,n),Ao.addBox(e,r)},stop(e){Ao.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Ao.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=Ii(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Fc extends Zo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=Jr(n.text)?n.text.length:1;this._padding=Ii(n.padding);const s=r*$i(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:i}=this,a=i.align;let o,l,c,d=0;return this.isHorizontal()?(l=Js(a,n,s),c=t+e,o=s-n):("left"===i.position?(l=n+e,c=Js(a,r,t),d=-.5*gs):(l=s-e,c=Js(a,t,r),d=.5*gs),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=$i(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(r);Pi(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:Ks(t.align),textBaseline:"middle",translation:[s,i]})}}var Uc={id:"title",_element:Fc,start(e,t,n){!function(e,t){const n=new Fc({ctx:e.ctx,options:t,chart:e});Ao.configure(e,n,t),Ao.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Ao.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Ao.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bc=new WeakMap;var Vc={id:"subtitle",start(e,t,n){const r=new Fc({ctx:e.ctx,options:n,chart:e});Ao.configure(e,r,n),Ao.addBox(e,r),Bc.set(e,r)},stop(e){Ao.removeBox(e,Bc.get(e)),Bc.delete(e)},beforeUpdate(e,t,n){const r=Bc.get(e);Ao.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hc={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++i}}if(0===i||0===r.size)return!1;const a=[...r].reduce(((e,t)=>e+t))/r.size;return{x:a,y:s/i}},nearest(e,t){if(!e.length)return!1;let n,r,s,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=Rs(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function Wc(e,t){return t&&(Jr(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function qc(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Kc(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Jc(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=$i(t.bodyFont),c=$i(t.titleFont),d=$i(t.footerFont),u=i.length,h=s.length,f=r.length,p=Ii(t.padding);let g=p.height,m=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,ts(e.title,b),n.font=l.string,ts(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?a+2+t.boxPadding:0,ts(r,(e=>{ts(e.before,b),ts(e.lines,b),ts(e.after,b)})),v=0,n.font=d.string,ts(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Yc(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),function(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;return"left"===e&&s+i+a>t.width||"right"===e&&s-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function Gc(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Yc(e,t,n,r),yAlign:r}}function Xc(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=Di(a);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const g=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+s:"right"===o&&(p+=Math.max(u,f)+s),{x:Is(p,0,r.width-t.width),y:Is(g,0,r.height-t.height)}}function Qc(e,t,n){const r=Ii(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Zc(e){return Wc([],qc(e))}function ed(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const td={beforeTitle:Wr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Wr,beforeBody:Wr,beforeLabel:Wr,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Kr(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Wr,afterBody:Wr,beforeFooter:Wr,footer:Wr,afterFooter:Wr};function nd(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?td[t].call(n,r):s}class rd extends Zo{static positioners=(()=>Hc)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new Fa(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Fi(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=nd(n,"beforeTitle",this,e),s=nd(n,"title",this,e),i=nd(n,"afterTitle",this,e);let a=[];return a=Wc(a,qc(r)),a=Wc(a,qc(s)),a=Wc(a,qc(i)),a}getBeforeBody(e,t){return Zc(nd(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return ts(e,(e=>{const t={before:[],lines:[],after:[]},s=ed(n,e);Wc(t.before,qc(nd(s,"beforeLabel",this,e))),Wc(t.lines,nd(s,"label",this,e)),Wc(t.after,qc(nd(s,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return Zc(nd(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=nd(n,"beforeFooter",this,e),s=nd(n,"footer",this,e),i=nd(n,"afterFooter",this,e);let a=[];return a=Wc(a,qc(r)),a=Wc(a,qc(s)),a=Wc(a,qc(i)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(Kc(this.chart,t[a]));return e.filter&&(l=l.filter(((t,r,s)=>e.filter(t,r,s,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),ts(l,(t=>{const n=ed(e.callbacks,t);r.push(nd(n,"labelColor",this,t)),s.push(nd(n,"labelPointStyle",this,t)),i.push(nd(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,i=[];if(r.length){const e=Hc[n.position].call(this,r,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=Jc(this,n),a=Object.assign({},e,t),o=Gc(this.chart,n,a),l=Xc(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=i,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=Di(a),{x:u,y:h}=e,{width:f,height:p}=t;let g,m,y,v,b,x;return"center"===s?(b=h+p/2,"left"===r?(g=u,m=g-i,v=b+i,x=b-i):(g=u+f,m=g+i,v=b-i,x=b+i),y=g):(m="left"===r?u+Math.max(o,c)+i:"right"===r?u+f-Math.max(l,d)-i:this.caretX,"top"===s?(v=h,b=v-i,g=m-i,y=m+i):(v=h+p,b=v+i,g=m+i,y=m-i),x=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,s=r.length;let i,a,o;if(s){const l=ka(n.rtl,this.x,this.width);for(e.x=Qc(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=$i(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,s){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=$i(s.bodyFont),d=Qc(this,"left",s),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=f+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,xi(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,xi(e,t,n,c)}else{e.lineWidth=Yr(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),a=Di(i.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Oi(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Oi(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=$i(n.bodyFont);let u=d.lineHeight,h=0;const f=ka(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+u/2),e.y+=u+s},g=f.textAlign(i);let m,y,v,b,x,w,_;for(t.textAlign=i,t.textBaseline="middle",t.font=d.string,e.x=Qc(this,g,n),t.fillStyle=n.bodyColor,ts(this.beforeBody,p),h=a&&"right"!==g?"center"===i?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,ts(m.before,p),v=m.lines,a&&v.length&&(this._drawColorBox(t,e,b,f,n),u=Math.max(d.lineHeight,o)),x=0,_=v.length;x<_;++x)p(v[x]),u=d.lineHeight;ts(m.after,p)}h=0,u=d.lineHeight,ts(this.afterBody,p),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let i,a;if(s){const o=ka(n.rtl,this.x,this.width);for(e.x=Qc(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=$i(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<s;++a)t.fillText(r[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=Di(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+d,o),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l-u,o),t.quadraticCurveTo(a+l,o,a+l,o+u),"center"===i&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(a,o+d),t.quadraticCurveTo(a,o,a+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=Hc[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=Jc(this,e),a=Object.assign({},n,this._size),o=Gc(t,e,a),l=Xc(e,a,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=Ii(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),Sa(e,t.textDirection),s.y+=i.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),ja(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),s=!ns(n,r),i=this._positionChanged(r,t);(s||i)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],i=this._getActiveElements(e,s,t,n),a=this._positionChanged(i,e),o=t||!ns(i,s)||a;return o&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const i=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,i=Hc[s.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}var sd={id:"tooltip",_element:rd,positioners:Hc,afterInit(e,t,n){n&&(e.tooltip=new rd({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:td},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},id=Object.freeze({__proto__:null,Colors:gc,Decimation:vc,Filler:Ac,Legend:zc,SubTitle:Vc,Title:Uc,Tooltip:sd});function ad(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function od(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ld extends cl{static id="category";static defaults=(()=>({ticks:{callback:od}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Kr(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Is(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:ad(n,e,Qr(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){return od.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cd(e,t){const n=[],{bounds:r,step:s,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=s||1,f=c-1,{min:p,max:g}=t,m=!Kr(i),y=!Kr(a),v=!Kr(l),b=(g-p)/(d+1);let x,w,_,k,S=Ns((g-p)/f/h)*h;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=Ns(k*S/f/h)*h),Kr(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===r?(w=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(w=p,_=g),m&&y&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/s,S/1e3)?(k=Math.round(Math.min((a-i)/S,c)),S=(a-i)/k,w=i,_=a):v?(w=m?i:w,_=y?a:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=js(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const j=Math.max(Ts(S),Ts(w));x=Math.pow(10,Kr(o)?j:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let N=0;for(m&&(u&&w!==i?(n.push({value:i}),w<i&&N++,js(Math.round((w+N*S)*x)/x,i,dd(i,b,e))&&N++):w<i&&N++);N<k;++N){const e=Math.round((w+N*S)*x)/x;if(y&&e>a)break;n.push({value:e})}return y&&u&&_!==a?n.length&&js(n[n.length-1].value,a,dd(a,b,e))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function dd(e,t,n){let{horizontal:r,minRotation:s}=n;const i=Ps(s),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}class ud extends cl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Kr(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const i=e=>r=t?r:e,a=e=>s=n?s:e;if(e){const e=Ss(r),t=Ss(s);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||i(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=cd({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Cs(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return oi(e,this.chart.options.locale,this.options.ticks.format)}}class hd extends ud{static id="linear";static defaults=(()=>({ticks:{callback:ci.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gr(e)?e:0,this.max=Gr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Ps(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const fd=e=>Math.floor(ks(e)),pd=(e,t)=>Math.pow(10,fd(e)+t);function gd(e){return 1===e/Math.pow(10,fd(e))}function md(e,t,n){const r=Math.pow(10,n),s=Math.floor(e/r);return Math.ceil(t/r)-s}function yd(e,t){let{min:n,max:r}=t;n=Xr(e.min,n);const s=[],i=fd(n);let a=function(e,t){let n=fd(t-e);for(;md(e,t,n)>10;)n++;for(;md(e,t,n)<10;)n--;return Math.min(n,fd(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=i>a?Math.pow(10,i):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,a)),f=Xr(e.min,Math.round((c+u+h*Math.pow(10,a))*o)/o);for(;f<r;)s.push({value:f,major:gd(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+u+h*Math.pow(10,a))*o)/o;const p=Xr(e.max,f);return s.push({value:p,major:gd(p),significand:h}),s}class vd extends cl{static id="logarithmic";static defaults=(()=>({ticks:{callback:ci.formatters.logarithmic,major:{enabled:!0}}}))();constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=ud.prototype.parse.apply(this,[e,t]);if(0!==n)return Gr(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gr(e)?Math.max(0,e):null,this.max=Gr(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Gr(this._userMin)&&(this.min=e===pd(this.min,0)?pd(this.min,-1):pd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=t=>n=e?n:t,i=e=>r=t?r:e;n===r&&(n<=0?(s(1),i(10)):(s(pd(n,-1)),i(pd(r,1)))),n<=0&&s(pd(r,-1)),r<=0&&i(pd(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=yd({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Cs(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":oi(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ks(e),this._valueRange=ks(this.max)-ks(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ks(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function bd(e){const t=e.ticks;if(t.display&&e.display){const e=Ii(t.backdropPadding);return Qr(t.font&&t.font.size,gi.font.size)+e.height}return 0}function xd(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function wd(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],i=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?gs/i:0;for(let u=0;u<i;u++){const i=a.setContext(e.getPointLabelContext(u));s[u]=i.padding;const h=e.getPointPosition(u,e.drawingArea+s[u],o),f=$i(i.font),p=(l=e.ctx,c=f,d=Jr(d=e._pointLabels[u])?d:[d],{w:yi(l,c.string,d),h:d.length*c.lineHeight});r[u]=p;const g=As(e.getIndexAngle(u)+o),m=Math.round(Os(g));_d(n,t,g,xd(m,h.x,p.w,0,180),xd(m,h.y,p.h,90,270))}var l,c,d;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],s=e._pointLabels.length,i=e.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:bd(i)/2,additionalAngle:a?gs/s:0};let c;for(let d=0;d<s;d++){l.padding=n[d],l.size=t[d];const s=kd(e,d,l);r.push(s),"auto"===o&&(s.visible=Sd(s,c),s.visible&&(c=s))}return r}(e,r,s)}function _d(e,t,n,r,s){const i=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/a,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function kd(e,t,n){const r=e.drawingArea,{extra:s,additionalAngle:i,padding:a,size:o}=n,l=e.getPointPosition(t,r+s+a,i),c=Math.round(Os(As(l.angle+xs))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function Sd(e,t){if(!t)return!0;const{left:n,top:r,right:s,bottom:i}=e;return!(_i({x:n,y:r},t)||_i({x:n,y:i},t)||_i({x:s,y:r},t)||_i({x:s,y:i},t))}function jd(e,t,n){const{left:r,top:s,right:i,bottom:a}=n,{backdropColor:o}=t;if(!Kr(o)){const n=Di(t.borderRadius),l=Ii(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=s-l.top,u=i-r+l.width,h=a-s+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),Oi(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function Nd(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,ms);else{let n=e.getPointPosition(0,t);s.moveTo(n.x,n.y);for(let i=1;i<r;i++)n=e.getPointPosition(i,t),s.lineTo(n.x,n.y)}}class Ed extends ud{static id="radialLinear";static defaults=(()=>({display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ci.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}))();static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ii(bd(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Gr(e)&&!isNaN(e)?e:0,this.max=Gr(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bd(this.options))}generateTickLabels(e){ud.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=es(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?wd(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return As(e*(ms/(this._pointLabels.length||1))+Ps(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Kr(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Kr(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Fi(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-xs+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Nd(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,i=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const t=e._pointLabelItems[s];if(!t.visible)continue;const i=r.setContext(e.getPointLabelContext(s));jd(n,i,t);const a=$i(i.font),{x:o,y:l,textAlign:c}=t;Pi(n,e._pointLabels[s],o,l+a.lineHeight/2,a,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=s.setContext(n);!function(e,t,n,r,s){const i=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),Nd(e,n,a,r),i.closePath(),i.stroke(),i.restore())}(this,a,o,i,l)}})),n.display){for(e.save(),a=i-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:s,lineWidth:i}=r;i&&s&&(e.lineWidth=i,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=$i(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,i=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=Ii(o.backdropPadding);e.fillRect(-i/2-t.left,-s-l.size/2-t.top,i+t.width,l.size+t.height)}Pi(e,r.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}const Cd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pd=Object.keys(Cd);function Od(e,t){return e-t}function Td(e,t){if(Kr(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),Gr(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(s&&(a="week"!==s||!Es(i)&&!0!==i?n.startOf(a,s):n.startOf(a,"isoWeek",i)),+a)}function Md(e,t,n,r){const s=Pd.length;for(let i=Pd.indexOf(e);i<s-1;++i){const e=Cd[Pd[i]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return Pd[i]}return Pd[s-1]}function Rd(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=zs(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function Ld(e,t,n){const r=[],s={},i=t.length;let a,o;for(a=0;a<i;++a)o=t[a],s[o]=a,r.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class Ad extends cl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new go(e.adapters.date);r.init(t),os(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Td(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(s=Math.max(s,e.max))}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=Gr(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=Gr(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,i=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?Md(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let i=Pd.length-1;i>=Pd.indexOf(n);i--){const n=Pd[i];if(Cd[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return Pd[n?Pd.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Pd.indexOf(e)+1,n=Pd.length;t<n;++t)if(Cd[Pd[t]].common)return Pd[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),Ld(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),s=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const i=n.length<3?.5:.25;r=Is(r,0,i),s=Is(s,0,i),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,i=s.unit||Md(s.minUnit,t,n,this._getLabelCapacity(t)),a=Qr(r.ticks.stepSize,1),o="week"===i&&s.isoWeekday,l=Es(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const f="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,a,i),u++)Rd(c,d,f);return d!==n&&"ticks"!==r.bounds&&1!==u||Rd(c,d,f),Object.keys(c).sort(Od).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,i=s.ticks.callback;if(i)return es(i,[e,t,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],d=l&&a[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Ps(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),i=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*i,h:n*i+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,Ld(this,[e],this._majorUnit),r),i=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Td(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Hs(e.sort(Od))}}function Dd(e,t,n){let r,s,i,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=Fs(e,"pos",t)),({pos:r,time:i}=e[o]),({pos:s,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=Fs(e,"time",t)),({time:r,pos:i}=e[o]),({time:s,pos:a}=e[l]));const c=s-r;return c?i+(a-i)*(t-r)/c:i}class Id extends Ad{static id="timeseries";static defaults=(()=>Ad.defaults)();constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Dd(t,this.min),this._tableRange=Dd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let i,a,o,l,c;for(i=0,a=e.length;i<a;++i)l=e[i],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(i=0,a=r.length;i<a;++i)c=r[i+1],o=r[i-1],l=r[i],Math.round((c+o)/2)!==l&&s.push({time:l,pos:i/(a-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Dd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Dd(this._table,n*this._tableRange+this._minPos,!0)}}const $d=[ho,lc,id,Object.freeze({__proto__:null,CategoryScale:ld,LinearScale:hd,LogarithmicScale:vd,RadialLinearScale:Ed,TimeScale:Ad,TimeSeriesScale:Id})],zd="label";function Fd(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Ud(e,t){e.labels=t}function Bd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zd;const r=[];e.datasets=t.map((t=>{const s=e.datasets.find((e=>e[n]===t[n]));return s&&t.data&&!r.includes(s)?(r.push(s),Object.assign(s,t),s):{...t}}))}function Vd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zd;const n={labels:[],datasets:[]};return Ud(n,e.labels),Bd(n,e.datasets,t),n}function Hd(e,n){const{height:r=150,width:s=300,redraw:i=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=e,p=(0,t.useRef)(null),g=(0,t.useRef)(null),m=()=>{p.current&&(g.current=new zl(p.current,{type:o,data:Vd(l,a),options:c&&{...c},plugins:d}),Fd(n,g.current))},y=()=>{Fd(n,null),g.current&&(g.current.destroy(),g.current=null)};return(0,t.useEffect)((()=>{!i&&g.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,c)}),[i,c]),(0,t.useEffect)((()=>{!i&&g.current&&Ud(g.current.config.data,l.labels)}),[i,l.labels]),(0,t.useEffect)((()=>{!i&&g.current&&l.datasets&&Bd(g.current.config.data,l.datasets,a)}),[i,l.datasets]),(0,t.useEffect)((()=>{g.current&&(i?(y(),setTimeout(m)):g.current.update(h))}),[i,c,l.labels,l.datasets,h]),(0,t.useEffect)((()=>{g.current&&(y(),setTimeout(m))}),[o]),(0,t.useEffect)((()=>(m(),()=>y())),[]),t.createElement("canvas",{ref:p,role:"img",height:r,width:s,...f},u)}const Wd=(0,t.forwardRef)(Hd);function qd(e,n){return zl.register(n),(0,t.forwardRef)(((n,r)=>t.createElement(Wd,{...n,ref:r,type:e})))}const Kd=qd("line",co),Jd=qd("bar",oo);zl.register(ld,hd,tc,Zl,Uc,sd,zc);const Yd=()=>{var e,n;const{user:r}=Ee(),{t:s}=Ut(),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!0),[f,p]=(0,t.useState)({totalSessions:0,averageSentiment:0,improvementTrend:"stable",lastSessionDate:null}),[g,m]=(0,t.useState)([]);return(0,t.useEffect)((()=>{r&&r.id&&(async()=>{try{h(!0);const e=(await rr.getUserConversations(r.id)).sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),t=e.slice(0,5);a(t);const n=(await nr.getUserSessions(r.id)).filter((e=>new Date(e.start_time)>new Date)).sort(((e,t)=>new Date(e.start_time)-new Date(t.start_time)));n.length>0&&l(n[0]);const i=await nr.getUserSentimentHistory(r.id);if(i&&i.length>0){const e=i.map((e=>{const t=new Date(e.date);return`${t.getMonth()+1}/${t.getDate()}`})),t=i.map((e=>e.score)),n={labels:e,datasets:[{label:s("dashboard.sentimentScore"),data:t,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.3}]};d(n);const a=await nr.getUserSessionsCount(r.id),o=t.reduce(((e,t)=>e+t),0)/t.length;let l="stable";if(t.length>=3){const e=t.slice(-3);e[2]>e[0]?l="improving":e[2]<e[0]&&(l="declining")}p({totalSessions:a,averageSentiment:o.toFixed(2),improvementTrend:l,lastSessionDate:i[i.length-1].date})}const o=await nr.getUserResources(r.id);m(o||[])}catch(e){console.error("Error fetching dashboard data:",e)}finally{h(!1)}})()}),[r,s]),u?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):(0,Se.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Se.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-xl shadow-lg p-6 mb-8 text-white",children:(0,Se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h1",{className:"text-3xl font-bold",children:s("dashboard.welcomeBack",{name:(null===(e=r.profile_data)||void 0===e?void 0:e.name)||s("common.client")})}),(0,Se.jsx)("p",{className:"mt-2 text-primary-100 max-w-2xl",children:s("dashboard.trackProgress")})]}),(0,Se.jsx)("div",{className:"hidden md:block",children:(0,Se.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3209/3209993.png",alt:s("dashboard.wellness"),className:"w-24 h-24 opacity-80"})})]})}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex flex-col items-center justify-center text-center",children:[(0,Se.jsx)("span",{className:"text-3xl font-bold text-primary-500",children:f.totalSessions}),(0,Se.jsx)("span",{className:"text-sm text-gray-500 mt-2",children:s("dashboard.totalSessions")})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex flex-col items-center justify-center text-center",children:[(0,Se.jsx)("span",{className:"text-3xl font-bold text-primary-500",children:f.averageSentiment}),(0,Se.jsx)("span",{className:"text-sm text-gray-500 mt-2",children:s("dashboard.averageScore")})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex flex-col items-center justify-center text-center",children:[(0,Se.jsx)("span",{className:"text-3xl font-bold "+("improving"===f.improvementTrend?"text-green-500":"declining"===f.improvementTrend?"text-red-500":"text-yellow-500"),children:"improving"===f.improvementTrend?"\u2191":"declining"===f.improvementTrend?"\u2193":"\u2192"}),(0,Se.jsx)("span",{className:"text-sm text-gray-500 mt-2",children:s("dashboard.progressTrend")})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex flex-col items-center justify-center text-center",children:[(0,Se.jsx)("span",{className:"text-3xl font-bold text-primary-500",children:f.lastSessionDate||"None"}),(0,Se.jsx)("span",{className:"text-sm text-gray-500 mt-2",children:s("dashboard.lastSession")})]})]}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Se.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:s("dashboard.quickActions")}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Se.jsxs)(Bn,{to:"/client/chat",className:"flex items-center p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors group",children:[(0,Se.jsx)("div",{className:"p-3 bg-primary-100 rounded-full group-hover:bg-primary-200 transition-colors",children:(0,Se.jsx)(ir,{className:"h-6 w-6 text-primary-600"})}),(0,Se.jsxs)("div",{className:"ml-4",children:[(0,Se.jsx)("h3",{className:"font-medium text-gray-900",children:s("dashboard.chatSession")}),(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:s("dashboard.talkWithAI")})]})]}),(0,Se.jsxs)("button",{onClick:()=>{},className:"flex items-center p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors group text-left",children:[(0,Se.jsx)("div",{className:"p-3 bg-primary-100 rounded-full group-hover:bg-primary-200 transition-colors",children:(0,Se.jsx)(or,{className:"h-6 w-6 text-primary-600"})}),(0,Se.jsxs)("div",{className:"ml-4",children:[(0,Se.jsx)("h3",{className:"font-medium text-gray-900",children:s("dashboard.schedule")}),(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:s("dashboard.bookSession")})]})]}),(0,Se.jsxs)("button",{onClick:()=>{},className:"flex items-center p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors group text-left",children:[(0,Se.jsx)("div",{className:"p-3 bg-primary-100 rounded-full group-hover:bg-primary-200 transition-colors",children:(0,Se.jsx)(cr,{className:"h-6 w-6 text-primary-600"})}),(0,Se.jsxs)("div",{className:"ml-4",children:[(0,Se.jsx)("h3",{className:"font-medium text-gray-900",children:s("dashboard.resources")}),(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:s("dashboard.accessMaterials")})]})]})]})]}),c&&(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:s("dashboard.wellbeingProgress")}),(0,Se.jsxs)("button",{className:"text-primary-500 hover:text-primary-700 flex items-center text-sm font-medium",onClick:()=>{},children:[(0,Se.jsx)(ur,{className:"h-4 w-4 mr-1"}),s("common.refresh")]})]}),(0,Se.jsx)("div",{className:"h-64",children:(0,Se.jsx)(Kd,{data:c,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(e){return`${s("dashboard.score")}: ${e.parsed.y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,max:1,title:{display:!0,text:"Well-being Score"}},x:{title:{display:!0,text:"Date"}}}}})}),(0,Se.jsx)("p",{className:"mt-4 text-sm text-gray-500 italic",children:s("dashboard.chartDescription")})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:s("dashboard.recentSessions")}),(0,Se.jsx)("div",{className:"space-y-4",children:i.map((e=>{var t,n;return(0,Se.jsx)("div",{className:"border-b border-secondary-200 last:border-0 pb-4 last:pb-0",children:(0,Se.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-secondary-900 font-medium",children:new Date(e.start_ts).toLocaleDateString()}),(0,Se.jsx)("p",{className:"text-secondary-600 text-sm mt-1",children:(null===(t=e.summaries)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.summary_text)||s("dashboard.noSummary")})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:s("common.viewDetails")})]})},e.id)}))})]})]}),(0,Se.jsxs)("div",{className:"space-y-8",children:[o?(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:s("dashboard.upcomingSession")}),(0,Se.jsxs)("div",{className:"bg-primary-50 p-4 rounded-lg",children:[(0,Se.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Se.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:(0,Se.jsx)(or,{className:"h-6 w-6 text-primary-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"font-medium text-gray-900",children:s("dashboard.withTherapist",{name:(null===(n=o.therapists)||void 0===n?void 0:n.name)||s("common.therapist")})}),(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:new Date(o.start_time).toLocaleString()})]})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"w-full bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition-colors flex items-center justify-center",children:s("dashboard.joinSession")})]})]}):(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:s("dashboard.noUpcomingSessions")}),(0,Se.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,Se.jsx)("p",{className:"text-gray-600 mb-4",children:s("dashboard.noSessionsScheduled")}),(0,Se.jsx)("button",{onClick:()=>{},className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition-colors",children:s("dashboard.scheduleNow")})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:s("dashboard.helpfulResources")}),(0,Se.jsx)("div",{className:"space-y-3",children:g.map((e=>(0,Se.jsx)("a",{href:e.url,className:"block p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:(0,Se.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,Se.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,Se.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:e.type})]})},e.id)))})]})]})]})]})},Gd={getUserVoiceSettings:async e=>{try{const{data:t,error:n}=await xe.N.from("users").select("voice_settings").eq("id",e).single();if(n)throw n;return(null===t||void 0===t?void 0:t.voice_settings)||{enabled:!0,preferredVoice:"en-US-Neural2-F",speed:1,pitch:1}}catch(t){return console.error("Error fetching voice settings:",t),{enabled:!0,preferredVoice:"en-US-Neural2-F",speed:1,pitch:1}}},updateUserVoiceSettings:async(e,t)=>{try{const{error:n}=await xe.N.from("users").update({voice_settings:t}).eq("id",e);if(n)throw n;return!0}catch(n){return console.error("Error updating voice settings:",n),!1}},speechToText:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";try{const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://nvrvldvrqxlhcebxqowk.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52cnZsZHZycXhsaGNlYnhxb3drIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxNzU5MTMsImV4cCI6MjA2Mjc1MTkxM30.1UvD8sMr1qMgIp-DdxTGuWooojM-H9KV3j330Bw3eEQ",REACT_APP_SUPABASE_PROJECT_ID:"nvrvldvrqxlhcebxqowk",REACT_APP_SUPABASE_PROJECT_NAME:"Zaira Montoya AI Wellness Coach",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52cnZsZHZycXhsaGNlYnhxb3drIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzE3NTkxMywiZXhwIjoyMDYyNzUxOTEzfQ.c11dYvcboIwPrk2lfik1Rl5ArMoAOb7btxiFqzRamsQ"}.REACT_APP_ULTRAVOX_API_KEY;if(!n)throw new Error("Ultravox API key not found");const r=new FormData;r.append("audio",e),r.append("language",t);const s=await fetch("https://api.ultravox.ai/v1/speech-to-text",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!s.ok){const e=await s.json();throw new Error(e.message||"Speech-to-text failed")}return(await s.json()).text||""}catch(n){throw console.error("Speech-to-text error:",n),n}},textToSpeech:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://nvrvldvrqxlhcebxqowk.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52cnZsZHZycXhsaGNlYnhxb3drIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxNzU5MTMsImV4cCI6MjA2Mjc1MTkxM30.1UvD8sMr1qMgIp-DdxTGuWooojM-H9KV3j330Bw3eEQ",REACT_APP_SUPABASE_PROJECT_ID:"nvrvldvrqxlhcebxqowk",REACT_APP_SUPABASE_PROJECT_NAME:"Zaira Montoya AI Wellness Coach",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52cnZsZHZycXhsaGNlYnhxb3drIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzE3NTkxMywiZXhwIjoyMDYyNzUxOTEzfQ.c11dYvcboIwPrk2lfik1Rl5ArMoAOb7btxiFqzRamsQ"}.REACT_APP_ULTRAVOX_API_KEY;if(!n)throw new Error("Ultravox API key not found");const r={...{voice:"en-US-Neural2-F",speed:1,pitch:1},...t},s=await fetch("https://api.ultravox.ai/v1/text-to-speech",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({text:e,voice:r.voice,speed:r.speed,pitch:r.pitch})});if(!s.ok){const e=await s.json();throw new Error(e.message||"Text-to-speech failed")}return await s.blob()}catch(n){throw console.error("Text-to-speech error:",n),n}},playAudio:async e=>{try{const t=URL.createObjectURL(e),n=new Audio(t);return new Promise(((e,r)=>{n.onended=()=>{URL.revokeObjectURL(t),e()},n.onerror=e=>{URL.revokeObjectURL(t),r(e)},n.play()}))}catch(t){throw console.error("Error playing audio:",t),t}}};function Xd(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 0 0 1.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06ZM18.584 5.106a.75.75 0 0 1 1.06 0c3.808 3.807 3.808 9.98 0 13.788a.75.75 0 0 1-1.06-1.06 8.25 8.25 0 0 0 0-11.668.75.75 0 0 1 0-1.06Z"}),t.createElement("path",{d:"M15.932 7.757a.75.75 0 0 1 1.061 0 6 6 0 0 1 0 8.486.75.75 0 0 1-1.06-1.061 4.5 4.5 0 0 0 0-6.364.75.75 0 0 1 0-1.06Z"}))}const Qd=t.forwardRef(Xd),Zd=e=>{let{onClose:n,initialSettings:r,onSave:s}=e;const{t:i,i18n:a}=Ut(),{user:o}=Ee(),[l,c]=(0,t.useState)(r||{enabled:!0,preferredVoice:"en-US-Neural2-F",speed:1,pitch:1}),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=a.language||"en",t={en:[{id:"en-US-Neural2-F",name:"Emma (Female)"},{id:"en-US-Neural2-M",name:"James (Male)"},{id:"en-GB-Neural2-F",name:"Sophie (Female, British)"},{id:"en-GB-Neural2-M",name:"Oliver (Male, British)"}],es:[{id:"es-ES-Neural2-F",name:"Lucia (Femenina)"},{id:"es-ES-Neural2-M",name:"Miguel (Masculino)"},{id:"es-MX-Neural2-F",name:"Maria (Femenina, Mexicana)"},{id:"es-MX-Neural2-M",name:"Carlos (Masculino, Mexicano)"}]};if(f(t[e.substring(0,2)]||t.en),!l.preferredVoice.startsWith(e.substring(0,2))){const t="en"===e?"en-US-Neural2-F":"es-ES-Neural2-F";c((e=>({...e,preferredVoice:t})))}}),[a.language]);const m=e=>{const{name:t,value:n,type:r,checked:s}=e.target;c((e=>({...e,[t]:"checkbox"===r?s:n})))};return(0,Se.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Se.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,Se.jsx)(Qd,{className:"h-6 w-6 mr-2 text-blue-500"}),i("chat.voiceSettings")]}),(0,Se.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,Se.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Se.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{null!==o&&void 0!==o&&o.id&&await Gd.updateUserVoiceSettings(o.id,l),s&&s(l),n()}catch(t){console.error("Error saving voice settings:",t)}finally{g(!1)}},children:[(0,Se.jsx)("div",{className:"mb-4",children:(0,Se.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Se.jsx)("input",{type:"checkbox",name:"enabled",checked:l.enabled,onChange:m,className:"form-checkbox h-5 w-5 text-blue-600"}),(0,Se.jsx)("span",{className:"ml-2 text-gray-700",children:l.enabled?i("chat.disableVoice"):i("chat.enableVoice")})]})}),(0,Se.jsxs)("div",{className:"mb-4",children:[(0,Se.jsx)("label",{className:"block text-gray-700 mb-2",children:i("chat.preferredVoice")}),(0,Se.jsx)("select",{name:"preferredVoice",value:l.preferredVoice,onChange:m,className:"form-select w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:!l.enabled,children:h.map((e=>(0,Se.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,Se.jsxs)("div",{className:"mb-4",children:[(0,Se.jsxs)("label",{className:"block text-gray-700 mb-2",children:[i("chat.speed")," (",l.speed,")"]}),(0,Se.jsx)("input",{type:"range",name:"speed",min:"0.5",max:"2",step:"0.1",value:l.speed,onChange:m,className:"w-full",disabled:!l.enabled})]}),(0,Se.jsxs)("div",{className:"mb-6",children:[(0,Se.jsxs)("label",{className:"block text-gray-700 mb-2",children:[i("chat.pitch")," (",l.pitch,")"]}),(0,Se.jsx)("input",{type:"range",name:"pitch",min:"0.5",max:"2",step:"0.1",value:l.pitch,onChange:m,className:"w-full",disabled:!l.enabled})]}),(0,Se.jsxs)("div",{className:"flex justify-between",children:[(0,Se.jsx)("button",{type:"button",onClick:async()=>{if(!d){u(!0);try{const e="es"===a.language?"Hola, esta es una prueba de la configuraci\xf3n de voz.":"Hello, this is a test of the voice settings.",t=await Gd.textToSpeech(e,{voice:l.preferredVoice,speed:l.speed,pitch:l.pitch});await Gd.playAudio(t)}catch(e){console.error("Error testing voice:",e)}finally{u(!1)}}},disabled:!l.enabled||d,className:"px-4 py-2 bg-secondary-100 text-secondary-600 rounded-md hover:bg-secondary-200 focus:outline-none focus:ring-2 focus:ring-secondary-300 disabled:opacity-50",children:i(d?"common.loading":"chat.testVoice")}),(0,Se.jsxs)("div",{className:"space-x-2",children:[(0,Se.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300",children:i("common.cancel")}),(0,Se.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:opacity-50",children:i(p?"common.loading":"common.save")})]})]})]})]})})};function eu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const tu=t.forwardRef(eu);function nu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M8.25 4.5a3.75 3.75 0 1 1 7.5 0v8.25a3.75 3.75 0 1 1-7.5 0V4.5Z"}),t.createElement("path",{d:"M6 10.5a.75.75 0 0 1 .75.75v1.5a5.25 5.25 0 1 0 10.5 0v-1.5a.75.75 0 0 1 1.5 0v1.5a6.751 6.751 0 0 1-6 6.709v2.291h3a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1 0-1.5h3v-2.291a6.751 6.751 0 0 1-6-6.709v-1.5A.75.75 0 0 1 6 10.5Z"}))}const ru=t.forwardRef(nu);function su(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 0 0 1.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06ZM17.78 9.22a.75.75 0 1 0-1.06 1.06L18.44 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 1 0 1.06-1.06L20.56 12l1.72-1.72a.75.75 0 1 0-1.06-1.06l-1.72 1.72-1.72-1.72Z"}))}const iu=t.forwardRef(su);function au(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const ou=t.forwardRef(au);function lu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const cu=t.forwardRef(lu),du=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(null),[g,m]=(0,t.useState)([]),[y,v]=(0,t.useState)(!1),b=(0,t.useRef)(null),x=(0,t.useRef)(null),{user:w}=Ee();(0,t.useEffect)((()=>{(()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[e]),(0,t.useEffect)((()=>(w&&(async()=>{try{const t=localStorage.getItem("currentConversationId");if(t){d(t);const e=await rr.getConversationHistory(t);n(e)}else{var e;const t=await rr.createConversation(w.id);d(t),localStorage.setItem("currentConversationId",t);const r={id:`welcome-${Date.now()}`,conversation_id:t,sender:"ai",text:`Hello ${(null===(e=w.profile_data)||void 0===e?void 0:e.name)||"there"}! How can I help you today?`,timestamp:(new Date).toISOString(),sentiment_score:.8};await rr.saveMessage(r),n([r])}}catch(t){console.error("Error initializing conversation:",t),n([{id:`error-${Date.now()}`,sender:"system",text:"Sorry, there was an error starting the conversation. Please try refreshing the page.",timestamp:(new Date).toISOString()}])}})(),()=>{c&&rr.endConversation(c).catch((e=>console.error("Error ending conversation:",e)))})),[w]),(0,t.useEffect)((()=>{!i&&x.current&&x.current.focus()}),[e,i]);const _=async t=>{if(t.preventDefault(),!r.trim()||!c)return;const i={conversation_id:c,sender:"user",text:r,timestamp:(new Date).toISOString()};n((e=>[...e,i])),s(""),l(!0);try{await rr.saveMessage(i),v(!0);const t=await rr.getAIResponse(i.text,c,w.id);v(!1);const r={conversation_id:c,sender:"ai",text:t.message,timestamp:(new Date).toISOString(),sentiment_score:t.sentiment_score};await rr.saveMessage(r),n((e=>[...e,r])),e.length>=4&&rr.generateSummary(c).catch((e=>console.error("Error generating summary:",e)))}catch(a){console.error("Error processing message:",a),v(!1),n((e=>[...e,{id:`error-${Date.now()}`,sender:"system",text:"Sorry, there was an error processing your message. Please try again.",timestamp:(new Date).toISOString()}]))}finally{l(!1)}},[k,S]=(0,t.useState)({enabled:!0,preferredVoice:"en-US-Neural2-F",speed:1,pitch:1}),[j,N]=(0,t.useState)(!1),[E,C]=(0,t.useState)([]),[P,O]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const t=e[e.length-1];t&&"ai"===t.sender&&k.enabled&&!j&&(async e=>{if(k.enabled&&!j)try{N(!0);const t=M.language||"en",n="en"===t?"en-US-Neural2-F":"es"===t?"es-ES-Neural2-F":k.preferredVoice,r=await Gd.textToSpeech(e.text,{voice:n,speed:k.speed,pitch:k.pitch});await Gd.playAudio(r)}catch(t){console.error("Error playing TTS:",t)}finally{N(!1)}})(t)}),[e]);const{t:T,i18n:M}=Ut();(0,t.useEffect)((()=>{(async()=>{if(null!==w&&void 0!==w&&w.id)try{const e=await Gd.getUserVoiceSettings(w.id);S(e)}catch(e){console.error("Error loading voice settings:",e)}})()}),[w]);const R=async()=>{if(i)f&&"inactive"!==f.state&&f.stop(),u&&(u.getTracks().forEach((e=>e.stop())),h(null)),a(!1);else try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});h(e);const t=new MediaRecorder(e);p(t);const r=[];m(r),t.ondataavailable=e=>{e.data.size>0&&r.push(e.data)},t.onstop=async()=>{try{l(!0);const e=new Blob(r,{type:"audio/webm"}),t=M.language||"en",n="en"===t?"en-US":"es"===t?"es-ES":"en-US",i=await Gd.speechToText(e,n);i&&s(i)}catch(e){console.error("Error processing speech to text:",e),n((e=>[...e,{id:`error-${Date.now()}`,sender:"system",text:T("chat.speechToTextError"),timestamp:(new Date).toISOString()}]))}finally{l(!1)}},t.start(),a(!0)}catch(e){console.error("Error accessing microphone:",e),n((e=>[...e,{id:`error-${Date.now()}`,sender:"system",text:T("chat.microphoneError"),timestamp:(new Date).toISOString()}]))}};return(0,Se.jsxs)("div",{className:"flex flex-col h-[calc(100vh-12rem)]",children:[(0,Se.jsxs)("div",{className:"bg-white border-b p-4 flex justify-between items-center",children:[(0,Se.jsx)("h2",{className:"text-lg font-semibold text-secondary-900",children:"AI Therapy Session"}),(0,Se.jsx)("button",{onClick:async()=>{try{var e;c&&await rr.endConversation(c);const t=await rr.createConversation(w.id);d(t),localStorage.setItem("currentConversationId",t);const r={id:`welcome-${Date.now()}`,conversation_id:t,sender:"ai",text:`Hello ${(null===(e=w.profile_data)||void 0===e?void 0:e.name)||"there"}! How can I help you today?`,timestamp:(new Date).toISOString(),sentiment_score:.8};await rr.saveMessage(r),n([r])}catch(t){console.error("Error starting new conversation:",t),n([{id:`error-${Date.now()}`,sender:"system",text:"Sorry, there was an error starting a new conversation. Please try refreshing the page.",timestamp:(new Date).toISOString()}])}},className:"text-sm px-3 py-1 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200 transition-colors",children:"New Conversation"})]}),(0,Se.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[e.map(((e,t)=>{var n,r;return(0,Se.jsxs)("div",{className:"flex "+("user"===e.sender?"justify-end":"justify-start"),children:["user"!==e.sender&&"system"!==e.sender&&(0,Se.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-500 flex items-center justify-center text-white mr-2",children:"AI"}),(0,Se.jsxs)("div",{className:"max-w-[70%] rounded-lg p-3 shadow-sm "+("user"===e.sender?"bg-primary-500 text-white":"system"===e.sender?"bg-red-100 text-red-900":"bg-white text-secondary-900"),children:[(0,Se.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text}),(0,Se.jsx)("span",{className:`text-xs ${"user"===e.sender?"text-primary-100":"text-secondary-500"} mt-1 block`,children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),"user"===e.sender&&(0,Se.jsx)("div",{className:"h-8 w-8 rounded-full bg-secondary-200 flex items-center justify-center text-secondary-600 ml-2",children:(null===(n=w.profile_data)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.charAt(0))||"U"})]},e.id||t)})),y&&(0,Se.jsxs)("div",{className:"flex justify-start",children:[(0,Se.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-500 flex items-center justify-center text-white mr-2",children:"AI"}),(0,Se.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,Se.jsxs)("div",{className:"flex space-x-1",children:[(0,Se.jsx)("div",{className:"h-2 w-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,Se.jsx)("div",{className:"h-2 w-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,Se.jsx)("div",{className:"h-2 w-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),(0,Se.jsx)("div",{ref:b})]}),(0,Se.jsx)("div",{className:"border-t p-4 bg-white",children:(0,Se.jsxs)("form",{onSubmit:_,className:"flex space-x-2",children:[(0,Se.jsx)("input",{ref:x,type:"text",value:r,onChange:e=>s(e.target.value),disabled:o||i,placeholder:i?"Recording...":"Type your message...",className:"flex-1 rounded-lg border border-secondary-300 p-3 focus:outline-none focus:ring-2 focus:ring-primary-500",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_(e))}}),i?(0,Se.jsx)("button",{type:"button",onClick:R,className:"p-3 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors",title:T("chat.stopRecording"),children:(0,Se.jsx)(tu,{className:"h-6 w-6"})}):(0,Se.jsx)("button",{type:"button",onClick:R,disabled:o,className:"p-3 rounded-lg bg-secondary-100 text-secondary-600 hover:bg-secondary-200 transition-colors disabled:opacity-50",title:T("chat.startRecording"),children:(0,Se.jsx)(ru,{className:"h-6 w-6"})}),(0,Se.jsx)("button",{type:"button",onClick:async()=>{const e={...k,enabled:!k.enabled};S(e),null!==w&&void 0!==w&&w.id&&await Gd.updateUserVoiceSettings(w.id,e)},className:"p-3 rounded-lg transition-colors "+(k.enabled?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:k.enabled?T("chat.disableVoice"):T("chat.enableVoice"),children:k.enabled?(0,Se.jsx)(Qd,{className:"h-6 w-6"}):(0,Se.jsx)(iu,{className:"h-6 w-6"})}),(0,Se.jsx)("button",{type:"button",onClick:()=>{O(!0)},className:"p-3 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",title:T("chat.voiceSettings"),children:(0,Se.jsx)(ou,{className:"h-6 w-6"})}),(0,Se.jsx)("button",{type:"submit",disabled:!r.trim()||o||i,className:"p-3 rounded-lg bg-primary-500 text-white hover:bg-primary-600 transition-colors disabled:opacity-50",children:(0,Se.jsx)(cu,{className:"h-6 w-6"})})]})}),P&&(0,Se.jsx)(Zd,{initialSettings:k,onClose:()=>O(!1),onSave:e=>{S(e)}})]})},uu={async getAssignedClients(e){try{const{data:t,error:n}=await xe.N.from("clients").select("\n          *,\n          users:user_id (id, email, name, profile_data),\n          client_behaviors (\n            behaviors (id, name, prompt_template)\n          ),\n          conversations (\n            id,\n            start_ts,\n            end_ts,\n            summaries (\n              id,\n              summary_text,\n              sentiment_metrics,\n              created_at\n            )\n          )\n        ").eq("therapist_id",e).order("created_at",{ascending:!1});if(n)throw n;return t||[]}catch(t){throw console.error("Error fetching assigned clients:",t),t}},async getClientDetails(e){try{const{data:t,error:n}=await xe.N.from("clients").select("\n          *,\n          users:user_id (id, email, name, profile_data),\n          client_behaviors (\n            behaviors (id, name, prompt_template)\n          )\n        ").eq("user_id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error fetching client details:",t),t}},async getClientConversations(e){try{const{data:t,error:n}=await xe.N.from("conversations").select("\n          *,\n          summaries (\n            id,\n            summary_text,\n            sentiment_metrics,\n            created_at\n          ),\n          messages (\n            id,\n            sender,\n            text,\n            timestamp,\n            sentiment_score\n          )\n        ").eq("client_id",e).order("start_ts",{ascending:!1});if(n)throw n;return t||[]}catch(t){throw console.error("Error fetching client conversations:",t),t}},async getBehaviorPresets(){try{const{data:e,error:t}=await xe.N.from("behaviors").select("*").order("name",{ascending:!0});if(t)throw t;return e||[]}catch(e){throw console.error("Error fetching behavior presets:",e),e}},async addClientBehavior(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{const{data:r,error:s}=await xe.N.from("client_behaviors").insert([{client_id:e,behavior_id:t,active:n}]).select().single();if(s)throw s;return r}catch(r){throw console.error("Error adding client behavior:",r),r}},async updateClientBehavior(e,t,n){try{const{data:r,error:s}=await xe.N.from("client_behaviors").update({active:n}).match({client_id:e,behavior_id:t}).select().single();if(s)throw s;return r}catch(r){throw console.error("Error updating client behavior:",r),r}},async removeClientBehavior(e,t){try{const{error:n}=await xe.N.from("client_behaviors").delete().match({client_id:e,behavior_id:t});if(n)throw n}catch(n){throw console.error("Error removing client behavior:",n),n}},async getUpcomingSessions(e){try{const{data:t,error:n}=await xe.N.from("sessions").select("\n          *,\n          clients:users!sessions_client_id_fkey(id, email, name, profile_data)\n        ").eq("therapist_id",e).gt("start_time",(new Date).toISOString()).order("start_time",{ascending:!0});if(n)throw n;return t||[]}catch(t){throw console.error("Error fetching upcoming sessions:",t),t}},async getRecentSummaries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{const{data:n,error:r}=await xe.N.from("summaries").select("\n          *,\n          conversations (\n            id,\n            client_id,\n            start_ts,\n            clients:users!conversations_client_id_fkey(id, email, name, profile_data)\n          )\n        ").eq("therapist_id",e).order("created_at",{ascending:!1}).limit(t);if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching recent summaries:",n),n}},async scheduleSession(e){try{const{data:t,error:n}=await xe.N.from("sessions").insert([e]).select().single();if(n)throw n;return t}catch(t){throw console.error("Error scheduling session:",t),t}},async getSessionDetails(e){try{const{data:t,error:n}=await xe.N.from("sessions").select("\n          *,\n          clients:users!sessions_client_id_fkey(id, email, name, profile_data),\n          therapists:users!sessions_therapist_id_fkey(id, email, name, profile_data)\n        ").eq("id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error fetching session details:",t),t}}};function hu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const fu=t.forwardRef(hu);function pu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const gu=t.forwardRef(pu);function mu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const yu=t.forwardRef(mu),vu=()=>{var e;const{user:n}=Ee(),[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)({totalClients:0,upcomingSessionsCount:0,recentSummariesCount:0,averageSentiment:0}),[f,p]=(0,t.useState)(!0),[g,m]=(0,t.useState)(!1),{t:y}=Ut(),{currentLanguage:v}=Wn(),b=async()=>{try{p(!0);const e=null===n||void 0===n?void 0:n.id,[t,r,i]=await Promise.all([e?uu.getAssignedClients(e):Ae.getClients(),e?uu.getUpcomingSessions(e):Ae.getUpcomingSessions(),e?uu.getRecentSummaries(e):Ae.getRecentSummaries()]);s(t||[]),a(r||[]),l(i||[]);const o=x(i);h({totalClients:t.length,upcomingSessionsCount:r.length,recentSummariesCount:i.length,averageSentiment:o}),w(i)}catch(e){console.error("Error fetching dashboard data:",e)}finally{p(!1)}},x=e=>{if(!e||0===e.length)return 0;const t=e.filter((e=>e.sentiment_metrics&&e.sentiment_metrics.average)).map((e=>e.sentiment_metrics.average));return 0===t.length?0:(t.reduce(((e,t)=>e+t),0)/t.length).toFixed(2)},w=e=>{if(!e||0===e.length)return void d(null);const t={};e.forEach((e=>{if(!e.sentiment_metrics||!e.sentiment_metrics.average)return;const n=new Date(e.created_at).toLocaleDateString();t[n]||(t[n]=[]),t[n].push(e.sentiment_metrics.average)}));const n=Object.keys(t).sort(((e,t)=>new Date(e)-new Date(t))),r=n.map((e=>{const n=t[e];return n.reduce(((e,t)=>e+t),0)/n.length}));if(0===n.length||0===r.length)return void d(null);d({labels:n,datasets:[{label:"Client Sentiment Trend",data:r,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]})};return(0,t.useEffect)((()=>{b()}),[]),f&&!g?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,Se.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Se.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8 text-white",children:(0,Se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("h1",{className:"text-3xl font-bold",children:[y("dashboard.welcome"),", Dr. ",(null===n||void 0===n||null===(e=n.profile_data)||void 0===e?void 0:e.name)||(null===n||void 0===n?void 0:n.name)||y("nav.therapist")]}),(0,Se.jsx)("p",{className:"mt-2 text-blue-100 max-w-2xl",children:y("dashboard.description")})]}),(0,Se.jsxs)("button",{onClick:async()=>{m(!0);try{await b()}finally{m(!1)}},disabled:g,className:"flex items-center bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors text-white px-4 py-2 rounded-lg disabled:opacity-50",children:[(0,Se.jsx)(ur,{className:"h-5 w-5 mr-2 "+(g?"animate-spin":"")}),y("common.refresh")]})]})}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-blue-100 rounded-full mr-4",children:(0,Se.jsx)(fu,{className:"h-6 w-6 text-blue-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:y("dashboard.activeClients")}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.totalClients})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-indigo-100 rounded-full mr-4",children:(0,Se.jsx)(or,{className:"h-6 w-6 text-indigo-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:y("dashboard.upcomingSessions")}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.upcomingSessionsCount})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-purple-100 rounded-full mr-4",children:(0,Se.jsx)(cr,{className:"h-6 w-6 text-purple-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:y("dashboard.recentSummaries")}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.recentSummariesCount})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-green-100 rounded-full mr-4",children:(0,Se.jsx)(ir,{className:"h-6 w-6 text-green-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:y("dashboard.avgSentiment")}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.averageSentiment})]})]})]}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Se.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[c?(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:y("dashboard.sentimentTrends")})}),(0,Se.jsx)("div",{className:"h-64",children:(0,Se.jsx)(Kd,{data:c,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(e){return`Score: ${e.parsed.y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,max:1,title:{display:!0,text:"Average Sentiment Score"}},x:{title:{display:!0,text:"Date"}}}}})}),(0,Se.jsx)("p",{className:"mt-4 text-sm text-gray-500 italic",children:y("dashboard.sentimentChartDescription")})]}):(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:y("dashboard.sentimentTrends")}),(0,Se.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg",children:(0,Se.jsx)("p",{className:"text-gray-500",children:y("dashboard.noSentimentData")})})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:y("dashboard.upcomingSessions")}),(0,Se.jsxs)(Bn,{to:"/therapist/clients",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[y("common.viewAll")," ",(0,Se.jsx)(gu,{className:"h-4 w-4 ml-1"})]})]}),i.length>0?(0,Se.jsx)("div",{className:"space-y-4",children:i.map((e=>{var t;return(0,Se.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsxs)("div",{className:"flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-blue-100 rounded-full mr-4",children:(0,Se.jsx)(yu,{className:"h-5 w-5 text-blue-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=e.clients)||void 0===t?void 0:t.name)||"Client"}),(0,Se.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.start_time).toLocaleString()})]})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Join"})]},e.id)}))}):(0,Se.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,Se.jsx)("p",{className:"text-gray-500 mb-4",children:"No upcoming sessions scheduled"}),(0,Se.jsx)("button",{onClick:()=>{},className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Schedule New Session"})]})]})]}),(0,Se.jsxs)("div",{className:"space-y-8",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent AI Summaries"}),(0,Se.jsxs)(Bn,{to:"/therapist/clients",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["View All ",(0,Se.jsx)(gu,{className:"h-4 w-4 ml-1"})]})]}),o.length>0?(0,Se.jsx)("div",{className:"space-y-4",children:o.map((e=>{var t,n,r,s,i,a;return(0,Se.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=e.conversations)||void 0===t||null===(n=t.clients)||void 0===n?void 0:n.name)||"Client"}),(0,Se.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleString()})]}),(0,Se.jsx)(Bn,{to:`/therapist/clients/${null===(r=e.conversations)||void 0===r?void 0:r.client_id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Details"})]}),(0,Se.jsx)("p",{className:"text-gray-800 line-clamp-3",children:e.summary_text}),(0,Se.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,Se.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Sentiment: ",(null===(s=e.sentiment_metrics)||void 0===s||null===(i=s.average)||void 0===i?void 0:i.toFixed(2))||"N/A"]}),(null===(a=e.sentiment_metrics)||void 0===a?void 0:a.trend)&&(0,Se.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("improving"===e.sentiment_metrics.trend?"bg-green-100 text-green-800":"declining"===e.sentiment_metrics.trend?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:["Trend: ",e.sentiment_metrics.trend]})]})]},e.id)}))}):(0,Se.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,Se.jsx)("p",{className:"text-gray-500",children:y("dashboard.noRecentSummaries")})})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:y("dashboard.quickActions")}),(0,Se.jsxs)("div",{className:"space-y-3",children:[(0,Se.jsxs)(Bn,{to:"/therapist/clients",className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsx)(fu,{className:"h-5 w-5 text-blue-600 mr-3"}),(0,Se.jsx)("span",{className:"text-gray-900",children:"Manage Clients"})]}),(0,Se.jsxs)("button",{onClick:()=>{},className:"w-full flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left",children:[(0,Se.jsx)(or,{className:"h-5 w-5 text-indigo-600 mr-3"}),(0,Se.jsx)("span",{className:"text-gray-900",children:"Schedule New Session"})]}),(0,Se.jsxs)("button",{onClick:()=>{},className:"w-full flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left",children:[(0,Se.jsx)(cr,{className:"h-5 w-5 text-purple-600 mr-3"}),(0,Se.jsx)("span",{className:"text-gray-900",children:"Create Behavior Preset"})]})]})]})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Se.jsx)("h2",{className:"text-lg font-medium text-secondary-900",children:"Your Clients"}),(0,Se.jsx)(Bn,{to:"/therapist/clients",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"View All"})]}),(0,Se.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,6).map((e=>{var t,n,r;return(0,Se.jsxs)(Bn,{to:`/therapist/clients/${e.id}`,className:"p-4 bg-secondary-50 rounded-lg hover:bg-secondary-100 transition-colors",children:[(0,Se.jsx)("p",{className:"font-medium text-secondary-900",children:(null===(t=e.users)||void 0===t||null===(n=t.profile_data)||void 0===n?void 0:n.name)||e.name||"Client"}),(0,Se.jsxs)("p",{className:"text-sm text-secondary-600",children:[(null===(r=e.client_behaviors)||void 0===r?void 0:r.length)||0," Active Behaviors"]})]},e.id)}))})]})]})},bu=()=>{const{user:e}=Ee(),[n,r]=(0,t.useState)([]),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("all");(0,t.useEffect)((()=>{(async()=>{try{const{data:t,error:n}=await xe.N.from("clients").select("\n            *,\n            users:user_id (email, profile_data),\n            client_behaviors (\n              behaviors (name, prompt_template)\n            ),\n            conversations (\n              id,\n              start_ts,\n              summaries (\n                summary_text,\n                sentiment_score,\n                created_at\n              )\n            )\n          ").eq("therapist_id",e.id).order("created_at",{ascending:!1});if(n)throw n;r(t||[])}catch(t){console.error("Error fetching clients:",t)}finally{i(!1)}})()}),[e.id]);const d=n.filter((e=>{const t=e.users.profile_data.name.toLowerCase().includes(a.toLowerCase())||e.users.email.toLowerCase().includes(a.toLowerCase());return"all"===l?t:"active"===l?t&&"active"===e.status:"inactive"===l?t&&"inactive"===e.status:t}));return s?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,Se.jsxs)("div",{className:"space-y-6",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h1",{className:"text-2xl font-semibold text-secondary-900",children:"Your Clients"}),(0,Se.jsx)("p",{className:"mt-2 text-secondary-600",children:"Manage and monitor your client list"})]}),(0,Se.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Se.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,Se.jsxs)("div",{className:"flex-1",children:[(0,Se.jsx)("label",{htmlFor:"search",className:"sr-only",children:"Search clients"}),(0,Se.jsx)("input",{type:"text",id:"search",placeholder:"Search clients...",value:a,onChange:e=>o(e.target.value),className:"w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,Se.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Se.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,Se.jsx)("option",{value:"all",children:"All Clients"}),(0,Se.jsx)("option",{value:"active",children:"Active"}),(0,Se.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Add Client"})]})]})}),(0,Se.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,Se.jsx)("div",{className:"overflow-x-auto",children:(0,Se.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,Se.jsx)("thead",{className:"bg-secondary-50",children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Client"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Status"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Active Behaviors"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Latest Summary"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Last Session"}),(0,Se.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,Se.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,Se.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:d.map((e=>{var t;const n=(e=>{if(!e.conversations||0===e.conversations.length)return null;const t=e.conversations.flatMap((e=>e.summaries)).filter(Boolean).sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at)));return t[0]})(e),r=null===(t=e.conversations)||void 0===t?void 0:t[0];return(0,Se.jsxs)("tr",{className:"hover:bg-secondary-50",children:[(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsx)("div",{className:"flex items-center",children:(0,Se.jsxs)("div",{children:[(0,Se.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:e.users.profile_data.name}),(0,Se.jsx)("div",{className:"text-sm text-secondary-500",children:e.users.email})]})})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"bg-secondary-100 text-secondary-800"),children:e.status})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsx)("div",{className:"flex flex-wrap gap-1",children:e.client_behaviors.map(((e,t)=>(0,Se.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:e.behaviors.name},t)))})}),(0,Se.jsx)("td",{className:"px-6 py-4",children:n?(0,Se.jsxs)("div",{className:"text-sm text-secondary-900",children:[(0,Se.jsx)("div",{className:"truncate max-w-xs",children:n.summary_text}),(0,Se.jsx)("div",{className:"text-secondary-500 mt-1",children:new Date(n.created_at).toLocaleDateString()})]}):(0,Se.jsx)("span",{className:"text-sm text-secondary-500",children:"No summaries yet"})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:r?new Date(r.start_ts).toLocaleDateString():"No sessions yet"}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Se.jsx)(Bn,{to:`/therapist/clients/${e.id}`,className:"text-primary-600 hover:text-primary-900",children:"View Details"})})]},e.id)}))})]})})})]})};function xu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const wu=t.forwardRef(xu);function _u(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const ku=t.forwardRef(_u);function Su(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const ju=t.forwardRef(Su),Nu=e=>{let{clientId:n,onUpdate:r}=e;const{t:s}=Ut(),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)({});(0,t.useEffect)((()=>{(async()=>{try{d(!0);const e=await uu.getBehaviorPresets();a(e||[]);const t=await uu.getClientDetails(n),r=(null===t||void 0===t?void 0:t.client_behaviors)||[];l(r)}catch(u){console.error("Error fetching behavior presets:",u),h(s("behaviors.fetchError"))}finally{d(!1)}})()}),[n,s]);const g=e=>o.some((t=>t.behavior_id===e&&t.active));return c&&0===i.length?(0,Se.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):u?(0,Se.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Se.jsx)("p",{className:"text-red-600",children:u}),(0,Se.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 text-red-600 hover:text-red-800 underline",children:s("common.retry")})]}):(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Se.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:s("behaviors.manageBehaviors")}),(0,Se.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s("behaviors.description")})]}),(0,Se.jsx)("div",{className:"p-4",children:0===i.length?(0,Se.jsx)("p",{className:"text-gray-500",children:s("behaviors.noPresetsAvailable")}):(0,Se.jsx)("ul",{className:"divide-y divide-gray-200",children:i.map((e=>(0,Se.jsx)("li",{className:"py-4",children:(0,Se.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Se.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Se.jsxs)("div",{className:"flex items-center",children:[(0,Se.jsx)("h4",{className:"text-base font-medium text-gray-900 truncate",children:e.name}),(0,Se.jsx)("button",{onClick:()=>{return t=e.id,void p((e=>({...e,[t]:!e[t]})));var t},className:"ml-2 text-gray-400 hover:text-gray-600",title:s("common.info"),children:(0,Se.jsx)(wu,{className:"h-5 w-5"})})]}),f[e.id]&&(0,Se.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md",children:[(0,Se.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.prompt_template&&(0,Se.jsxs)("div",{className:"mt-2",children:[(0,Se.jsx)("h5",{className:"text-xs font-medium text-gray-700",children:s("behaviors.promptTemplate")}),(0,Se.jsx)("pre",{className:"mt-1 text-xs text-gray-600 bg-gray-100 p-2 rounded overflow-x-auto",children:e.prompt_template})]})]})]}),(0,Se.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Se.jsx)("button",{onClick:()=>(async e=>{try{d(!0),g(e)?o.find((t=>t.behavior_id===e))&&await uu.updateClientBehavior(n,e,!1):o.find((t=>t.behavior_id===e))?await uu.updateClientBehavior(n,e,!0):await uu.addClientBehavior(n,e,!0);const t=await uu.getClientDetails(n),s=(null===t||void 0===t?void 0:t.client_behaviors)||[];l(s),r&&r()}catch(u){console.error("Error toggling behavior:",u),h(g(e)?s("behaviors.deactivateError"):s("behaviors.activateError"))}finally{d(!1)}})(e.id),disabled:c,className:"inline-flex items-center px-3 py-1.5 rounded-md text-sm font-medium "+(g(e.id)?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:g(e.id)?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(ku,{className:"h-4 w-4 mr-1"}),s("behaviors.active")]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(ju,{className:"h-4 w-4 mr-1"}),s("behaviors.activate")]})})})]})},e.id)))})})]})},Eu=()=>{var e,n,r,s;const{id:i}=function(){let{matches:e}=t.useContext(K),n=e[e.length-1];return n?n.params:{}}(),{user:a}=Ee(),{t:o}=Ut(),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)([]),[h,f]=(0,t.useState)([]),[p,g]=(0,t.useState)(null),[m,y]=(0,t.useState)(null),[v,b]=(0,t.useState)(!0),[x,w]=(0,t.useState)("profile");(0,t.useEffect)((()=>{(async()=>{try{const{data:e,error:t}=await xe.N.from("clients").select("\n            *,\n            users:user_id (email, profile_data),\n            client_behaviors (\n              behaviors (id, name, prompt_template)\n            )\n          ").eq("id",i).single();if(t)throw t;const{data:n,error:r}=await xe.N.from("conversations").select("\n            *,\n            summaries (\n              id,\n              summary_text,\n              sentiment_score,\n              key_topics,\n              created_at\n            ),\n            messages (\n              id,\n              sender,\n              text,\n              timestamp,\n              sentiment_score\n            )\n          ").eq("client_id",i).order("start_ts",{ascending:!1});if(r)throw r;const{data:s,error:a}=await xe.N.from("behaviors").select("*").order("name",{ascending:!0});if(a)throw a;if(c(e),u(n||[]),f(s||[]),n){const e=n.flatMap((e=>e.messages)).filter((e=>null!==e.sentiment_score)).sort(((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))),t={labels:e.map((e=>new Date(e.timestamp).toLocaleDateString())),datasets:[{label:"Sentiment Score",data:e.map((e=>e.sentiment_score)),borderColor:"rgb(75, 192, 192)",tension:.1}]};y(t)}}catch(e){console.error("Error fetching client data:",e)}finally{b(!1)}})()}),[i]);const _=async()=>{try{const e=await uu.getClientDetails(i);c(e)}catch(e){console.error("Error refreshing client data:",e)}};return v?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):l?(0,Se.jsxs)("div",{className:"space-y-6",children:[(0,Se.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Se.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h1",{className:"text-2xl font-semibold text-secondary-900",children:l.users.profile_data.name}),(0,Se.jsx)("p",{className:"mt-1 text-secondary-600",children:l.users.email})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600",children:"Schedule Session"})]})}),(0,Se.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,Se.jsx)("button",{onClick:()=>w("profile"),className:"px-4 py-2 text-sm font-medium "+("profile"===x?"border-b-2 border-primary-500 text-primary-600":"text-gray-500 hover:text-gray-700"),children:o("client.profile")}),(0,Se.jsx)("button",{onClick:()=>w("behaviors"),className:"px-4 py-2 text-sm font-medium "+("behaviors"===x?"border-b-2 border-primary-500 text-primary-600":"text-gray-500 hover:text-gray-700"),children:o("client.behaviors")}),(0,Se.jsx)("button",{onClick:()=>w("sessions"),className:"px-4 py-2 text-sm font-medium "+("sessions"===x?"border-b-2 border-primary-500 text-primary-600":"text-gray-500 hover:text-gray-700"),children:o("client.sessions")}),(0,Se.jsx)("button",{onClick:()=>w("sentiment"),className:"px-4 py-2 text-sm font-medium "+("sentiment"===x?"border-b-2 border-primary-500 text-primary-600":"text-gray-500 hover:text-gray-700"),children:o("client.sentiment")})]}),"profile"===x&&(0,Se.jsx)("div",{className:"md:col-span-3",children:(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:o("client.profile")}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Se.jsxs)("div",{className:"space-y-4",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:o("common.name")}),(0,Se.jsx)("p",{className:"text-base text-gray-900",children:(null===(e=l.users)||void 0===e||null===(n=e.profile_data)||void 0===n?void 0:n.name)||o("common.unknown")})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:o("common.email")}),(0,Se.jsx)("p",{className:"text-base text-gray-900",children:(null===(r=l.users)||void 0===r?void 0:r.email)||o("common.unknown")})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:o("client.clientSince")}),(0,Se.jsx)("p",{className:"text-base text-gray-900",children:new Date(l.created_at).toLocaleDateString()})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:o("client.lastSession")}),(0,Se.jsx)("p",{className:"text-base text-gray-900",children:l.last_session?new Date(l.last_session).toLocaleDateString():o("client.noSessions")})]})]}),(0,Se.jsx)("div",{className:"space-y-4",children:(null===(s=l.users)||void 0===s?void 0:s.profile_data)&&(0,Se.jsx)(Se.Fragment,{children:Object.entries(l.users.profile_data).filter((e=>{let[t]=e;return!["name","avatar_url"].includes(t)})).map((e=>{let[t,n]=e;return(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:t.charAt(0).toUpperCase()+t.slice(1).replace("_"," ")}),(0,Se.jsx)("p",{className:"text-base text-gray-900",children:"object"===typeof n?JSON.stringify(n):n.toString()})]},t)}))})})]})]})}),"behaviors"===x&&(0,Se.jsx)("div",{className:"md:col-span-3",children:(0,Se.jsx)(Nu,{clientId:i,onUpdate:_})}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Total Sessions"}),(0,Se.jsx)("p",{className:"mt-2 text-3xl font-bold text-primary-600",children:d.length})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Active Behaviors"}),(0,Se.jsx)("p",{className:"mt-2 text-3xl font-bold text-primary-600",children:l.client_behaviors.length})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Average Sentiment"}),(0,Se.jsx)("p",{className:"mt-2 text-3xl font-bold text-primary-600",children:d.length>0?(d.reduce(((e,t)=>{const n=t.messages.filter((e=>null!==e.sentiment_score)).map((e=>e.sentiment_score));return e+n.reduce(((e,t)=>e+t),0)/n.length}),0)/d.length).toFixed(2):"N/A"})]})]}),m&&(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Sentiment Trends"}),(0,Se.jsx)("div",{className:"h-64",children:(0,Se.jsx)(Kd,{data:m,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:1}}}})})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Se.jsx)("h2",{className:"text-lg font-medium text-secondary-900",children:"Active Behaviors"}),(0,Se.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Se.jsxs)("select",{value:p||"",onChange:e=>g(e.target.value),className:"rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,Se.jsx)("option",{value:"",children:"Select behavior..."}),h.map((e=>(0,Se.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,Se.jsx)("button",{onClick:async()=>{if(p)try{await uu.addClientBehavior(i,p,!0),await _(),g(null)}catch(e){console.error("Error adding behavior:",e)}},disabled:!p,className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 disabled:opacity-50",children:"Add Behavior"})]})]}),(0,Se.jsx)("div",{className:"space-y-4",children:l.client_behaviors.map((e=>{let{behaviors:t}=e;return(0,Se.jsx)("div",{className:"p-4 bg-secondary-50 rounded-lg",children:(0,Se.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{className:"font-medium text-secondary-900",children:t.name}),(0,Se.jsx)("p",{className:"mt-1 text-sm text-secondary-600",children:t.prompt_template})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]})},t.id)}))})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Conversation History"}),(0,Se.jsx)("div",{className:"space-y-4",children:d.map((e=>{var t,n;return(0,Se.jsxs)("div",{className:"border-b border-secondary-200 last:border-0 pb-4 last:pb-0",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"font-medium text-secondary-900",children:new Date(e.start_ts).toLocaleString()}),(0,Se.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,Se.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Messages: ",e.messages.length]}),(null===(t=e.summaries)||void 0===t?void 0:t[0])&&(0,Se.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:["Sentiment: ",e.summaries[0].sentiment_score.toFixed(2)]})]})]}),(0,Se.jsx)("button",{onClick:()=>{},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"View Details"})]}),(null===(n=e.summaries)||void 0===n?void 0:n[0])&&(0,Se.jsxs)("div",{className:"mt-2",children:[(0,Se.jsx)("p",{className:"text-sm text-secondary-600",children:e.summaries[0].summary_text}),e.summaries[0].key_topics&&(0,Se.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.summaries[0].key_topics.map(((e,t)=>(0,Se.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800",children:e},t)))})]})]},e.id)}))})]})]}):(0,Se.jsxs)("div",{className:"text-center py-12",children:[(0,Se.jsx)("h2",{className:"text-2xl font-semibold text-secondary-900",children:"Client not found"}),(0,Se.jsx)(Bn,{to:"/therapist/clients",className:"mt-4 inline-block text-primary-600 hover:text-primary-700",children:"Return to client list"})]})},Cu={async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=xe.N.from("users").select("*").order("created_at",{ascending:!1});e&&(t=t.eq("role",e));const{data:n,error:r}=await t;if(r)throw r;return n||[]}catch(t){throw console.error("Error fetching users:",t),t}},async getUserDetails(e){try{const{data:t,error:n}=await xe.N.from("users").select("*").eq("id",e).single();if(n)throw n;if("client"===t.role){const{data:n,error:r}=await xe.N.from("clients").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;t.client_data=n||null}else if("therapist"===t.role){const{data:n,error:r}=await xe.N.from("therapists").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;t.therapist_data=n||null}return t}catch(t){throw console.error("Error fetching user details:",t),t}},async createUser(e){try{const{data:t,error:n}=await xe.N.auth.admin.createUser({email:e.email,password:e.password,email_confirm:!0});if(n)throw n;const{data:r,error:s}=await xe.N.from("users").insert([{id:t.user.id,email:e.email,role:e.role,name:e.name,profile_data:e.profile_data||{},created_at:(new Date).toISOString()}]).select().single();if(s)throw s;if("client"===e.role){const{error:t}=await xe.N.from("clients").insert([{user_id:r.id,subscription_id:e.subscription_id,profile_data:e.client_data||{}}]);if(t)throw t}else if("therapist"===e.role){const{error:t}=await xe.N.from("therapists").insert([{user_id:r.id,credentials:e.credentials||{},availability:e.availability||{}}]);if(t)throw t}return r}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){try{const{data:n,error:r}=await xe.N.from("users").update({email:t.email,role:t.role,name:t.name,profile_data:t.profile_data||{}}).eq("id",e).select().single();if(r)throw r;if("client"===t.role&&t.client_data){const{error:n}=await xe.N.from("clients").upsert([{user_id:e,subscription_id:t.subscription_id,profile_data:t.client_data}]);if(n)throw n}else if("therapist"===t.role&&t.therapist_data){const{error:n}=await xe.N.from("therapists").upsert([{user_id:e,credentials:t.credentials||{},availability:t.availability||{}}]);if(n)throw n}return n}catch(n){throw console.error("Error updating user:",n),n}},async deleteUser(e){try{const{error:t}=await xe.N.auth.admin.deleteUser(e);if(t)throw t;const{error:n}=await xe.N.from("users").delete().eq("id",e);if(n)throw n}catch(t){throw console.error("Error deleting user:",t),t}},async getBehaviorPresets(){try{const{data:e,error:t}=await xe.N.from("behaviors").select("*, created_by:users(name)").order("name",{ascending:!0});if(t)throw t;return e||[]}catch(e){throw console.error("Error fetching behavior presets:",e),e}},async getBehaviorPresetDetails(e){try{const{data:t,error:n}=await xe.N.from("behaviors").select("*, created_by:users(name)").eq("id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error fetching behavior preset details:",t),t}},async createBehaviorPreset(e){try{const{data:t,error:n}=await xe.N.from("behaviors").insert([{name:e.name,prompt_template:e.prompt_template,created_by:e.created_by,created_at:(new Date).toISOString()}]).select().single();if(n)throw n;return t}catch(t){throw console.error("Error creating behavior preset:",t),t}},async updateBehaviorPreset(e,t){try{const{data:n,error:r}=await xe.N.from("behaviors").update({name:t.name,prompt_template:t.prompt_template}).eq("id",e).select().single();if(r)throw r;return n}catch(n){throw console.error("Error updating behavior preset:",n),n}},async deleteBehaviorPreset(e){try{const{error:t}=await xe.N.from("behaviors").delete().eq("id",e);if(t)throw t}catch(t){throw console.error("Error deleting behavior preset:",t),t}},async getSystemStats(){try{const{data:e,error:t}=await xe.N.rpc("get_user_counts_by_role");if(t)throw t;const{data:n,error:r}=await xe.N.from("conversations").select("id",{count:"exact",head:!0});if(r)throw r;const{data:s,error:i}=await xe.N.from("messages").select("id",{count:"exact",head:!0});if(i)throw i;const{data:a,error:o}=await xe.N.from("behaviors").select("id",{count:"exact",head:!0});if(o)throw o;return{users:e,conversations:n,messages:s,behaviors:a}}catch(e){throw console.error("Error fetching system stats:",e),e}}};zl.register(...$d);function Pu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ou=t.forwardRef(Pu);function Tu(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Mu=t.forwardRef(Tu);function Ru(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Lu=t.forwardRef(Ru),Au=()=>{const{user:e}=Ee(),{t:n}=Ut(),[r,s]=(0,t.useState)({totalUsers:0,activeClients:0,activeTherapists:0,totalRevenue:0,activeBehaviors:0,totalConversations:0,totalMessages:0,averageSentiment:0}),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(!0),[g,m]=(0,t.useState)(!1),y=async()=>{try{p(!0);const e=await Cu.getSystemStats(),t=await Cu.getUsers(),n=t.slice(0,5),r=(await Cu.getBehaviors()).slice(0,5),i=v(t),o=b(t),c=t.filter((e=>"client"===e.role)).length,u=x(c);s({totalUsers:e.users.total,activeClients:e.users.clients,activeTherapists:e.users.therapists,activeBehaviors:e.behaviors,totalConversations:e.conversations,totalMessages:e.messages,totalRevenue:u,averageSentiment:e.averageSentiment||0}),a(n),l(r),d(o),h(i)}catch(e){console.error("Error fetching dashboard data:",e)}finally{p(!1)}},v=e=>{const t={client:0,therapist:0,admin:0};return e.forEach((e=>{e.role in t&&t[e.role]++})),{labels:["Clients","Therapists","Admins"],datasets:[{label:"Users by Role",data:[t.client,t.therapist,t.admin],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(255, 99, 132)"],borderWidth:1}]}},b=e=>{const t=new Date;t.setDate(t.getDate()-30);const n=e.filter((e=>new Date(e.created_at)>=t)),r={};n.forEach((e=>{const t=new Date(e.created_at).toLocaleDateString();r[t]=(r[t]||0)+1}));const s=Object.keys(r).sort(((e,t)=>new Date(e)-new Date(t)));return{labels:s,datasets:[{label:"New Users",data:s.map((e=>r[e])),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]}},x=e=>49.99*e;return(0,t.useEffect)((()=>{y()}),[]),f&&!g?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,Se.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Se.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8 text-white",children:(0,Se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,Se.jsx)("p",{className:"mt-2 text-purple-100 max-w-2xl",children:"Monitor and manage the platform's performance, users, and behavior presets"})]}),(0,Se.jsxs)("button",{onClick:async()=>{m(!0);try{await y()}finally{m(!1)}},disabled:g,className:"flex items-center bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors text-white px-4 py-2 rounded-lg disabled:opacity-50",children:[(0,Se.jsx)(ur,{className:"h-5 w-5 mr-2 "+(g?"animate-spin":"")}),"Refresh"]})]})}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-blue-100 rounded-full mr-4",children:(0,Se.jsx)(fu,{className:"h-6 w-6 text-blue-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:"Total Users"}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.totalUsers}),(0,Se.jsxs)("div",{className:"mt-1 flex justify-between text-xs text-gray-500",children:[(0,Se.jsxs)("span",{children:["Clients: ",r.activeClients]}),(0,Se.jsx)("span",{className:"mx-2",children:"|"}),(0,Se.jsxs)("span",{children:["Therapists: ",r.activeTherapists]})]})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-purple-100 rounded-full mr-4",children:(0,Se.jsx)(cr,{className:"h-6 w-6 text-purple-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:"Behavior Presets"}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.activeBehaviors})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-green-100 rounded-full mr-4",children:(0,Se.jsx)(Ou,{className:"h-6 w-6 text-green-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:"Est. Monthly Revenue"}),(0,Se.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.totalRevenue.toFixed(2)]})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 flex items-center",children:[(0,Se.jsx)("div",{className:"p-3 bg-indigo-100 rounded-full mr-4",children:(0,Se.jsx)(ir,{className:"h-6 w-6 text-indigo-600"})}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"text-sm text-gray-500",children:"Platform Activity"}),(0,Se.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.totalMessages}),(0,Se.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Across ",r.totalConversations," conversations"]})]})]})]}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,Se.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[c&&(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"User Growth"}),(0,Se.jsx)("div",{className:"text-sm text-gray-500",children:"Last 30 days"})]}),(0,Se.jsx)("div",{className:"h-64",children:(0,Se.jsx)(Kd,{data:c,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(e){return`New users: ${e.parsed.y}`}}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:"New Users"}},x:{title:{display:!0,text:"Date"}}}}},"user-growth-chart")})]}),u&&(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"User Distribution"})}),(0,Se.jsx)("div",{className:"h-64",children:(0,Se.jsx)(Jd,{data:u,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Users"}}}}},"user-distribution-chart")})]})]}),(0,Se.jsxs)("div",{className:"space-y-8",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Users"}),(0,Se.jsxs)(Bn,{to:"/admin/users",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["View All ",(0,Se.jsx)(gu,{className:"h-4 w-4 ml-1"})]})]}),(0,Se.jsxs)("div",{className:"space-y-4",children:[i.map((e=>(0,Se.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsxs)("div",{className:"flex items-center",children:[(0,Se.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,Se.jsx)(Mu,{className:"h-5 w-5 text-indigo-600"})}),(0,Se.jsxs)("div",{className:"ml-4",children:[(0,Se.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name||"Unnamed User"}),(0,Se.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,Se.jsx)("span",{className:"capitalize",children:e.role}),(0,Se.jsx)("span",{className:"mx-1",children:"\u2022"}),(0,Se.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),(0,Se.jsx)(Bn,{to:`/admin/users/${e.id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Details"})]},e.id))),0===i.length&&(0,Se.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,Se.jsx)("p",{className:"text-gray-500",children:"No users found"})})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Behavior Presets"}),(0,Se.jsxs)(Bn,{to:"/admin/behaviors",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["View All ",(0,Se.jsx)(gu,{className:"h-4 w-4 ml-1"})]})]}),(0,Se.jsxs)("div",{className:"space-y-4",children:[o.map((e=>{var t;return(0,Se.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,Se.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Created by: ",(null===(t=e.created_by)||void 0===t?void 0:t.name)||"Unknown"]})]}),(0,Se.jsx)(Bn,{to:`/admin/behaviors/${e.id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"})]}),(0,Se.jsx)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:e.prompt_template?e.prompt_template.substring(0,100)+"...":e.description||"No description available"})]},e.id)})),0===o.length&&(0,Se.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,Se.jsx)("p",{className:"text-gray-500",children:"No behavior presets found"})})]})]})]})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Quick Actions"}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Se.jsxs)(Bn,{to:"/admin/users/new",className:"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsx)(Mu,{className:"h-5 w-5 text-blue-600 mr-3"}),(0,Se.jsx)("span",{className:"text-gray-900",children:"Create New User"})]}),(0,Se.jsxs)(Bn,{to:"/admin/behaviors/new",className:"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsx)(cr,{className:"h-5 w-5 text-purple-600 mr-3"}),(0,Se.jsx)("span",{className:"text-gray-900",children:"Create Behavior Preset"})]}),(0,Se.jsxs)(Bn,{to:"/admin/reports",className:"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Se.jsx)(Lu,{className:"h-5 w-5 text-green-600 mr-3"}),(0,Se.jsx)("span",{className:"text-gray-900",children:"View Reports"})]})]})]}),(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Se.jsxs)(Bn,{to:"/admin/behaviors",className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Manage Behaviors"}),(0,Se.jsx)("p",{className:"mt-2 text-secondary-600",children:"Configure AI agent behavior presets"})]}),(0,Se.jsxs)(Bn,{to:"/admin/users",className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"User Management"}),(0,Se.jsx)("p",{className:"mt-2 text-secondary-600",children:"Manage users and permissions"})]}),(0,Se.jsxs)(Bn,{to:"/admin/subscriptions",className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:[(0,Se.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Subscriptions"}),(0,Se.jsx)("p",{className:"mt-2 text-secondary-600",children:"Manage subscription plans and billing"})]})]})]})},Du=()=>{const{user:e}=Ee(),[n,r]=(0,t.useState)([]),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("all"),[d,u]=(0,t.useState)("all");(0,t.useEffect)((()=>{(async()=>{try{const{data:e,error:t}=await xe.N.from("users").select("\n            *,\n            clients (id, status),\n            therapists (id, status)\n          ").order("created_at",{ascending:!1});if(t)throw t;r(e||[])}catch(e){console.error("Error fetching users:",e)}finally{i(!1)}})()}),[]);const h=n.filter((e=>{var t;const n=e.email.toLowerCase().includes(a.toLowerCase())||((null===(t=e.profile_data)||void 0===t?void 0:t.name)||"").toLowerCase().includes(a.toLowerCase()),r="all"===l||e.role===l,s="all"===d||e.status===d;return n&&r&&s}));return s?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,Se.jsxs)("div",{className:"space-y-6",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h1",{className:"text-2xl font-semibold text-secondary-900",children:"User Management"}),(0,Se.jsx)("p",{className:"mt-2 text-secondary-600",children:"Manage user accounts, roles, and permissions"})]}),(0,Se.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Se.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,Se.jsx)("div",{className:"flex-1",children:(0,Se.jsx)("input",{type:"text",placeholder:"Search users...",value:a,onChange:e=>o(e.target.value),className:"w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})}),(0,Se.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Se.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,Se.jsx)("option",{value:"all",children:"All Roles"}),(0,Se.jsx)("option",{value:"client",children:"Clients"}),(0,Se.jsx)("option",{value:"therapist",children:"Therapists"}),(0,Se.jsx)("option",{value:"admin",children:"Admins"})]}),(0,Se.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,Se.jsx)("option",{value:"all",children:"All Status"}),(0,Se.jsx)("option",{value:"active",children:"Active"}),(0,Se.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Se.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]})}),(0,Se.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,Se.jsx)("div",{className:"overflow-x-auto",children:(0,Se.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,Se.jsx)("thead",{className:"bg-secondary-50",children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"User"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Role"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Status"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Joined"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Last Active"}),(0,Se.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,Se.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,Se.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:h.map((e=>{var t;return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsx)("div",{className:"flex items-center",children:(0,Se.jsxs)("div",{children:[(0,Se.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:(null===(t=e.profile_data)||void 0===t?void 0:t.name)||"Unnamed User"}),(0,Se.jsx)("div",{className:"text-sm text-secondary-500",children:e.email})]})})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsxs)("select",{value:e.role,onChange:t=>(async(e,t)=>{try{const{error:s}=await xe.N.from("users").update({role:t}).eq("id",e);if(s)throw s;r(n.map((n=>n.id===e?{...n,role:t}:n)))}catch(s){console.error("Error updating user role:",s)}})(e.id,t.target.value),className:"text-sm rounded-lg border border-secondary-300 px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,Se.jsx)("option",{value:"client",children:"Client"}),(0,Se.jsx)("option",{value:"therapist",children:"Therapist"}),(0,Se.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{const{error:s}=await xe.N.from("users").update({status:t}).eq("id",e);if(s)throw s;r(n.map((n=>n.id===e?{...n,status:t}:n)))}catch(s){console.error("Error updating user status:",s)}})(e.id,t.target.value),className:"text-sm rounded-lg border px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500 "+("active"===e.status?"border-green-300 text-green-800":"suspended"===e.status?"border-red-300 text-red-800":"border-secondary-300 text-secondary-800"),children:[(0,Se.jsx)("option",{value:"active",children:"Active"}),(0,Se.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Se.jsx)("option",{value:"suspended",children:"Suspended"})]})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:new Date(e.created_at).toLocaleDateString()}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleDateString():"Never"}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Se.jsx)(Bn,{to:`/admin/users/${e.id}`,className:"text-primary-600 hover:text-primary-900",children:"View Details"})})]},e.id)}))})]})})})]})},Iu=()=>{const{user:e}=Ee(),[n,r]=(0,t.useState)([]),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)({name:"",description:"",prompt_template:"",category:"",active:!0});(0,t.useEffect)((()=>{d()}),[]);const d=async()=>{try{const{data:e,error:t}=await xe.N.from("behaviors").select("*, client_behaviors (*)").order("name",{ascending:!0});if(t)throw t;r(e||[])}catch(e){console.error("Error fetching behaviors:",e)}finally{i(!1)}},u=async e=>{e.preventDefault();try{const{error:e}=await xe.N.from("behaviors").update(a).eq("id",a.id);if(e)throw e;r(n.map((e=>e.id===a.id?a:e))),o(null)}catch(t){console.error("Error updating behavior:",t)}};return s?(0,Se.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,Se.jsxs)("div",{className:"space-y-6",children:[(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h1",{className:"text-2xl font-semibold text-secondary-900",children:"Behavior Management"}),(0,Se.jsx)("p",{className:"mt-2 text-secondary-600",children:"Configure and manage AI agent behaviors"})]}),(0,Se.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Se.jsx)("h2",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Create New Behavior"}),(0,Se.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const{data:e,error:t}=await xe.N.from("behaviors").insert([l]).select().single();if(t)throw t;r([...n,{...e,client_behaviors:[]}]),c({name:"",description:"",prompt_template:"",category:"",active:!0})}catch(t){console.error("Error creating behavior:",t)}},className:"space-y-4",children:[(0,Se.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-secondary-700",children:"Name"}),(0,Se.jsx)("input",{type:"text",id:"name",value:l.name,onChange:e=>c({...l,name:e.target.value}),className:"mt-1 block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-secondary-700",children:"Category"}),(0,Se.jsx)("input",{type:"text",id:"category",value:l.category,onChange:e=>c({...l,category:e.target.value}),className:"mt-1 block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-secondary-700",children:"Description"}),(0,Se.jsx)("textarea",{id:"description",value:l.description,onChange:e=>c({...l,description:e.target.value}),rows:3,className:"mt-1 block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,Se.jsxs)("div",{children:[(0,Se.jsx)("label",{htmlFor:"prompt_template",className:"block text-sm font-medium text-secondary-700",children:"Prompt Template"}),(0,Se.jsx)("textarea",{id:"prompt_template",value:l.prompt_template,onChange:e=>c({...l,prompt_template:e.target.value}),rows:5,className:"mt-1 block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono text-sm",required:!0})]}),(0,Se.jsx)("div",{className:"flex justify-end",children:(0,Se.jsx)("button",{type:"submit",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Create Behavior"})})]})]}),(0,Se.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,Se.jsx)("div",{className:"overflow-x-auto",children:(0,Se.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,Se.jsx)("thead",{className:"bg-secondary-50",children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Behavior"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Category"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Usage"}),(0,Se.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Status"}),(0,Se.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,Se.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,Se.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:n.map((e=>{var t;return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{className:"px-6 py-4",children:(null===a||void 0===a?void 0:a.id)===e.id?(0,Se.jsxs)("div",{className:"space-y-2",children:[(0,Se.jsx)("input",{type:"text",value:a.name,onChange:e=>o({...a,name:e.target.value}),className:"block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,Se.jsx)("textarea",{value:a.description,onChange:e=>o({...a,description:e.target.value}),rows:2,className:"block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}):(0,Se.jsxs)("div",{children:[(0,Se.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:e.name}),(0,Se.jsx)("div",{className:"text-sm text-secondary-500",children:e.description})]})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(null===a||void 0===a?void 0:a.id)===e.id?(0,Se.jsx)("input",{type:"text",value:a.category,onChange:e=>o({...a,category:e.target.value}),className:"block w-full rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500"}):(0,Se.jsx)("span",{className:"text-sm text-secondary-900",children:e.category})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsxs)("span",{className:"text-sm text-secondary-900",children:[(null===(t=e.client_behaviors)||void 0===t?void 0:t.length)||0," clients"]})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Se.jsx)("button",{onClick:()=>(async(e,t)=>{try{const{error:s}=await xe.N.from("behaviors").update({active:!t}).eq("id",e);if(s)throw s;r(n.map((n=>n.id===e?{...n,active:!t}:n)))}catch(s){console.error("Error toggling behavior status:",s)}})(e.id,e.active),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-secondary-100 text-secondary-800 hover:bg-secondary-200"),children:e.active?"Active":"Inactive"})}),(0,Se.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(null===a||void 0===a?void 0:a.id)===e.id?(0,Se.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Se.jsx)("button",{onClick:u,className:"text-green-600 hover:text-green-900",children:"Save"}),(0,Se.jsx)("button",{onClick:()=>o(null),className:"text-red-600 hover:text-red-900",children:"Cancel"})]}):(0,Se.jsx)("button",{onClick:()=>o(e),className:"text-primary-600 hover:text-primary-900",children:"Edit"})})]},e.id)}))})]})})})]})},$u=()=>(0,Se.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50",children:(0,Se.jsx)("div",{className:"max-w-md w-full space-y-8 p-8",children:(0,Se.jsxs)("div",{className:"text-center",children:[(0,Se.jsx)("h1",{className:"text-6xl font-bold text-primary-600",children:"404"}),(0,Se.jsx)("h2",{className:"mt-6 text-3xl font-semibold text-secondary-900",children:"Page Not Found"}),(0,Se.jsx)("p",{className:"mt-2 text-sm text-secondary-600",children:"Sorry, we couldn't find the page you're looking for."}),(0,Se.jsx)("div",{className:"mt-6",children:(0,Se.jsx)(Bn,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Go back home"})})]})})});const zu=function(){const{user:e,loading:n}=Ee();return(0,t.useEffect)((()=>{Le().then((()=>{console.log("\u2705 Application initialized with Supabase data")})).catch((e=>{console.error("Error initializing application:",e)}))}),[]),n?(0,Se.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Se.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,Se.jsxs)(Tn,{children:[!1,(0,Se.jsxs)(ve,{children:[(0,Se.jsx)(me,{path:"/login",element:(0,Se.jsx)(Xn,{})}),(0,Se.jsx)(me,{path:"/register",element:(0,Se.jsx)(Qn,{})}),(0,Se.jsx)(me,{path:"/supabase-test",element:(0,Se.jsx)(tr,{})}),(0,Se.jsx)(me,{element:(0,Se.jsx)(Gn,{role:"client"}),children:(0,Se.jsxs)(me,{element:(0,Se.jsx)(Yn,{type:"client"}),children:[(0,Se.jsx)(me,{path:"/client",element:(0,Se.jsx)(pe,{to:"/client/dashboard",replace:!0})}),(0,Se.jsx)(me,{path:"/client/dashboard",element:(0,Se.jsx)(Yd,{})}),(0,Se.jsx)(me,{path:"/client/chat",element:(0,Se.jsx)(du,{})})]})}),(0,Se.jsx)(me,{element:(0,Se.jsx)(Gn,{role:"therapist"}),children:(0,Se.jsxs)(me,{element:(0,Se.jsx)(Yn,{type:"therapist"}),children:[(0,Se.jsx)(me,{path:"/therapist",element:(0,Se.jsx)(pe,{to:"/therapist/dashboard",replace:!0})}),(0,Se.jsx)(me,{path:"/therapist/dashboard",element:(0,Se.jsx)(vu,{})}),(0,Se.jsx)(me,{path:"/therapist/clients",element:(0,Se.jsx)(bu,{})}),(0,Se.jsx)(me,{path:"/therapist/clients/:id",element:(0,Se.jsx)(Eu,{})})]})}),(0,Se.jsx)(me,{element:(0,Se.jsx)(Gn,{role:"admin"}),children:(0,Se.jsxs)(me,{element:(0,Se.jsx)(Yn,{type:"admin"}),children:[(0,Se.jsx)(me,{path:"/admin",element:(0,Se.jsx)(pe,{to:"/admin/dashboard",replace:!0})}),(0,Se.jsx)(me,{path:"/admin/dashboard",element:(0,Se.jsx)(Au,{})}),(0,Se.jsx)(me,{path:"/admin/users",element:(0,Se.jsx)(Du,{})}),(0,Se.jsx)(me,{path:"/admin/behaviors",element:(0,Se.jsx)(Iu,{})}),(0,Se.jsx)(me,{path:"/admin/users/:id",element:(0,Se.jsx)(Du,{})})]})}),(0,Se.jsx)(me,{path:"/",element:(0,Se.jsx)(pe,{to:"/therapist/dashboard",replace:!0})}),(0,Se.jsx)(me,{path:"*",element:(0,Se.jsx)($u,{})})]})]})};s.createRoot(document.getElementById("root")).render((0,Se.jsx)(t.StrictMode,{children:(0,Se.jsx)(zn,{children:(0,Se.jsx)(Ne,{children:(0,Se.jsx)(zu,{})})})}))})()})();
//# sourceMappingURL=main.c58216d0.js.map