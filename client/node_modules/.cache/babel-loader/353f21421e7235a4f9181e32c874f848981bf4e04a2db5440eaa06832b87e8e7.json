{"ast":null,"code":"/**\n * Language Selector Component\n * \n * This component provides a UI for users to select their preferred language\n * for the application interface.\n */import React,{useState}from'react';import{useTranslation}from'react-i18next';import useLanguage from'../hooks/useLanguage';import{GlobeAltIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LanguageSelector=_ref=>{var _availableLanguages$f;let{className=''}=_ref;const{t}=useTranslation();const{currentLanguage,availableLanguages,changeLanguage}=useLanguage();const[isOpen,setIsOpen]=useState(false);const toggleDropdown=()=>{setIsOpen(!isOpen);};const handleLanguageChange=async languageCode=>{try{// Log the language change attempt\nconsole.log(`Changing language to: ${languageCode}`);// First, set the language in localStorage directly to ensure it persists\nlocalStorage.setItem('i18nextLng',languageCode);localStorage.setItem('language',languageCode);// Change language using the context function\nawait changeLanguage(languageCode);// Force reload the page to ensure all translations are applied\nwindow.location.href=window.location.pathname+'?lang='+languageCode;window.location.reload();}catch(error){console.error('Error changing language:',error);}finally{setIsOpen(false);}};// Get the current language name for display\nconst currentLanguageName=((_availableLanguages$f=availableLanguages.find(lang=>lang.code===currentLanguage))===null||_availableLanguages$f===void 0?void 0:_availableLanguages$f.name)||'English';return/*#__PURE__*/_jsxs(\"div\",{className:`relative ${className}`,children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:toggleDropdown,className:\"flex items-center text-secondary-500 hover:text-secondary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md\",\"aria-expanded\":isOpen,\"aria-haspopup\":\"true\",children:[/*#__PURE__*/_jsx(GlobeAltIcon,{className:\"h-5 w-5 mr-1\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:currentLanguageName})]}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10\",role:\"menu\",\"aria-orientation\":\"vertical\",\"aria-labelledby\":\"language-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-1\",role:\"none\",children:availableLanguages.map(language=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLanguageChange(language.code),className:`block px-4 py-2 text-sm w-full text-left ${currentLanguage===language.code?'bg-primary-100 text-primary-900 font-medium':'text-secondary-700 hover:bg-secondary-100'}`,role:\"menuitem\",children:language.name},language.code))})})]});};export default LanguageSelector;","map":{"version":3,"names":["React","useState","useTranslation","useLanguage","GlobeAltIcon","jsx","_jsx","jsxs","_jsxs","LanguageSelector","_ref","_availableLanguages$f","className","t","currentLanguage","availableLanguages","changeLanguage","isOpen","setIsOpen","toggleDropdown","handleLanguageChange","languageCode","console","log","localStorage","setItem","window","location","href","pathname","reload","error","currentLanguageName","find","lang","code","name","children","type","onClick","role","map","language"],"sources":["/Users/gio/development/smartterapist/client/src/components/LanguageSelector.js"],"sourcesContent":["/**\n * Language Selector Component\n * \n * This component provides a UI for users to select their preferred language\n * for the application interface.\n */\n\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport useLanguage from '../hooks/useLanguage';\nimport { GlobeAltIcon } from '@heroicons/react/24/outline';\n\nconst LanguageSelector = ({ className = '' }) => {\n  const { t } = useTranslation();\n  const { currentLanguage, availableLanguages, changeLanguage } = useLanguage();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const handleLanguageChange = async (languageCode) => {\n    try {\n      // Log the language change attempt\n      console.log(`Changing language to: ${languageCode}`);\n      \n      // First, set the language in localStorage directly to ensure it persists\n      localStorage.setItem('i18nextLng', languageCode);\n      localStorage.setItem('language', languageCode);\n      \n      // Change language using the context function\n      await changeLanguage(languageCode);\n      \n      // Force reload the page to ensure all translations are applied\n      window.location.href = window.location.pathname + '?lang=' + languageCode;\n      window.location.reload();\n    } catch (error) {\n      console.error('Error changing language:', error);\n    } finally {\n      setIsOpen(false);\n    }\n  };\n\n  // Get the current language name for display\n  const currentLanguageName = availableLanguages.find(\n    lang => lang.code === currentLanguage\n  )?.name || 'English';\n\n  return (\n    <div className={`relative ${className}`}>\n      <button\n        type=\"button\"\n        onClick={toggleDropdown}\n        className=\"flex items-center text-secondary-500 hover:text-secondary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"true\"\n      >\n        <GlobeAltIcon className=\"h-5 w-5 mr-1\" aria-hidden=\"true\" />\n        <span className=\"text-sm font-medium\">{currentLanguageName}</span>\n      </button>\n\n      {isOpen && (\n        <div \n          className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10\"\n          role=\"menu\"\n          aria-orientation=\"vertical\"\n          aria-labelledby=\"language-menu\"\n        >\n          <div className=\"py-1\" role=\"none\">\n            {availableLanguages.map((language) => (\n              <button\n                key={language.code}\n                onClick={() => handleLanguageChange(language.code)}\n                className={`block px-4 py-2 text-sm w-full text-left ${\n                  currentLanguage === language.code\n                    ? 'bg-primary-100 text-primary-900 font-medium'\n                    : 'text-secondary-700 hover:bg-secondary-100'\n                }`}\n                role=\"menuitem\"\n              >\n                {language.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LanguageSelector;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}