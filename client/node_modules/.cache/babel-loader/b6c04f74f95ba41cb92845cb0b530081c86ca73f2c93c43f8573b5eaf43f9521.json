{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{useAuth}from'../../hooks/useAuth';import{useTranslation}from'react-i18next';import{supabase}from'../../services/supabaseClient';import{therapistService}from'../../services/therapistService';import BehaviorPresetManager from'../../components/BehaviorPresetManager';import{Line}from'react-chartjs-2';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ClientDetail=()=>{var _client$users,_client$users$profile,_client$users2,_client$users3;const{id}=useParams();const{user}=useAuth();const{t}=useTranslation();const[client,setClient]=useState(null);const[conversations,setConversations]=useState([]);const[behaviors,setBehaviors]=useState([]);const[selectedBehavior,setSelectedBehavior]=useState(null);const[sentimentData,setSentimentData]=useState(null);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('profile');useEffect(()=>{const fetchClientData=async()=>{try{// Fetch client details\nconst{data:clientData,error:clientError}=await supabase.from('clients').select(`\n            *,\n            users:user_id (email, profile_data),\n            client_behaviors (\n              behaviors (id, name, prompt_template)\n            )\n          `).eq('id',id).single();if(clientError)throw clientError;// Fetch conversations and summaries\nconst{data:conversationsData,error:conversationsError}=await supabase.from('conversations').select(`\n            *,\n            summaries (\n              id,\n              summary_text,\n              sentiment_score,\n              key_topics,\n              created_at\n            ),\n            messages (\n              id,\n              sender,\n              text,\n              timestamp,\n              sentiment_score\n            )\n          `).eq('client_id',id).order('start_ts',{ascending:false});if(conversationsError)throw conversationsError;// Fetch available behaviors\nconst{data:behaviorsData,error:behaviorsError}=await supabase.from('behaviors').select('*').order('name',{ascending:true});if(behaviorsError)throw behaviorsError;setClient(clientData);setConversations(conversationsData||[]);setBehaviors(behaviorsData||[]);// Process sentiment data for chart\nif(conversationsData){const sentimentScores=conversationsData.flatMap(conv=>conv.messages).filter(msg=>msg.sentiment_score!==null).sort((a,b)=>new Date(a.timestamp)-new Date(b.timestamp));const chartData={labels:sentimentScores.map(msg=>new Date(msg.timestamp).toLocaleDateString()),datasets:[{label:'Sentiment Score',data:sentimentScores.map(msg=>msg.sentiment_score),borderColor:'rgb(75, 192, 192)',tension:0.1}]};setSentimentData(chartData);}}catch(error){console.error('Error fetching client data:',error);}finally{setLoading(false);}};fetchClientData();},[id]);// Handle client data refresh after behavior updates\nconst handleBehaviorUpdate=async()=>{try{// Refresh client data\nconst clientData=await therapistService.getClientDetails(id);setClient(clientData);}catch(error){console.error('Error refreshing client data:',error);}};// Handle adding a behavior to the client\nconst handleAddBehavior=async()=>{if(!selectedBehavior)return;try{// Add the behavior to the client using the therapist service\nawait therapistService.addClientBehavior(id,selectedBehavior,true);// Refresh client data\nawait handleBehaviorUpdate();// Reset the selected behavior\nsetSelectedBehavior(null);}catch(error){console.error('Error adding behavior:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500\"})});}if(!client){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-secondary-900\",children:\"Client not found\"}),/*#__PURE__*/_jsx(Link,{to:\"/therapist/clients\",className:\"mt-4 inline-block text-primary-600 hover:text-primary-700\",children:\"Return to client list\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-secondary-900\",children:client.users.profile_data.name}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-secondary-600\",children:client.users.email})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* Schedule session logic */},className:\"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600\",children:\"Schedule Session\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('profile'),className:`px-4 py-2 text-sm font-medium ${activeTab==='profile'?'border-b-2 border-primary-500 text-primary-600':'text-gray-500 hover:text-gray-700'}`,children:t('client.profile')}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('behaviors'),className:`px-4 py-2 text-sm font-medium ${activeTab==='behaviors'?'border-b-2 border-primary-500 text-primary-600':'text-gray-500 hover:text-gray-700'}`,children:t('client.behaviors')}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('sessions'),className:`px-4 py-2 text-sm font-medium ${activeTab==='sessions'?'border-b-2 border-primary-500 text-primary-600':'text-gray-500 hover:text-gray-700'}`,children:t('client.sessions')}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('sentiment'),className:`px-4 py-2 text-sm font-medium ${activeTab==='sentiment'?'border-b-2 border-primary-500 text-primary-600':'text-gray-500 hover:text-gray-700'}`,children:t('client.sentiment')})]}),activeTab==='profile'&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:t('client.profile')}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:t('common.name')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base text-gray-900\",children:((_client$users=client.users)===null||_client$users===void 0?void 0:(_client$users$profile=_client$users.profile_data)===null||_client$users$profile===void 0?void 0:_client$users$profile.name)||t('common.unknown')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:t('common.email')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base text-gray-900\",children:((_client$users2=client.users)===null||_client$users2===void 0?void 0:_client$users2.email)||t('common.unknown')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:t('client.clientSince')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base text-gray-900\",children:new Date(client.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:t('client.lastSession')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base text-gray-900\",children:client.last_session?new Date(client.last_session).toLocaleDateString():t('client.noSessions')})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:((_client$users3=client.users)===null||_client$users3===void 0?void 0:_client$users3.profile_data)&&/*#__PURE__*/_jsx(_Fragment,{children:Object.entries(client.users.profile_data).filter(_ref=>{let[key]=_ref;return!['name','avatar_url'].includes(key);}).map(_ref2=>{let[key,value]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:key.charAt(0).toUpperCase()+key.slice(1).replace('_',' ')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base text-gray-900\",children:typeof value==='object'?JSON.stringify(value):value.toString()})]},key);})})})]})]})}),activeTab==='behaviors'&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-3\",children:/*#__PURE__*/_jsx(BehaviorPresetManager,{clientId:id,onUpdate:handleBehaviorUpdate})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-secondary-900\",children:\"Total Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-3xl font-bold text-primary-600\",children:conversations.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-secondary-900\",children:\"Active Behaviors\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-3xl font-bold text-primary-600\",children:client.client_behaviors.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-secondary-900\",children:\"Average Sentiment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-3xl font-bold text-primary-600\",children:conversations.length>0?(conversations.reduce((acc,conv)=>{const scores=conv.messages.filter(msg=>msg.sentiment_score!==null).map(msg=>msg.sentiment_score);return acc+scores.reduce((a,b)=>a+b,0)/scores.length;},0)/conversations.length).toFixed(2):'N/A'})]})]}),sentimentData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-secondary-900 mb-4\",children:\"Sentiment Trends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Line,{data:sentimentData,options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true,max:1}}}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-secondary-900\",children:\"Active Behaviors\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedBehavior||'',onChange:e=>setSelectedBehavior(e.target.value),className:\"rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select behavior...\"}),behaviors.map(behavior=>/*#__PURE__*/_jsx(\"option\",{value:behavior.id,children:behavior.name},behavior.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddBehavior,disabled:!selectedBehavior,className:\"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 disabled:opacity-50\",children:\"Add Behavior\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:client.client_behaviors.map(_ref3=>{let{behaviors}=_ref3;return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-secondary-50 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-secondary-900\",children:behaviors.name}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-secondary-600\",children:behaviors.prompt_template})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* Remove behavior logic */},className:\"text-red-600 hover:text-red-700 text-sm font-medium\",children:\"Remove\"})]})},behaviors.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-secondary-900 mb-4\",children:\"Conversation History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:conversations.map(conversation=>{var _conversation$summari,_conversation$summari2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-secondary-200 last:border-0 pb-4 last:pb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-secondary-900\",children:new Date(conversation.start_ts).toLocaleString()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mt-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[\"Messages: \",conversation.messages.length]}),((_conversation$summari=conversation.summaries)===null||_conversation$summari===void 0?void 0:_conversation$summari[0])&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800\",children:[\"Sentiment: \",conversation.summaries[0].sentiment_score.toFixed(2)]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* View conversation logic */},className:\"text-primary-600 hover:text-primary-700 text-sm font-medium\",children:\"View Details\"})]}),((_conversation$summari2=conversation.summaries)===null||_conversation$summari2===void 0?void 0:_conversation$summari2[0])&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-secondary-600\",children:conversation.summaries[0].summary_text}),conversation.summaries[0].key_topics&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:conversation.summaries[0].key_topics.map((topic,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800\",children:topic},index))})]})]},conversation.id);})})]})]});};export default ClientDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useAuth","useTranslation","supabase","therapistService","BehaviorPresetManager","Line","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ClientDetail","_client$users","_client$users$profile","_client$users2","_client$users3","id","user","t","client","setClient","conversations","setConversations","behaviors","setBehaviors","selectedBehavior","setSelectedBehavior","sentimentData","setSentimentData","loading","setLoading","activeTab","setActiveTab","fetchClientData","data","clientData","error","clientError","from","select","eq","single","conversationsData","conversationsError","order","ascending","behaviorsData","behaviorsError","sentimentScores","flatMap","conv","messages","filter","msg","sentiment_score","sort","a","b","Date","timestamp","chartData","labels","map","toLocaleDateString","datasets","label","borderColor","tension","console","handleBehaviorUpdate","getClientDetails","handleAddBehavior","addClientBehavior","className","children","to","users","profile_data","name","email","onClick","created_at","last_session","Object","entries","_ref","key","includes","_ref2","value","charAt","toUpperCase","slice","replace","JSON","stringify","toString","clientId","onUpdate","length","client_behaviors","reduce","acc","scores","toFixed","options","responsive","maintainAspectRatio","scales","y","beginAtZero","max","onChange","e","target","behavior","disabled","_ref3","prompt_template","conversation","_conversation$summari","_conversation$summari2","start_ts","toLocaleString","summaries","summary_text","key_topics","topic","index"],"sources":["/Users/gio/development/smartterapist/client/src/pages/therapist/ClientDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth';\nimport { useTranslation } from 'react-i18next';\nimport { supabase } from '../../services/supabaseClient';\nimport { therapistService } from '../../services/therapistService';\nimport BehaviorPresetManager from '../../components/BehaviorPresetManager';\nimport { Line } from 'react-chartjs-2';\n\nconst ClientDetail = () => {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const { t } = useTranslation();\n  const [client, setClient] = useState(null);\n  const [conversations, setConversations] = useState([]);\n  const [behaviors, setBehaviors] = useState([]);\n  const [selectedBehavior, setSelectedBehavior] = useState(null);\n  const [sentimentData, setSentimentData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('profile');\n\n  useEffect(() => {\n    const fetchClientData = async () => {\n      try {\n        // Fetch client details\n        const { data: clientData, error: clientError } = await supabase\n          .from('clients')\n          .select(`\n            *,\n            users:user_id (email, profile_data),\n            client_behaviors (\n              behaviors (id, name, prompt_template)\n            )\n          `)\n          .eq('id', id)\n          .single();\n\n        if (clientError) throw clientError;\n\n        // Fetch conversations and summaries\n        const { data: conversationsData, error: conversationsError } = await supabase\n          .from('conversations')\n          .select(`\n            *,\n            summaries (\n              id,\n              summary_text,\n              sentiment_score,\n              key_topics,\n              created_at\n            ),\n            messages (\n              id,\n              sender,\n              text,\n              timestamp,\n              sentiment_score\n            )\n          `)\n          .eq('client_id', id)\n          .order('start_ts', { ascending: false });\n\n        if (conversationsError) throw conversationsError;\n\n        // Fetch available behaviors\n        const { data: behaviorsData, error: behaviorsError } = await supabase\n          .from('behaviors')\n          .select('*')\n          .order('name', { ascending: true });\n\n        if (behaviorsError) throw behaviorsError;\n\n        setClient(clientData);\n        setConversations(conversationsData || []);\n        setBehaviors(behaviorsData || []);\n\n        // Process sentiment data for chart\n        if (conversationsData) {\n          const sentimentScores = conversationsData\n            .flatMap(conv => conv.messages)\n            .filter(msg => msg.sentiment_score !== null)\n            .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n\n          const chartData = {\n            labels: sentimentScores.map(msg => new Date(msg.timestamp).toLocaleDateString()),\n            datasets: [{\n              label: 'Sentiment Score',\n              data: sentimentScores.map(msg => msg.sentiment_score),\n              borderColor: 'rgb(75, 192, 192)',\n              tension: 0.1\n            }]\n          };\n\n          setSentimentData(chartData);\n        }\n      } catch (error) {\n        console.error('Error fetching client data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchClientData();\n  }, [id]);\n\n  // Handle client data refresh after behavior updates\n  const handleBehaviorUpdate = async () => {\n    try {\n      // Refresh client data\n      const clientData = await therapistService.getClientDetails(id);\n      setClient(clientData);\n    } catch (error) {\n      console.error('Error refreshing client data:', error);\n    }\n  };\n  \n  // Handle adding a behavior to the client\n  const handleAddBehavior = async () => {\n    if (!selectedBehavior) return;\n\n    try {\n      // Add the behavior to the client using the therapist service\n      await therapistService.addClientBehavior(id, selectedBehavior, true);\n      \n      // Refresh client data\n      await handleBehaviorUpdate();\n      \n      // Reset the selected behavior\n      setSelectedBehavior(null);\n    } catch (error) {\n      console.error('Error adding behavior:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500\"></div>\n      </div>\n    );\n  }\n\n  if (!client) {\n    return (\n      <div className=\"text-center py-12\">\n        <h2 className=\"text-2xl font-semibold text-secondary-900\">Client not found</h2>\n        <Link\n          to=\"/therapist/clients\"\n          className=\"mt-4 inline-block text-primary-600 hover:text-primary-700\"\n        >\n          Return to client list\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Client Header */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"flex justify-between items-start\">\n          <div>\n            <h1 className=\"text-2xl font-semibold text-secondary-900\">\n              {client.users.profile_data.name}\n            </h1>\n            <p className=\"mt-1 text-secondary-600\">{client.users.email}</p>\n          </div>\n          <button\n            onClick={() => {/* Schedule session logic */}}\n            className=\"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600\"\n          >\n            Schedule Session\n          </button>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex border-b border-gray-200 mb-6\">\n        <button\n          onClick={() => setActiveTab('profile')}\n          className={`px-4 py-2 text-sm font-medium ${activeTab === 'profile' ? 'border-b-2 border-primary-500 text-primary-600' : 'text-gray-500 hover:text-gray-700'}`}\n        >\n          {t('client.profile')}\n        </button>\n        <button\n          onClick={() => setActiveTab('behaviors')}\n          className={`px-4 py-2 text-sm font-medium ${activeTab === 'behaviors' ? 'border-b-2 border-primary-500 text-primary-600' : 'text-gray-500 hover:text-gray-700'}`}\n        >\n          {t('client.behaviors')}\n        </button>\n        <button\n          onClick={() => setActiveTab('sessions')}\n          className={`px-4 py-2 text-sm font-medium ${activeTab === 'sessions' ? 'border-b-2 border-primary-500 text-primary-600' : 'text-gray-500 hover:text-gray-700'}`}\n        >\n          {t('client.sessions')}\n        </button>\n        <button\n          onClick={() => setActiveTab('sentiment')}\n          className={`px-4 py-2 text-sm font-medium ${activeTab === 'sentiment' ? 'border-b-2 border-primary-500 text-primary-600' : 'text-gray-500 hover:text-gray-700'}`}\n        >\n          {t('client.sentiment')}\n        </button>\n      </div>\n\n      {/* Client Profile Tab */}\n      {activeTab === 'profile' && (\n        <div className=\"md:col-span-3\">\n          <div className=\"bg-white rounded-xl shadow p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">{t('client.profile')}</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-500\">{t('common.name')}</h3>\n                  <p className=\"text-base text-gray-900\">{client.users?.profile_data?.name || t('common.unknown')}</p>\n                </div>\n                \n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-500\">{t('common.email')}</h3>\n                  <p className=\"text-base text-gray-900\">{client.users?.email || t('common.unknown')}</p>\n                </div>\n                \n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-500\">{t('client.clientSince')}</h3>\n                  <p className=\"text-base text-gray-900\">\n                    {new Date(client.created_at).toLocaleDateString()}\n                  </p>\n                </div>\n                \n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-500\">{t('client.lastSession')}</h3>\n                  <p className=\"text-base text-gray-900\">\n                    {client.last_session \n                      ? new Date(client.last_session).toLocaleDateString() \n                      : t('client.noSessions')}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                {client.users?.profile_data && (\n                  <>\n                    {Object.entries(client.users.profile_data)\n                      .filter(([key]) => !['name', 'avatar_url'].includes(key))\n                      .map(([key, value]) => (\n                        <div key={key}>\n                          <h3 className=\"text-sm font-medium text-gray-500\">\n                            {key.charAt(0).toUpperCase() + key.slice(1).replace('_', ' ')}\n                          </h3>\n                          <p className=\"text-base text-gray-900\">\n                            {typeof value === 'object' ? JSON.stringify(value) : value.toString()}\n                          </p>\n                        </div>\n                      ))\n                    }\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Behaviors Tab */}\n      {activeTab === 'behaviors' && (\n        <div className=\"md:col-span-3\">\n          <BehaviorPresetManager \n            clientId={id} \n            onUpdate={handleBehaviorUpdate} \n          />\n        </div>\n      )}\n\n      {/* Quick Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-lg font-medium text-secondary-900\">Total Sessions</h3>\n          <p className=\"mt-2 text-3xl font-bold text-primary-600\">\n            {conversations.length}\n          </p>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-lg font-medium text-secondary-900\">Active Behaviors</h3>\n          <p className=\"mt-2 text-3xl font-bold text-primary-600\">\n            {client.client_behaviors.length}\n          </p>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-lg font-medium text-secondary-900\">Average Sentiment</h3>\n          <p className=\"mt-2 text-3xl font-bold text-primary-600\">\n            {conversations.length > 0\n              ? (conversations.reduce((acc, conv) => {\n                  const scores = conv.messages\n                    .filter(msg => msg.sentiment_score !== null)\n                    .map(msg => msg.sentiment_score);\n                  return acc + (scores.reduce((a, b) => a + b, 0) / scores.length);\n                }, 0) / conversations.length).toFixed(2)\n              : 'N/A'}\n          </p>\n        </div>\n      </div>\n\n      {/* Sentiment Chart */}\n      {sentimentData && (\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h2 className=\"text-lg font-medium text-secondary-900 mb-4\">Sentiment Trends</h2>\n          <div className=\"h-64\">\n            <Line\n              data={sentimentData}\n              options={{\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                  y: {\n                    beginAtZero: true,\n                    max: 1\n                  }\n                }\n              }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Behavior Management */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-lg font-medium text-secondary-900\">Active Behaviors</h2>\n          <div className=\"flex items-center space-x-4\">\n            <select\n              value={selectedBehavior || ''}\n              onChange={(e) => setSelectedBehavior(e.target.value)}\n              className=\"rounded-lg border border-secondary-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n            >\n              <option value=\"\">Select behavior...</option>\n              {behaviors.map((behavior) => (\n                <option key={behavior.id} value={behavior.id}>\n                  {behavior.name}\n                </option>\n              ))}\n            </select>\n            <button\n              onClick={handleAddBehavior}\n              disabled={!selectedBehavior}\n              className=\"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 disabled:opacity-50\"\n            >\n              Add Behavior\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"space-y-4\">\n          {client.client_behaviors.map(({ behaviors }) => (\n            <div\n              key={behaviors.id}\n              className=\"p-4 bg-secondary-50 rounded-lg\"\n            >\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <h3 className=\"font-medium text-secondary-900\">{behaviors.name}</h3>\n                  <p className=\"mt-1 text-sm text-secondary-600\">\n                    {behaviors.prompt_template}\n                  </p>\n                </div>\n                <button\n                  onClick={() => {/* Remove behavior logic */}}\n                  className=\"text-red-600 hover:text-red-700 text-sm font-medium\"\n                >\n                  Remove\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Conversation History */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h2 className=\"text-lg font-medium text-secondary-900 mb-4\">Conversation History</h2>\n        <div className=\"space-y-4\">\n          {conversations.map((conversation) => (\n            <div\n              key={conversation.id}\n              className=\"border-b border-secondary-200 last:border-0 pb-4 last:pb-0\"\n            >\n              <div className=\"flex justify-between items-start mb-2\">\n                <div>\n                  <p className=\"font-medium text-secondary-900\">\n                    {new Date(conversation.start_ts).toLocaleString()}\n                  </p>\n                  <div className=\"flex items-center space-x-2 mt-1\">\n                    <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                      Messages: {conversation.messages.length}\n                    </span>\n                    {conversation.summaries?.[0] && (\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800\">\n                        Sentiment: {conversation.summaries[0].sentiment_score.toFixed(2)}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <button\n                  onClick={() => {/* View conversation logic */}}\n                  className=\"text-primary-600 hover:text-primary-700 text-sm font-medium\"\n                >\n                  View Details\n                </button>\n              </div>\n              {conversation.summaries?.[0] && (\n                <div className=\"mt-2\">\n                  <p className=\"text-sm text-secondary-600\">\n                    {conversation.summaries[0].summary_text}\n                  </p>\n                  {conversation.summaries[0].key_topics && (\n                    <div className=\"mt-2 flex flex-wrap gap-2\">\n                      {conversation.summaries[0].key_topics.map((topic, index) => (\n                        <span\n                          key={index}\n                          className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800\"\n                        >\n                          {topic}\n                        </span>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ClientDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}