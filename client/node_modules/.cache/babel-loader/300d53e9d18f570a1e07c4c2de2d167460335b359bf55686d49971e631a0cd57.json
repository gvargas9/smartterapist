{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAuth}from'../../hooks/useAuth';import{adminService}from'../../services/adminService';import{useTranslation}from'react-i18next';import{Line,Bar}from'react-chartjs-2';import'../../utils/chartConfig';import{UserGroupIcon,UserIcon,CurrencyDollarIcon,ChatBubbleLeftRightIcon,DocumentTextIcon,ArrowPathIcon,ArrowRightIcon,ChartBarIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{user}=useAuth();const{t}=useTranslation();// Ensure user data is properly initialized even if profile_data is missing\nconst[stats,setStats]=useState({totalUsers:0,activeClients:0,activeTherapists:0,totalRevenue:0,activeBehaviors:0,totalConversations:0,totalMessages:0,averageSentiment:0});const[recentUsers,setRecentUsers]=useState([]);const[recentBehaviors,setRecentBehaviors]=useState([]);const[userGrowthData,setUserGrowthData]=useState(null);const[userDistributionData,setUserDistributionData]=useState(null);const[loading,setLoading]=useState(true);const[refreshing,setRefreshing]=useState(false);const refreshDashboard=async()=>{setRefreshing(true);try{await fetchDashboardData();}finally{setRefreshing(false);}};const fetchDashboardData=async()=>{try{setLoading(true);// Fetch system stats from Supabase\nconst systemStats=await adminService.getSystemStats();// Fetch recent users\nconst usersData=await adminService.getUsers();const recentUsersData=usersData.slice(0,5);// Fetch recent behaviors\nconst behaviorsData=await adminService.getBehaviors();const recentBehaviorsData=behaviorsData.slice(0,5);// Process user data for charts\nconst usersByRole=processUsersByRole(usersData);const userGrowth=processUserGrowthData(usersData);// Calculate estimated revenue\nconst clientCount=usersData.filter(user=>user.role==='client').length;const estimatedRevenue=calculateEstimatedRevenue(clientCount);// Update state with fetched data\nsetStats({totalUsers:systemStats.users.total,activeClients:systemStats.users.clients,activeTherapists:systemStats.users.therapists,activeBehaviors:systemStats.behaviors,totalConversations:systemStats.conversations,totalMessages:systemStats.messages,totalRevenue:estimatedRevenue,averageSentiment:systemStats.averageSentiment||0});setRecentUsers(recentUsersData);setRecentBehaviors(recentBehaviorsData);setUserGrowthData(userGrowth);setUserDistributionData(usersByRole);}catch(error){console.error('Error fetching dashboard data:',error);}finally{setLoading(false);}};const processUsersByRole=users=>{// Count users by role\nconst roleCounts={client:0,therapist:0,admin:0};users.forEach(user=>{if(user.role in roleCounts){roleCounts[user.role]++;}});// Create chart data\nreturn{labels:['Clients','Therapists','Admins'],datasets:[{label:'Users by Role',data:[roleCounts.client,roleCounts.therapist,roleCounts.admin],backgroundColor:['rgba(54, 162, 235, 0.6)','rgba(153, 102, 255, 0.6)','rgba(255, 99, 132, 0.6)'],borderColor:['rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(255, 99, 132)'],borderWidth:1}]};};const processUserGrowthData=users=>{// Get data for the last 30 days\nconst thirtyDaysAgo=new Date();thirtyDaysAgo.setDate(thirtyDaysAgo.getDate()-30);// Filter users created in the last 30 days\nconst recentUsers=users.filter(user=>new Date(user.created_at)>=thirtyDaysAgo);// Group by date\nconst dailyCounts={};recentUsers.forEach(user=>{const date=new Date(user.created_at).toLocaleDateString();dailyCounts[date]=(dailyCounts[date]||0)+1;});// Sort dates\nconst sortedDates=Object.keys(dailyCounts).sort((a,b)=>new Date(a)-new Date(b));// Create chart data\nreturn{labels:sortedDates,datasets:[{label:'New Users',data:sortedDates.map(date=>dailyCounts[date]),borderColor:'rgb(59, 130, 246)',backgroundColor:'rgba(59, 130, 246, 0.1)',fill:true,tension:0.4}]};};const calculateEstimatedRevenue=clientCount=>{// Simple revenue estimation based on client count\n// This would be replaced with actual payment data in a real system\nconst averageSubscriptionPrice=49.99;return clientCount*averageSubscriptionPrice;};useEffect(()=>{// Always fetch dashboard data in development mode\nfetchDashboardData();},[]);if(loading&&!refreshing){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-purple-100 max-w-2xl\",children:\"Monitor and manage the platform's performance, users, and behavior presets\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:refreshDashboard,disabled:refreshing,className:\"flex items-center bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors text-white px-4 py-2 rounded-lg disabled:opacity-50\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:`h-5 w-5 mr-2 ${refreshing?'animate-spin':''}`}),\"Refresh\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Users\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalUsers}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex justify-between text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Clients: \",stats.activeClients]}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"|\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Therapists: \",stats.activeTherapists]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-purple-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-6 w-6 text-purple-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Behavior Presets\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.activeBehaviors})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-6 w-6 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Est. Monthly Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[\"$\",stats.totalRevenue.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-indigo-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-6 w-6 text-indigo-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Platform Activity\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalMessages}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Across \",stats.totalConversations,\" conversations\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-8\",children:[userGrowthData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"User Growth\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Last 30 days\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Line,{data:userGrowthData,options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:function(context){return`New users: ${context.parsed.y}`;}}}},scales:{y:{beginAtZero:true,ticks:{stepSize:1},title:{display:true,text:'New Users'}},x:{title:{display:true,text:'Date'}}}}},\"user-growth-chart\")})]}),userDistributionData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"User Distribution\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Bar,{data:userDistributionData,options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,title:{display:true,text:'Number of Users'}}}}},\"user-distribution-chart\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"Recent Users\"}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/users\",className:\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\",children:[\"View All \",/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"h-4 w-4 ml-1\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[recentUsers.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(UserIcon,{className:\"h-5 w-5 text-indigo-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:user.name||'Unnamed User'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"capitalize\",children:user.role}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-1\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(user.created_at).toLocaleDateString()})]})]})]}),/*#__PURE__*/_jsx(Link,{to:`/admin/users/${user.id}`,className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"Details\"})]},user.id)),recentUsers.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No users found\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"Recent Behavior Presets\"}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/behaviors\",className:\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\",children:[\"View All \",/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"h-4 w-4 ml-1\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[recentBehaviors.map(behavior=>{var _behavior$created_by;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:behavior.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Created by: \",((_behavior$created_by=behavior.created_by)===null||_behavior$created_by===void 0?void 0:_behavior$created_by.name)||'Unknown']})]}),/*#__PURE__*/_jsx(Link,{to:`/admin/behaviors/${behavior.id}`,className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"Edit\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2 line-clamp-2\",children:behavior.prompt_template?behavior.prompt_template.substring(0,100)+'...':behavior.description||'No description available'})]},behavior.id);}),recentBehaviors.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No behavior presets found\"})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-6\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/users/new\",className:\"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-5 w-5 text-blue-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Create New User\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/behaviors/new\",className:\"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 text-purple-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Create Behavior Preset\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/reports\",className:\"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-5 w-5 text-green-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"View Reports\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/behaviors\",className:\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-secondary-900\",children:\"Manage Behaviors\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-secondary-600\",children:\"Configure AI agent behavior presets\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/users\",className:\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-secondary-900\",children:\"User Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-secondary-600\",children:\"Manage users and permissions\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/subscriptions\",className:\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-secondary-900\",children:\"Subscriptions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-secondary-600\",children:\"Manage subscription plans and billing\"})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","useAuth","adminService","useTranslation","Line","Bar","UserGroupIcon","UserIcon","CurrencyDollarIcon","ChatBubbleLeftRightIcon","DocumentTextIcon","ArrowPathIcon","ArrowRightIcon","ChartBarIcon","jsx","_jsx","jsxs","_jsxs","Dashboard","user","t","stats","setStats","totalUsers","activeClients","activeTherapists","totalRevenue","activeBehaviors","totalConversations","totalMessages","averageSentiment","recentUsers","setRecentUsers","recentBehaviors","setRecentBehaviors","userGrowthData","setUserGrowthData","userDistributionData","setUserDistributionData","loading","setLoading","refreshing","setRefreshing","refreshDashboard","fetchDashboardData","systemStats","getSystemStats","usersData","getUsers","recentUsersData","slice","behaviorsData","getBehaviors","recentBehaviorsData","usersByRole","processUsersByRole","userGrowth","processUserGrowthData","clientCount","filter","role","length","estimatedRevenue","calculateEstimatedRevenue","users","total","clients","therapists","behaviors","conversations","messages","error","console","roleCounts","client","therapist","admin","forEach","labels","datasets","label","data","backgroundColor","borderColor","borderWidth","thirtyDaysAgo","Date","setDate","getDate","created_at","dailyCounts","date","toLocaleDateString","sortedDates","Object","keys","sort","a","b","map","fill","tension","averageSubscriptionPrice","className","children","onClick","disabled","toFixed","options","responsive","maintainAspectRatio","plugins","legend","position","tooltip","callbacks","context","parsed","y","scales","beginAtZero","ticks","stepSize","title","display","text","x","to","name","id","behavior","_behavior$created_by","created_by","prompt_template","substring","description"],"sources":["/Users/gio/development/smartterapist/client/src/pages/admin/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth';\nimport { adminService } from '../../services/adminService';\nimport { useTranslation } from 'react-i18next';\nimport { Line, Bar } from 'react-chartjs-2';\nimport '../../utils/chartConfig';\nimport {\n  UserGroupIcon,\n  UserIcon,\n  CurrencyDollarIcon,\n  ChatBubbleLeftRightIcon,\n  DocumentTextIcon,\n  ArrowPathIcon,\n  ArrowRightIcon,\n  ChartBarIcon\n} from '@heroicons/react/24/outline';\n\nconst Dashboard = () => {\n  const { user } = useAuth();\n  const { t } = useTranslation();\n  // Ensure user data is properly initialized even if profile_data is missing\n  const [stats, setStats] = useState({\n    totalUsers: 0,\n    activeClients: 0,\n    activeTherapists: 0,\n    totalRevenue: 0,\n    activeBehaviors: 0,\n    totalConversations: 0,\n    totalMessages: 0,\n    averageSentiment: 0\n  });\n  const [recentUsers, setRecentUsers] = useState([]);\n  const [recentBehaviors, setRecentBehaviors] = useState([]);\n  const [userGrowthData, setUserGrowthData] = useState(null);\n  const [userDistributionData, setUserDistributionData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const refreshDashboard = async () => {\n    setRefreshing(true);\n    try {\n      await fetchDashboardData();\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch system stats from Supabase\n      const systemStats = await adminService.getSystemStats();\n      \n      // Fetch recent users\n      const usersData = await adminService.getUsers();\n      const recentUsersData = usersData.slice(0, 5);\n      \n      // Fetch recent behaviors\n      const behaviorsData = await adminService.getBehaviors();\n      const recentBehaviorsData = behaviorsData.slice(0, 5);\n      \n      // Process user data for charts\n      const usersByRole = processUsersByRole(usersData);\n      const userGrowth = processUserGrowthData(usersData);\n      \n      // Calculate estimated revenue\n      const clientCount = usersData.filter(user => user.role === 'client').length;\n      const estimatedRevenue = calculateEstimatedRevenue(clientCount);\n      \n      // Update state with fetched data\n      setStats({\n        totalUsers: systemStats.users.total,\n        activeClients: systemStats.users.clients,\n        activeTherapists: systemStats.users.therapists,\n        activeBehaviors: systemStats.behaviors,\n        totalConversations: systemStats.conversations,\n        totalMessages: systemStats.messages,\n        totalRevenue: estimatedRevenue,\n        averageSentiment: systemStats.averageSentiment || 0\n      });\n      \n      setRecentUsers(recentUsersData);\n      setRecentBehaviors(recentBehaviorsData);\n      setUserGrowthData(userGrowth);\n      setUserDistributionData(usersByRole);\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const processUsersByRole = (users) => {\n    // Count users by role\n    const roleCounts = {\n      client: 0,\n      therapist: 0,\n      admin: 0\n    };\n    \n    users.forEach(user => {\n      if (user.role in roleCounts) {\n        roleCounts[user.role]++;\n      }\n    });\n    \n    // Create chart data\n    return {\n      labels: ['Clients', 'Therapists', 'Admins'],\n      datasets: [{\n        label: 'Users by Role',\n        data: [roleCounts.client, roleCounts.therapist, roleCounts.admin],\n        backgroundColor: [\n          'rgba(54, 162, 235, 0.6)',\n          'rgba(153, 102, 255, 0.6)',\n          'rgba(255, 99, 132, 0.6)'\n        ],\n        borderColor: [\n          'rgb(54, 162, 235)',\n          'rgb(153, 102, 255)',\n          'rgb(255, 99, 132)'\n        ],\n        borderWidth: 1\n      }]\n    };\n  };\n  \n  const processUserGrowthData = (users) => {\n    // Get data for the last 30 days\n    const thirtyDaysAgo = new Date();\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n    \n    // Filter users created in the last 30 days\n    const recentUsers = users.filter(user => \n      new Date(user.created_at) >= thirtyDaysAgo\n    );\n    \n    // Group by date\n    const dailyCounts = {};\n    recentUsers.forEach(user => {\n      const date = new Date(user.created_at).toLocaleDateString();\n      dailyCounts[date] = (dailyCounts[date] || 0) + 1;\n    });\n    \n    // Sort dates\n    const sortedDates = Object.keys(dailyCounts).sort(\n      (a, b) => new Date(a) - new Date(b)\n    );\n    \n    // Create chart data\n    return {\n      labels: sortedDates,\n      datasets: [{\n        label: 'New Users',\n        data: sortedDates.map(date => dailyCounts[date]),\n        borderColor: 'rgb(59, 130, 246)',\n        backgroundColor: 'rgba(59, 130, 246, 0.1)',\n        fill: true,\n        tension: 0.4\n      }]\n    };\n  };\n  \n  const calculateEstimatedRevenue = (clientCount) => {\n    // Simple revenue estimation based on client count\n    // This would be replaced with actual payment data in a real system\n    const averageSubscriptionPrice = 49.99;\n    return clientCount * averageSubscriptionPrice;\n  };\n\n  useEffect(() => {\n    // Always fetch dashboard data in development mode\n    fetchDashboardData();\n  }, []);\n\n  if (loading && !refreshing) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n      {/* Welcome Section */}\n      <div className=\"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">\n              Admin Dashboard\n            </h1>\n            <p className=\"mt-2 text-purple-100 max-w-2xl\">\n              Monitor and manage the platform's performance, users, and behavior presets\n            </p>\n          </div>\n          <button\n            onClick={refreshDashboard}\n            disabled={refreshing}\n            className=\"flex items-center bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors text-white px-4 py-2 rounded-lg disabled:opacity-50\"\n          >\n            <ArrowPathIcon className={`h-5 w-5 mr-2 ${refreshing ? 'animate-spin' : ''}`} />\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-blue-100 rounded-full mr-4\">\n            <UserGroupIcon className=\"h-6 w-6 text-blue-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">Total Users</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.totalUsers}</p>\n            <div className=\"mt-1 flex justify-between text-xs text-gray-500\">\n              <span>Clients: {stats.activeClients}</span>\n              <span className=\"mx-2\">|</span>\n              <span>Therapists: {stats.activeTherapists}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-purple-100 rounded-full mr-4\">\n            <DocumentTextIcon className=\"h-6 w-6 text-purple-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">Behavior Presets</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.activeBehaviors}</p>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-green-100 rounded-full mr-4\">\n            <CurrencyDollarIcon className=\"h-6 w-6 text-green-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">Est. Monthly Revenue</p>\n            <p className=\"text-2xl font-bold text-gray-900\">${stats.totalRevenue.toFixed(2)}</p>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-indigo-100 rounded-full mr-4\">\n            <ChatBubbleLeftRightIcon className=\"h-6 w-6 text-indigo-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">Platform Activity</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.totalMessages}</p>\n            <p className=\"text-xs text-gray-500 mt-1\">Across {stats.totalConversations} conversations</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8\">\n        {/* Left Column - Charts */}\n        <div className=\"lg:col-span-2 space-y-8\">\n          {/* User Growth Chart */}\n          {userGrowthData && (\n            <div className=\"bg-white rounded-xl shadow p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-xl font-semibold text-gray-800\">User Growth</h2>\n                <div className=\"text-sm text-gray-500\">Last 30 days</div>\n              </div>\n              <div className=\"h-64\">\n                <Line\n                  key=\"user-growth-chart\"\n                  data={userGrowthData}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: {\n                        position: 'top',\n                      },\n                      tooltip: {\n                        callbacks: {\n                          label: function(context) {\n                            return `New users: ${context.parsed.y}`;\n                          }\n                        }\n                      }\n                    },\n                    scales: {\n                      y: {\n                        beginAtZero: true,\n                        ticks: {\n                          stepSize: 1\n                        },\n                        title: {\n                          display: true,\n                          text: 'New Users'\n                        }\n                      },\n                      x: {\n                        title: {\n                          display: true,\n                          text: 'Date'\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n            </div>\n          )}\n          \n          {/* User Distribution Chart */}\n          {userDistributionData && (\n            <div className=\"bg-white rounded-xl shadow p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-xl font-semibold text-gray-800\">User Distribution</h2>\n              </div>\n              <div className=\"h-64\">\n                <Bar\n                  key=\"user-distribution-chart\"\n                  data={userDistributionData}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: {\n                        display: false\n                      }\n                    },\n                    scales: {\n                      y: {\n                        beginAtZero: true,\n                        title: {\n                          display: true,\n                          text: 'Number of Users'\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Right Column - Recent Data */}\n        <div className=\"space-y-8\">\n          {/* Recent Users */}\n          <div className=\"bg-white rounded-xl shadow p-6\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-800\">Recent Users</h2>\n              <Link\n                to=\"/admin/users\"\n                className=\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\"\n              >\n                View All <ArrowRightIcon className=\"h-4 w-4 ml-1\" />\n              </Link>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {recentUsers.map((user) => (\n                <div key={user.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center\">\n                      <UserIcon className=\"h-5 w-5 text-indigo-600\" />\n                    </div>\n                    <div className=\"ml-4\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {user.name || 'Unnamed User'}\n                      </div>\n                      <div className=\"text-xs text-gray-500 flex items-center\">\n                        <span className=\"capitalize\">{user.role}</span>\n                        <span className=\"mx-1\">•</span>\n                        <span>{new Date(user.created_at).toLocaleDateString()}</span>\n                      </div>\n                    </div>\n                  </div>\n                  <Link\n                    to={`/admin/users/${user.id}`}\n                    className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                  >\n                    Details\n                  </Link>\n                </div>\n              ))}\n              \n              {recentUsers.length === 0 && (\n                <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                  <p className=\"text-gray-500\">No users found</p>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Recent Behavior Presets */}\n          <div className=\"bg-white rounded-xl shadow p-6\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-800\">Recent Behavior Presets</h2>\n              <Link\n                to=\"/admin/behaviors\"\n                className=\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\"\n              >\n                View All <ArrowRightIcon className=\"h-4 w-4 ml-1\" />\n              </Link>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {recentBehaviors.map((behavior) => (\n                <div key={behavior.id} className=\"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\">\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{behavior.name}</p>\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Created by: {behavior.created_by?.name || 'Unknown'}\n                      </p>\n                    </div>\n                    <Link\n                      to={`/admin/behaviors/${behavior.id}`}\n                      className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                    >\n                      Edit\n                    </Link>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\n                    {behavior.prompt_template ? behavior.prompt_template.substring(0, 100) + '...' : behavior.description || 'No description available'}\n                  </p>\n                </div>\n              ))}\n              \n              {recentBehaviors.length === 0 && (\n                <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                  <p className=\"text-gray-500\">No behavior presets found</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Quick Actions */}\n      <div className=\"bg-white rounded-xl shadow p-6\">\n        <h2 className=\"text-xl font-semibold text-gray-800 mb-6\">Quick Actions</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <Link\n            to=\"/admin/users/new\"\n            className=\"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n          >\n            <UserIcon className=\"h-5 w-5 text-blue-600 mr-3\" />\n            <span className=\"text-gray-900\">Create New User</span>\n          </Link>\n          \n          <Link\n            to=\"/admin/behaviors/new\"\n            className=\"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n          >\n            <DocumentTextIcon className=\"h-5 w-5 text-purple-600 mr-3\" />\n            <span className=\"text-gray-900\">Create Behavior Preset</span>\n          </Link>\n          \n          <Link\n            to=\"/admin/reports\"\n            className=\"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n          >\n            <ChartBarIcon className=\"h-5 w-5 text-green-600 mr-3\" />\n            <span className=\"text-gray-900\">View Reports</span>\n          </Link>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <Link\n          to=\"/admin/behaviors\"\n          className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\"\n        >\n          <h3 className=\"text-lg font-medium text-secondary-900\">Manage Behaviors</h3>\n          <p className=\"mt-2 text-secondary-600\">\n            Configure AI agent behavior presets\n          </p>\n        </Link>\n        \n        <Link\n          to=\"/admin/users\"\n          className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\"\n        >\n          <h3 className=\"text-lg font-medium text-secondary-900\">User Management</h3>\n          <p className=\"mt-2 text-secondary-600\">\n            Manage users and permissions\n          </p>\n        </Link>\n        \n        <Link\n          to=\"/admin/subscriptions\"\n          className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\"\n        >\n          <h3 className=\"text-lg font-medium text-secondary-900\">Subscriptions</h3>\n          <p className=\"mt-2 text-secondary-600\">\n            Manage subscription plans and billing\n          </p>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,OAAO,KAAQ,qBAAqB,CAC7C,OAASC,YAAY,KAAQ,6BAA6B,CAC1D,OAASC,cAAc,KAAQ,eAAe,CAC9C,OAASC,IAAI,CAAEC,GAAG,KAAQ,iBAAiB,CAC3C,MAAO,yBAAyB,CAChC,OACEC,aAAa,CACbC,QAAQ,CACRC,kBAAkB,CAClBC,uBAAuB,CACvBC,gBAAgB,CAChBC,aAAa,CACbC,cAAc,CACdC,YAAY,KACP,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAEC,IAAK,CAAC,CAAGlB,OAAO,CAAC,CAAC,CAC1B,KAAM,CAAEmB,CAAE,CAAC,CAAGjB,cAAc,CAAC,CAAC,CAC9B;AACA,KAAM,CAACkB,KAAK,CAAEC,QAAQ,CAAC,CAAGxB,QAAQ,CAAC,CACjCyB,UAAU,CAAE,CAAC,CACbC,aAAa,CAAE,CAAC,CAChBC,gBAAgB,CAAE,CAAC,CACnBC,YAAY,CAAE,CAAC,CACfC,eAAe,CAAE,CAAC,CAClBC,kBAAkB,CAAE,CAAC,CACrBC,aAAa,CAAE,CAAC,CAChBC,gBAAgB,CAAE,CACpB,CAAC,CAAC,CACF,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGlC,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACmC,eAAe,CAAEC,kBAAkB,CAAC,CAAGpC,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACqC,cAAc,CAAEC,iBAAiB,CAAC,CAAGtC,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAACuC,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGxC,QAAQ,CAAC,IAAI,CAAC,CACtE,KAAM,CAACyC,OAAO,CAAEC,UAAU,CAAC,CAAG1C,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC2C,UAAU,CAAEC,aAAa,CAAC,CAAG5C,QAAQ,CAAC,KAAK,CAAC,CAEnD,KAAM,CAAA6C,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnCD,aAAa,CAAC,IAAI,CAAC,CACnB,GAAI,CACF,KAAM,CAAAE,kBAAkB,CAAC,CAAC,CAC5B,CAAC,OAAS,CACRF,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACFJ,UAAU,CAAC,IAAI,CAAC,CAEhB;AACA,KAAM,CAAAK,WAAW,CAAG,KAAM,CAAA3C,YAAY,CAAC4C,cAAc,CAAC,CAAC,CAEvD;AACA,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAA7C,YAAY,CAAC8C,QAAQ,CAAC,CAAC,CAC/C,KAAM,CAAAC,eAAe,CAAGF,SAAS,CAACG,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAE7C;AACA,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAjD,YAAY,CAACkD,YAAY,CAAC,CAAC,CACvD,KAAM,CAAAC,mBAAmB,CAAGF,aAAa,CAACD,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAErD;AACA,KAAM,CAAAI,WAAW,CAAGC,kBAAkB,CAACR,SAAS,CAAC,CACjD,KAAM,CAAAS,UAAU,CAAGC,qBAAqB,CAACV,SAAS,CAAC,CAEnD;AACA,KAAM,CAAAW,WAAW,CAAGX,SAAS,CAACY,MAAM,CAACxC,IAAI,EAAIA,IAAI,CAACyC,IAAI,GAAK,QAAQ,CAAC,CAACC,MAAM,CAC3E,KAAM,CAAAC,gBAAgB,CAAGC,yBAAyB,CAACL,WAAW,CAAC,CAE/D;AACApC,QAAQ,CAAC,CACPC,UAAU,CAAEsB,WAAW,CAACmB,KAAK,CAACC,KAAK,CACnCzC,aAAa,CAAEqB,WAAW,CAACmB,KAAK,CAACE,OAAO,CACxCzC,gBAAgB,CAAEoB,WAAW,CAACmB,KAAK,CAACG,UAAU,CAC9CxC,eAAe,CAAEkB,WAAW,CAACuB,SAAS,CACtCxC,kBAAkB,CAAEiB,WAAW,CAACwB,aAAa,CAC7CxC,aAAa,CAAEgB,WAAW,CAACyB,QAAQ,CACnC5C,YAAY,CAAEoC,gBAAgB,CAC9BhC,gBAAgB,CAAEe,WAAW,CAACf,gBAAgB,EAAI,CACpD,CAAC,CAAC,CAEFE,cAAc,CAACiB,eAAe,CAAC,CAC/Bf,kBAAkB,CAACmB,mBAAmB,CAAC,CACvCjB,iBAAiB,CAACoB,UAAU,CAAC,CAC7BlB,uBAAuB,CAACgB,WAAW,CAAC,CACtC,CAAE,MAAOiB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CAAC,OAAS,CACR/B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAe,kBAAkB,CAAIS,KAAK,EAAK,CACpC;AACA,KAAM,CAAAS,UAAU,CAAG,CACjBC,MAAM,CAAE,CAAC,CACTC,SAAS,CAAE,CAAC,CACZC,KAAK,CAAE,CACT,CAAC,CAEDZ,KAAK,CAACa,OAAO,CAAC1D,IAAI,EAAI,CACpB,GAAIA,IAAI,CAACyC,IAAI,GAAI,CAAAa,UAAU,CAAE,CAC3BA,UAAU,CAACtD,IAAI,CAACyC,IAAI,CAAC,EAAE,CACzB,CACF,CAAC,CAAC,CAEF;AACA,MAAO,CACLkB,MAAM,CAAE,CAAC,SAAS,CAAE,YAAY,CAAE,QAAQ,CAAC,CAC3CC,QAAQ,CAAE,CAAC,CACTC,KAAK,CAAE,eAAe,CACtBC,IAAI,CAAE,CAACR,UAAU,CAACC,MAAM,CAAED,UAAU,CAACE,SAAS,CAAEF,UAAU,CAACG,KAAK,CAAC,CACjEM,eAAe,CAAE,CACf,yBAAyB,CACzB,0BAA0B,CAC1B,yBAAyB,CAC1B,CACDC,WAAW,CAAE,CACX,mBAAmB,CACnB,oBAAoB,CACpB,mBAAmB,CACpB,CACDC,WAAW,CAAE,CACf,CAAC,CACH,CAAC,CACH,CAAC,CAED,KAAM,CAAA3B,qBAAqB,CAAIO,KAAK,EAAK,CACvC;AACA,KAAM,CAAAqB,aAAa,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAChCD,aAAa,CAACE,OAAO,CAACF,aAAa,CAACG,OAAO,CAAC,CAAC,CAAG,EAAE,CAAC,CAEnD;AACA,KAAM,CAAAzD,WAAW,CAAGiC,KAAK,CAACL,MAAM,CAACxC,IAAI,EACnC,GAAI,CAAAmE,IAAI,CAACnE,IAAI,CAACsE,UAAU,CAAC,EAAIJ,aAC/B,CAAC,CAED;AACA,KAAM,CAAAK,WAAW,CAAG,CAAC,CAAC,CACtB3D,WAAW,CAAC8C,OAAO,CAAC1D,IAAI,EAAI,CAC1B,KAAM,CAAAwE,IAAI,CAAG,GAAI,CAAAL,IAAI,CAACnE,IAAI,CAACsE,UAAU,CAAC,CAACG,kBAAkB,CAAC,CAAC,CAC3DF,WAAW,CAACC,IAAI,CAAC,CAAG,CAACD,WAAW,CAACC,IAAI,CAAC,EAAI,CAAC,EAAI,CAAC,CAClD,CAAC,CAAC,CAEF;AACA,KAAM,CAAAE,WAAW,CAAGC,MAAM,CAACC,IAAI,CAACL,WAAW,CAAC,CAACM,IAAI,CAC/C,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAZ,IAAI,CAACW,CAAC,CAAC,CAAG,GAAI,CAAAX,IAAI,CAACY,CAAC,CACpC,CAAC,CAED;AACA,MAAO,CACLpB,MAAM,CAAEe,WAAW,CACnBd,QAAQ,CAAE,CAAC,CACTC,KAAK,CAAE,WAAW,CAClBC,IAAI,CAAEY,WAAW,CAACM,GAAG,CAACR,IAAI,EAAID,WAAW,CAACC,IAAI,CAAC,CAAC,CAChDR,WAAW,CAAE,mBAAmB,CAChCD,eAAe,CAAE,yBAAyB,CAC1CkB,IAAI,CAAE,IAAI,CACVC,OAAO,CAAE,GACX,CAAC,CACH,CAAC,CACH,CAAC,CAED,KAAM,CAAAtC,yBAAyB,CAAIL,WAAW,EAAK,CACjD;AACA;AACA,KAAM,CAAA4C,wBAAwB,CAAG,KAAK,CACtC,MAAO,CAAA5C,WAAW,CAAG4C,wBAAwB,CAC/C,CAAC,CAEDvG,SAAS,CAAC,IAAM,CACd;AACA6C,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIL,OAAO,EAAI,CAACE,UAAU,CAAE,CAC1B,mBACE1B,IAAA,QAAKwF,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtDzF,IAAA,QAAKwF,SAAS,CAAC,gEAAgE,CAAM,CAAC,CACnF,CAAC,CAEV,CAEA,mBACEtF,KAAA,QAAKsF,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAE1DzF,IAAA,QAAKwF,SAAS,CAAC,yFAAyF,CAAAC,QAAA,cACtGvF,KAAA,QAAKsF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,OAAIwF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,iBAEnC,CAAI,CAAC,cACLzF,IAAA,MAAGwF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,4EAE9C,CAAG,CAAC,EACD,CAAC,cACNvF,KAAA,WACEwF,OAAO,CAAE9D,gBAAiB,CAC1B+D,QAAQ,CAAEjE,UAAW,CACrB8D,SAAS,CAAC,oIAAoI,CAAAC,QAAA,eAE9IzF,IAAA,CAACJ,aAAa,EAAC4F,SAAS,CAAE,gBAAgB9D,UAAU,CAAG,cAAc,CAAG,EAAE,EAAG,CAAE,CAAC,UAElF,EAAQ,CAAC,EACN,CAAC,CACH,CAAC,cAGNxB,KAAA,QAAKsF,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACxEvF,KAAA,QAAKsF,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DzF,IAAA,QAAKwF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAChDzF,IAAA,CAACT,aAAa,EAACiG,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAChD,CAAC,cACNtF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,MAAGwF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,aAAW,CAAG,CAAC,cACpDzF,IAAA,MAAGwF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEnF,KAAK,CAACE,UAAU,CAAI,CAAC,cACtEN,KAAA,QAAKsF,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9DvF,KAAA,SAAAuF,QAAA,EAAM,WAAS,CAACnF,KAAK,CAACG,aAAa,EAAO,CAAC,cAC3CT,IAAA,SAAMwF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,cAC/BvF,KAAA,SAAAuF,QAAA,EAAM,cAAY,CAACnF,KAAK,CAACI,gBAAgB,EAAO,CAAC,EAC9C,CAAC,EACH,CAAC,EACH,CAAC,cAENR,KAAA,QAAKsF,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DzF,IAAA,QAAKwF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAClDzF,IAAA,CAACL,gBAAgB,EAAC6F,SAAS,CAAC,yBAAyB,CAAE,CAAC,CACrD,CAAC,cACNtF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,MAAGwF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,kBAAgB,CAAG,CAAC,cACzDzF,IAAA,MAAGwF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEnF,KAAK,CAACM,eAAe,CAAI,CAAC,EACxE,CAAC,EACH,CAAC,cAENV,KAAA,QAAKsF,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DzF,IAAA,QAAKwF,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACjDzF,IAAA,CAACP,kBAAkB,EAAC+F,SAAS,CAAC,wBAAwB,CAAE,CAAC,CACtD,CAAC,cACNtF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,MAAGwF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,sBAAoB,CAAG,CAAC,cAC7DvF,KAAA,MAAGsF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,EAAC,GAAC,CAACnF,KAAK,CAACK,YAAY,CAACiF,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,EACjF,CAAC,EACH,CAAC,cAEN1F,KAAA,QAAKsF,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DzF,IAAA,QAAKwF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAClDzF,IAAA,CAACN,uBAAuB,EAAC8F,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC5D,CAAC,cACNtF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,MAAGwF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,mBAAiB,CAAG,CAAC,cAC1DzF,IAAA,MAAGwF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEnF,KAAK,CAACQ,aAAa,CAAI,CAAC,cACzEZ,KAAA,MAAGsF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,SAAO,CAACnF,KAAK,CAACO,kBAAkB,CAAC,gBAAc,EAAG,CAAC,EAC1F,CAAC,EACH,CAAC,EACH,CAAC,cAGNX,KAAA,QAAKsF,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eAEzDvF,KAAA,QAAKsF,SAAS,CAAC,yBAAyB,CAAAC,QAAA,EAErCrE,cAAc,eACblB,KAAA,QAAKsF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CvF,KAAA,QAAKsF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDzF,IAAA,OAAIwF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cACpEzF,IAAA,QAAKwF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,EACtD,CAAC,cACNzF,IAAA,QAAKwF,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBzF,IAAA,CAACX,IAAI,EAEH6E,IAAI,CAAE9C,cAAe,CACrByE,OAAO,CAAE,CACPC,UAAU,CAAE,IAAI,CAChBC,mBAAmB,CAAE,KAAK,CAC1BC,OAAO,CAAE,CACPC,MAAM,CAAE,CACNC,QAAQ,CAAE,KACZ,CAAC,CACDC,OAAO,CAAE,CACPC,SAAS,CAAE,CACTnC,KAAK,CAAE,QAAAA,CAASoC,OAAO,CAAE,CACvB,MAAO,cAAcA,OAAO,CAACC,MAAM,CAACC,CAAC,EAAE,CACzC,CACF,CACF,CACF,CAAC,CACDC,MAAM,CAAE,CACND,CAAC,CAAE,CACDE,WAAW,CAAE,IAAI,CACjBC,KAAK,CAAE,CACLC,QAAQ,CAAE,CACZ,CAAC,CACDC,KAAK,CAAE,CACLC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,WACR,CACF,CAAC,CACDC,CAAC,CAAE,CACDH,KAAK,CAAE,CACLC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,MACR,CACF,CACF,CACF,CAAE,EAnCE,mBAoCL,CAAC,CACC,CAAC,EACH,CACN,CAGAxF,oBAAoB,eACnBpB,KAAA,QAAKsF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CzF,IAAA,QAAKwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrDzF,IAAA,OAAIwF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,CACvE,CAAC,cACNzF,IAAA,QAAKwF,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBzF,IAAA,CAACV,GAAG,EAEF4E,IAAI,CAAE5C,oBAAqB,CAC3BuE,OAAO,CAAE,CACPC,UAAU,CAAE,IAAI,CAChBC,mBAAmB,CAAE,KAAK,CAC1BC,OAAO,CAAE,CACPC,MAAM,CAAE,CACNY,OAAO,CAAE,KACX,CACF,CAAC,CACDL,MAAM,CAAE,CACND,CAAC,CAAE,CACDE,WAAW,CAAE,IAAI,CACjBG,KAAK,CAAE,CACLC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,iBACR,CACF,CACF,CACF,CAAE,EAnBE,yBAoBL,CAAC,CACC,CAAC,EACH,CACN,EACE,CAAC,cAGN5G,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBvF,KAAA,QAAKsF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CvF,KAAA,QAAKsF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDzF,IAAA,OAAIwF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACrEvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,cAAc,CACjBxB,SAAS,CAAC,yEAAyE,CAAAC,QAAA,EACpF,WACU,cAAAzF,IAAA,CAACH,cAAc,EAAC2F,SAAS,CAAC,cAAc,CAAE,CAAC,EAChD,CAAC,EACJ,CAAC,cAENtF,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBzE,WAAW,CAACoE,GAAG,CAAEhF,IAAI,eACpBF,KAAA,QAAmBsF,SAAS,CAAC,iGAAiG,CAAAC,QAAA,eAC5HvF,KAAA,QAAKsF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzF,IAAA,QAAKwF,SAAS,CAAC,qFAAqF,CAAAC,QAAA,cAClGzF,IAAA,CAACR,QAAQ,EAACgG,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC7C,CAAC,cACNtF,KAAA,QAAKsF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzF,IAAA,QAAKwF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC/CrF,IAAI,CAAC6G,IAAI,EAAI,cAAc,CACzB,CAAC,cACN/G,KAAA,QAAKsF,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACtDzF,IAAA,SAAMwF,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAErF,IAAI,CAACyC,IAAI,CAAO,CAAC,cAC/C7C,IAAA,SAAMwF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,QAAC,CAAM,CAAC,cAC/BzF,IAAA,SAAAyF,QAAA,CAAO,GAAI,CAAAlB,IAAI,CAACnE,IAAI,CAACsE,UAAU,CAAC,CAACG,kBAAkB,CAAC,CAAC,CAAO,CAAC,EAC1D,CAAC,EACH,CAAC,EACH,CAAC,cACN7E,IAAA,CAACf,IAAI,EACH+H,EAAE,CAAE,gBAAgB5G,IAAI,CAAC8G,EAAE,EAAG,CAC9B1B,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAClE,SAED,CAAM,CAAC,GArBCrF,IAAI,CAAC8G,EAsBV,CACN,CAAC,CAEDlG,WAAW,CAAC8B,MAAM,GAAK,CAAC,eACvB9C,IAAA,QAAKwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrDzF,IAAA,MAAGwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAG,CAAC,CAC5C,CACN,EACE,CAAC,EACH,CAAC,cAGNvF,KAAA,QAAKsF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CvF,KAAA,QAAKsF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDzF,IAAA,OAAIwF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,yBAAuB,CAAI,CAAC,cAChFvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,kBAAkB,CACrBxB,SAAS,CAAC,yEAAyE,CAAAC,QAAA,EACpF,WACU,cAAAzF,IAAA,CAACH,cAAc,EAAC2F,SAAS,CAAC,cAAc,CAAE,CAAC,EAChD,CAAC,EACJ,CAAC,cAENtF,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBvE,eAAe,CAACkE,GAAG,CAAE+B,QAAQ,OAAAC,oBAAA,oBAC5BlH,KAAA,QAAuBsF,SAAS,CAAC,+DAA+D,CAAAC,QAAA,eAC9FvF,KAAA,QAAKsF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,MAAGwF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE0B,QAAQ,CAACF,IAAI,CAAI,CAAC,cAC5D/G,KAAA,MAAGsF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,cAC5B,CAAC,EAAA2B,oBAAA,CAAAD,QAAQ,CAACE,UAAU,UAAAD,oBAAA,iBAAnBA,oBAAA,CAAqBH,IAAI,GAAI,SAAS,EAClD,CAAC,EACD,CAAC,cACNjH,IAAA,CAACf,IAAI,EACH+H,EAAE,CAAE,oBAAoBG,QAAQ,CAACD,EAAE,EAAG,CACtC1B,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAClE,MAED,CAAM,CAAC,EACJ,CAAC,cACNzF,IAAA,MAAGwF,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CACnD0B,QAAQ,CAACG,eAAe,CAAGH,QAAQ,CAACG,eAAe,CAACC,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,CAAG,KAAK,CAAGJ,QAAQ,CAACK,WAAW,EAAI,0BAA0B,CAClI,CAAC,GAjBIL,QAAQ,CAACD,EAkBd,CAAC,EACP,CAAC,CAEDhG,eAAe,CAAC4B,MAAM,GAAK,CAAC,eAC3B9C,IAAA,QAAKwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrDzF,IAAA,MAAGwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,2BAAyB,CAAG,CAAC,CACvD,CACN,EACE,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,cAGNvF,KAAA,QAAKsF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CzF,IAAA,OAAIwF,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cAC3EvF,KAAA,QAAKsF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,kBAAkB,CACrBxB,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAE3FzF,IAAA,CAACR,QAAQ,EAACgG,SAAS,CAAC,4BAA4B,CAAE,CAAC,cACnDxF,IAAA,SAAMwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,iBAAe,CAAM,CAAC,EAClD,CAAC,cAEPvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,sBAAsB,CACzBxB,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAE3FzF,IAAA,CAACL,gBAAgB,EAAC6F,SAAS,CAAC,8BAA8B,CAAE,CAAC,cAC7DxF,IAAA,SAAMwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,wBAAsB,CAAM,CAAC,EACzD,CAAC,cAEPvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,gBAAgB,CACnBxB,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAE3FzF,IAAA,CAACF,YAAY,EAAC0F,SAAS,CAAC,6BAA6B,CAAE,CAAC,cACxDxF,IAAA,SAAMwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAY,CAAM,CAAC,EAC/C,CAAC,EACJ,CAAC,EACH,CAAC,cAGNvF,KAAA,QAAKsF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,kBAAkB,CACrBxB,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAE5EzF,IAAA,OAAIwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAC5EzF,IAAA,MAAGwF,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,qCAEvC,CAAG,CAAC,EACA,CAAC,cAEPvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,cAAc,CACjBxB,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAE5EzF,IAAA,OAAIwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC3EzF,IAAA,MAAGwF,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,8BAEvC,CAAG,CAAC,EACA,CAAC,cAEPvF,KAAA,CAACjB,IAAI,EACH+H,EAAE,CAAC,sBAAsB,CACzBxB,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAE5EzF,IAAA,OAAIwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACzEzF,IAAA,MAAGwF,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,uCAEvC,CAAG,CAAC,EACA,CAAC,EACJ,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtF,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}