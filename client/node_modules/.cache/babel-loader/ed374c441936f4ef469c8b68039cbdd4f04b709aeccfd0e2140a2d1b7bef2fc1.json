{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAuth}from'../../hooks/useAuth';import{therapistService}from'../../services/therapistService';import{DATA}from'../../utils/supabaseData';import{useTranslation}from'react-i18next';import useLanguage from'../../hooks/useLanguage';import{UserGroupIcon,CalendarIcon,DocumentTextIcon,ClockIcon,ArrowPathIcon,ArrowRightIcon,ChatBubbleLeftRightIcon}from'@heroicons/react/24/outline';import{Line}from'react-chartjs-2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$profile_data;const{user}=useAuth();const[clients,setClients]=useState([]);const[upcomingSessions,setUpcomingSessions]=useState([]);const[recentSummaries,setRecentSummaries]=useState([]);const[sentimentTrend,setSentimentTrend]=useState(null);const[stats,setStats]=useState({totalClients:0,upcomingSessionsCount:0,recentSummariesCount:0,averageSentiment:0});const[loading,setLoading]=useState(true);const[refreshing,setRefreshing]=useState(false);const refreshDashboard=async()=>{setRefreshing(true);try{await fetchDashboardData();}finally{setRefreshing(false);}};const{t}=useTranslation();const{currentLanguage}=useLanguage();const fetchDashboardData=async()=>{try{setLoading(true);// Get user ID\nconst userId=user===null||user===void 0?void 0:user.id;// Fetch data from Supabase\nconst[clientsData,sessionsData,summariesData]=await Promise.all([// Fetch assigned clients\nuserId?therapistService.getAssignedClients(userId):DATA.getClients(),// Fetch upcoming sessions\nuserId?therapistService.getUpcomingSessions(userId):DATA.getUpcomingSessions(),// Fetch recent summaries\nuserId?therapistService.getRecentSummaries(userId):DATA.getRecentSummaries()]);// Update state with fetched data\nsetClients(clientsData||[]);setUpcomingSessions(sessionsData||[]);setRecentSummaries(summariesData||[]);// Calculate stats\nconst avgSentiment=calculateAverageSentiment(summariesData);setStats({totalClients:clientsData.length,upcomingSessionsCount:sessionsData.length,recentSummariesCount:summariesData.length,averageSentiment:avgSentiment});// Generate sentiment trend data for chart\ngenerateSentimentTrendData(summariesData);}catch(error){console.error('Error fetching dashboard data:',error);}finally{setLoading(false);}};const calculateAverageSentiment=summaries=>{if(!summaries||summaries.length===0)return 0;const validSentiments=summaries.filter(summary=>summary.sentiment_metrics&&summary.sentiment_metrics.average).map(summary=>summary.sentiment_metrics.average);if(validSentiments.length===0)return 0;return(validSentiments.reduce((sum,score)=>sum+score,0)/validSentiments.length).toFixed(2);};const generateSentimentTrendData=summaries=>{if(!summaries||summaries.length===0){setSentimentTrend(null);return;}// Group summaries by date\nconst dateGroups={};summaries.forEach(summary=>{if(!summary.sentiment_metrics||!summary.sentiment_metrics.average)return;const date=new Date(summary.created_at).toLocaleDateString();if(!dateGroups[date]){dateGroups[date]=[];}dateGroups[date].push(summary.sentiment_metrics.average);});// Calculate average for each date\nconst dates=Object.keys(dateGroups).sort((a,b)=>new Date(a)-new Date(b));const data=dates.map(date=>{const scores=dateGroups[date];return scores.reduce((sum,score)=>sum+score,0)/scores.length;});if(dates.length===0||data.length===0){setSentimentTrend(null);return;}const chartData={labels:dates,datasets:[{label:'Client Sentiment Trend',data:data,borderColor:'rgb(59, 130, 246)',backgroundColor:'rgba(59, 130, 246, 0.1)',fill:true,tension:0.4}]};setSentimentTrend(chartData);};useEffect(()=>{// In development mode, we can proceed even without a user\nfetchDashboardData();},[]);if(loading&&!refreshing){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold\",children:[t('dashboard.welcome'),\", Dr. \",(user===null||user===void 0?void 0:(_user$profile_data=user.profile_data)===null||_user$profile_data===void 0?void 0:_user$profile_data.name)||(user===null||user===void 0?void 0:user.name)||t('nav.therapist')]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-blue-100 max-w-2xl\",children:t('dashboard.description')})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:refreshDashboard,disabled:refreshing,className:\"flex items-center bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors text-white px-4 py-2 rounded-lg disabled:opacity-50\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:`h-5 w-5 mr-2 ${refreshing?'animate-spin':''}`}),t('common.refresh')]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:t('dashboard.activeClients')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalClients})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-indigo-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-6 w-6 text-indigo-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:t('dashboard.upcomingSessions')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.upcomingSessionsCount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-purple-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-6 w-6 text-purple-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:t('dashboard.recentSummaries')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.recentSummariesCount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-6 w-6 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:t('dashboard.avgSentiment')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.averageSentiment})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-8\",children:[sentimentTrend?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:t('dashboard.sentimentTrends')})}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Line,{data:sentimentTrend,options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:function(context){return`Score: ${context.parsed.y.toFixed(2)}`;}}}},scales:{y:{beginAtZero:true,max:1,title:{display:true,text:'Average Sentiment Score'}},x:{title:{display:true,text:'Date'}}}}})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-gray-500 italic\",children:t('dashboard.sentimentChartDescription')})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:t('dashboard.sentimentTrends')}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:t('dashboard.noSentimentData')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:t('dashboard.upcomingSessions')}),/*#__PURE__*/_jsxs(Link,{to:\"/therapist/clients\",className:\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\",children:[t('common.viewAll'),\" \",/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"h-4 w-4 ml-1\"})]})]}),upcomingSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:upcomingSessions.map(session=>{var _session$clients;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 rounded-full mr-4\",children:/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:((_session$clients=session.clients)===null||_session$clients===void 0?void 0:_session$clients.name)||'Client'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:new Date(session.start_time).toLocaleString()})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* Join session logic */},className:\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\",children:\"Join\"})]},session.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"No upcoming sessions scheduled\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* Schedule session logic */},className:\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\",children:\"Schedule New Session\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"Recent AI Summaries\"}),/*#__PURE__*/_jsxs(Link,{to:\"/therapist/clients\",className:\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\",children:[\"View All \",/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"h-4 w-4 ml-1\"})]})]}),recentSummaries.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentSummaries.map(summary=>{var _summary$conversation,_summary$conversation2,_summary$conversation3,_summary$sentiment_me,_summary$sentiment_me2,_summary$sentiment_me3;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:((_summary$conversation=summary.conversations)===null||_summary$conversation===void 0?void 0:(_summary$conversation2=_summary$conversation.clients)===null||_summary$conversation2===void 0?void 0:_summary$conversation2.name)||'Client'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:new Date(summary.created_at).toLocaleString()})]}),/*#__PURE__*/_jsx(Link,{to:`/therapist/clients/${(_summary$conversation3=summary.conversations)===null||_summary$conversation3===void 0?void 0:_summary$conversation3.client_id}`,className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"Details\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800 line-clamp-3\",children:summary.summary_text}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[\"Sentiment: \",((_summary$sentiment_me=summary.sentiment_metrics)===null||_summary$sentiment_me===void 0?void 0:(_summary$sentiment_me2=_summary$sentiment_me.average)===null||_summary$sentiment_me2===void 0?void 0:_summary$sentiment_me2.toFixed(2))||'N/A']}),((_summary$sentiment_me3=summary.sentiment_metrics)===null||_summary$sentiment_me3===void 0?void 0:_summary$sentiment_me3.trend)&&/*#__PURE__*/_jsxs(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${summary.sentiment_metrics.trend==='improving'?'bg-green-100 text-green-800':summary.sentiment_metrics.trend==='declining'?'bg-red-100 text-red-800':'bg-yellow-100 text-yellow-800'}`,children:[\"Trend: \",summary.sentiment_metrics.trend]})]})]},summary.id);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:t('dashboard.noRecentSummaries')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:t('dashboard.quickActions')}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/therapist/clients\",className:\"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-5 w-5 text-blue-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Manage Clients\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{/* Schedule session logic */},className:\"w-full flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-5 w-5 text-indigo-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Schedule New Session\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{/* Create behavior preset logic */},className:\"w-full flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 text-purple-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Create Behavior Preset\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-secondary-900\",children:\"Your Clients\"}),/*#__PURE__*/_jsx(Link,{to:\"/therapist/clients\",className:\"text-primary-600 hover:text-primary-700 text-sm font-medium\",children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:clients.slice(0,6).map(client=>{var _client$users,_client$users$profile,_client$client_behavi;return/*#__PURE__*/_jsxs(Link,{to:`/therapist/clients/${client.id}`,className:\"p-4 bg-secondary-50 rounded-lg hover:bg-secondary-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-secondary-900\",children:((_client$users=client.users)===null||_client$users===void 0?void 0:(_client$users$profile=_client$users.profile_data)===null||_client$users$profile===void 0?void 0:_client$users$profile.name)||client.name||'Client'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-secondary-600\",children:[((_client$client_behavi=client.client_behaviors)===null||_client$client_behavi===void 0?void 0:_client$client_behavi.length)||0,\" Active Behaviors\"]})]},client.id);})})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","useAuth","therapistService","DATA","useTranslation","useLanguage","UserGroupIcon","CalendarIcon","DocumentTextIcon","ClockIcon","ArrowPathIcon","ArrowRightIcon","ChatBubbleLeftRightIcon","Line","jsx","_jsx","jsxs","_jsxs","Dashboard","_user$profile_data","user","clients","setClients","upcomingSessions","setUpcomingSessions","recentSummaries","setRecentSummaries","sentimentTrend","setSentimentTrend","stats","setStats","totalClients","upcomingSessionsCount","recentSummariesCount","averageSentiment","loading","setLoading","refreshing","setRefreshing","refreshDashboard","fetchDashboardData","t","currentLanguage","userId","id","clientsData","sessionsData","summariesData","Promise","all","getAssignedClients","getClients","getUpcomingSessions","getRecentSummaries","avgSentiment","calculateAverageSentiment","length","generateSentimentTrendData","error","console","summaries","validSentiments","filter","summary","sentiment_metrics","average","map","reduce","sum","score","toFixed","dateGroups","forEach","date","Date","created_at","toLocaleDateString","push","dates","Object","keys","sort","a","b","data","scores","chartData","labels","datasets","label","borderColor","backgroundColor","fill","tension","className","children","profile_data","name","onClick","disabled","options","responsive","maintainAspectRatio","plugins","legend","position","tooltip","callbacks","context","parsed","y","scales","beginAtZero","max","title","display","text","x","to","session","_session$clients","start_time","toLocaleString","_summary$conversation","_summary$conversation2","_summary$conversation3","_summary$sentiment_me","_summary$sentiment_me2","_summary$sentiment_me3","conversations","client_id","summary_text","trend","slice","client","_client$users","_client$users$profile","_client$client_behavi","users","client_behaviors"],"sources":["/Users/gio/development/smartterapist/client/src/pages/therapist/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth';\nimport { therapistService } from '../../services/therapistService';\nimport { DATA } from '../../utils/supabaseData';\nimport { useTranslation } from 'react-i18next';\nimport useLanguage from '../../hooks/useLanguage';\nimport { \n  UserGroupIcon, \n  CalendarIcon, \n  DocumentTextIcon, \n  ClockIcon,\n  ArrowPathIcon,\n  ArrowRightIcon,\n  ChatBubbleLeftRightIcon\n} from '@heroicons/react/24/outline';\nimport { Line } from 'react-chartjs-2';\n\nconst Dashboard = () => {\n  const { user } = useAuth();\n  const [clients, setClients] = useState([]);\n  const [upcomingSessions, setUpcomingSessions] = useState([]);\n  const [recentSummaries, setRecentSummaries] = useState([]);\n  const [sentimentTrend, setSentimentTrend] = useState(null);\n  const [stats, setStats] = useState({\n    totalClients: 0,\n    upcomingSessionsCount: 0,\n    recentSummariesCount: 0,\n    averageSentiment: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const refreshDashboard = async () => {\n    setRefreshing(true);\n    try {\n      await fetchDashboardData();\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const { t } = useTranslation();\n  const { currentLanguage } = useLanguage();\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      \n      // Get user ID\n      const userId = user?.id;\n      \n      // Fetch data from Supabase\n      const [clientsData, sessionsData, summariesData] = await Promise.all([\n        // Fetch assigned clients\n        userId ? therapistService.getAssignedClients(userId) : DATA.getClients(),\n        \n        // Fetch upcoming sessions\n        userId ? therapistService.getUpcomingSessions(userId) : DATA.getUpcomingSessions(),\n        \n        // Fetch recent summaries\n        userId ? therapistService.getRecentSummaries(userId) : DATA.getRecentSummaries()\n      ]);\n      \n      // Update state with fetched data\n      setClients(clientsData || []);\n      setUpcomingSessions(sessionsData || []);\n      setRecentSummaries(summariesData || []);\n      \n      // Calculate stats\n      const avgSentiment = calculateAverageSentiment(summariesData);\n      \n      setStats({\n        totalClients: clientsData.length,\n        upcomingSessionsCount: sessionsData.length,\n        recentSummariesCount: summariesData.length,\n        averageSentiment: avgSentiment\n      });\n      \n      // Generate sentiment trend data for chart\n      generateSentimentTrendData(summariesData);\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const calculateAverageSentiment = (summaries) => {\n    if (!summaries || summaries.length === 0) return 0;\n    \n    const validSentiments = summaries\n      .filter(summary => summary.sentiment_metrics && summary.sentiment_metrics.average)\n      .map(summary => summary.sentiment_metrics.average);\n      \n    if (validSentiments.length === 0) return 0;\n    \n    return (validSentiments.reduce((sum, score) => sum + score, 0) / validSentiments.length).toFixed(2);\n  };\n  \n  const generateSentimentTrendData = (summaries) => {\n    if (!summaries || summaries.length === 0) {\n      setSentimentTrend(null);\n      return;\n    }\n    \n    // Group summaries by date\n    const dateGroups = {};\n    summaries.forEach(summary => {\n      if (!summary.sentiment_metrics || !summary.sentiment_metrics.average) return;\n      \n      const date = new Date(summary.created_at).toLocaleDateString();\n      if (!dateGroups[date]) {\n        dateGroups[date] = [];\n      }\n      dateGroups[date].push(summary.sentiment_metrics.average);\n    });\n    \n    // Calculate average for each date\n    const dates = Object.keys(dateGroups).sort((a, b) => new Date(a) - new Date(b));\n    const data = dates.map(date => {\n      const scores = dateGroups[date];\n      return scores.reduce((sum, score) => sum + score, 0) / scores.length;\n    });\n    \n    if (dates.length === 0 || data.length === 0) {\n      setSentimentTrend(null);\n      return;\n    }\n    \n    const chartData = {\n      labels: dates,\n      datasets: [{\n        label: 'Client Sentiment Trend',\n        data: data,\n        borderColor: 'rgb(59, 130, 246)',\n        backgroundColor: 'rgba(59, 130, 246, 0.1)',\n        fill: true,\n        tension: 0.4\n      }]\n    };\n    \n    setSentimentTrend(chartData);\n  };\n\n  useEffect(() => {\n    // In development mode, we can proceed even without a user\n    fetchDashboardData();\n  }, []);\n\n  if (loading && !refreshing) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n      {/* Welcome Section */}\n      <div className=\"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold\">\n              {t('dashboard.welcome')}, Dr. {user?.profile_data?.name || user?.name || t('nav.therapist')}\n            </h1>\n            <p className=\"mt-2 text-blue-100 max-w-2xl\">\n              {t('dashboard.description')}\n            </p>\n          </div>\n          <button\n            onClick={refreshDashboard}\n            disabled={refreshing}\n            className=\"flex items-center bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors text-white px-4 py-2 rounded-lg disabled:opacity-50\"\n          >\n            <ArrowPathIcon className={`h-5 w-5 mr-2 ${refreshing ? 'animate-spin' : ''}`} />\n            {t('common.refresh')}\n          </button>\n        </div>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-blue-100 rounded-full mr-4\">\n            <UserGroupIcon className=\"h-6 w-6 text-blue-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">{t('dashboard.activeClients')}</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.totalClients}</p>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-indigo-100 rounded-full mr-4\">\n            <CalendarIcon className=\"h-6 w-6 text-indigo-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">{t('dashboard.upcomingSessions')}</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.upcomingSessionsCount}</p>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-purple-100 rounded-full mr-4\">\n            <DocumentTextIcon className=\"h-6 w-6 text-purple-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">{t('dashboard.recentSummaries')}</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.recentSummariesCount}</p>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-xl shadow p-6 flex items-center\">\n          <div className=\"p-3 bg-green-100 rounded-full mr-4\">\n            <ChatBubbleLeftRightIcon className=\"h-6 w-6 text-green-600\" />\n          </div>\n          <div>\n            <p className=\"text-sm text-gray-500\">{t('dashboard.avgSentiment')}</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.averageSentiment}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Left Column - Sentiment Trend and Upcoming Sessions */}\n        <div className=\"lg:col-span-2 space-y-8\">\n          {/* Sentiment Trend Chart */}\n          {sentimentTrend ? (\n            <div className=\"bg-white rounded-xl shadow p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-xl font-semibold text-gray-800\">{t('dashboard.sentimentTrends')}</h2>\n              </div>\n              <div className=\"h-64\">\n                <Line\n                  data={sentimentTrend}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: {\n                        position: 'top',\n                      },\n                      tooltip: {\n                        callbacks: {\n                          label: function(context) {\n                            return `Score: ${context.parsed.y.toFixed(2)}`;\n                          }\n                        }\n                      }\n                    },\n                    scales: {\n                      y: {\n                        beginAtZero: true,\n                        max: 1,\n                        title: {\n                          display: true,\n                          text: 'Average Sentiment Score'\n                        }\n                      },\n                      x: {\n                        title: {\n                          display: true,\n                          text: 'Date'\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n              <p className=\"mt-4 text-sm text-gray-500 italic\">\n                {t('dashboard.sentimentChartDescription')}\n              </p>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-xl shadow p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">{t('dashboard.sentimentTrends')}</h2>\n              <div className=\"flex items-center justify-center h-64 bg-gray-50 rounded-lg\">\n                <p className=\"text-gray-500\">{t('dashboard.noSentimentData')}</p>\n              </div>\n            </div>\n          )}\n          \n          {/* Upcoming Sessions */}\n          <div className=\"bg-white rounded-xl shadow p-6\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-800\">{t('dashboard.upcomingSessions')}</h2>\n              <Link\n                to=\"/therapist/clients\"\n                className=\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\"\n              >\n                {t('common.viewAll')} <ArrowRightIcon className=\"h-4 w-4 ml-1\" />\n              </Link>\n            </div>\n            \n            {upcomingSessions.length > 0 ? (\n              <div className=\"space-y-4\">\n                {upcomingSessions.map((session) => (\n                  <div\n                    key={session.id}\n                    className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"p-3 bg-blue-100 rounded-full mr-4\">\n                        <ClockIcon className=\"h-5 w-5 text-blue-600\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          {session.clients?.name || 'Client'}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          {new Date(session.start_time).toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => {/* Join session logic */}}\n                      className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n                    >\n                      Join\n                    </button>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                <p className=\"text-gray-500 mb-4\">No upcoming sessions scheduled</p>\n                <button\n                  onClick={() => {/* Schedule session logic */}}\n                  className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n                >\n                  Schedule New Session\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Right Column - Recent Summaries */}\n        <div className=\"space-y-8\">\n          <div className=\"bg-white rounded-xl shadow p-6\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-800\">Recent AI Summaries</h2>\n              <Link\n                to=\"/therapist/clients\"\n                className=\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center\"\n              >\n                View All <ArrowRightIcon className=\"h-4 w-4 ml-1\" />\n              </Link>\n            </div>\n            \n            {recentSummaries.length > 0 ? (\n              <div className=\"space-y-4\">\n                {recentSummaries.map((summary) => (\n                  <div\n                    key={summary.id}\n                    className=\"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n                  >\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          {summary.conversations?.clients?.name || 'Client'}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          {new Date(summary.created_at).toLocaleString()}\n                        </p>\n                      </div>\n                      <Link\n                        to={`/therapist/clients/${summary.conversations?.client_id}`}\n                        className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                      >\n                        Details\n                      </Link>\n                    </div>\n                    <p className=\"text-gray-800 line-clamp-3\">{summary.summary_text}</p>\n                    <div className=\"mt-2 flex flex-wrap gap-2\">\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                        Sentiment: {summary.sentiment_metrics?.average?.toFixed(2) || 'N/A'}\n                      </span>\n                      {summary.sentiment_metrics?.trend && (\n                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${summary.sentiment_metrics.trend === 'improving' ? 'bg-green-100 text-green-800' : summary.sentiment_metrics.trend === 'declining' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                          Trend: {summary.sentiment_metrics.trend}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                <p className=\"text-gray-500\">{t('dashboard.noRecentSummaries')}</p>\n              </div>\n            )}\n          </div>\n          \n          {/* Quick Actions */}\n          <div className=\"bg-white rounded-xl shadow p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">{t('dashboard.quickActions')}</h2>\n            <div className=\"space-y-3\">\n              <Link\n                to=\"/therapist/clients\"\n                className=\"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n              >\n                <UserGroupIcon className=\"h-5 w-5 text-blue-600 mr-3\" />\n                <span className=\"text-gray-900\">Manage Clients</span>\n              </Link>\n              \n              <button\n                onClick={() => {/* Schedule session logic */}}\n                className=\"w-full flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left\"\n              >\n                <CalendarIcon className=\"h-5 w-5 text-indigo-600 mr-3\" />\n                <span className=\"text-gray-900\">Schedule New Session</span>\n              </button>\n              \n              <button\n                onClick={() => {/* Create behavior preset logic */}}\n                className=\"w-full flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors text-left\"\n              >\n                <DocumentTextIcon className=\"h-5 w-5 text-purple-600 mr-3\" />\n                <span className=\"text-gray-900\">Create Behavior Preset</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client List Preview */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-lg font-medium text-secondary-900\">Your Clients</h2>\n          <Link\n            to=\"/therapist/clients\"\n            className=\"text-primary-600 hover:text-primary-700 text-sm font-medium\"\n          >\n            View All\n          </Link>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {clients.slice(0, 6).map((client) => (\n            <Link\n              key={client.id}\n              to={`/therapist/clients/${client.id}`}\n              className=\"p-4 bg-secondary-50 rounded-lg hover:bg-secondary-100 transition-colors\"\n            >\n              <p className=\"font-medium text-secondary-900\">\n                {client.users?.profile_data?.name || client.name || 'Client'}\n              </p>\n              <p className=\"text-sm text-secondary-600\">\n                {client.client_behaviors?.length || 0} Active Behaviors\n              </p>\n            </Link>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}